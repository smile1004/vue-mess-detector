(function(T,Q){typeof exports=="object"&&typeof module<"u"?Q(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],Q):(T=typeof globalThis<"u"?globalThis:T||self,Q(T.yargs,T.util,T.path,T.fs,T.assert,T.url,T.compilerSfc))})(this,function(T,Q,j,I,Xe,vt,_t){"use strict";var He=typeof document<"u"?document.currentScript:null;class J extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,J)}}function ke(){return St()?0:1}function St(){return wt()&&!process.defaultApp}function wt(){return!!process.versions.electron}function xt(e){return e.slice(ke()+1)}function Ot(){return process.argv[ke()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function ee(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",s=!1;const c=e.match(/^-+/);for(let a=c?c[0].length:0;a<e.length;a++){let h=e.charAt(a);s&&(s=!1,h=h.toUpperCase()),a!==0&&(h==="-"||h==="_")?s=!0:h!=="-"&&h!=="_"&&(n+=h)}return n}}function Je(e,t){const n=e.toLowerCase();t=t||"-";let s="";for(let c=0;c<e.length;c++){const a=n.charAt(c),h=e.charAt(c);a!==h&&c>0?s+=`${t}${n.charAt(c)}`:s+=h}return s}function et(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function Nt(e){if(Array.isArray(e))return e.map(h=>typeof h!="string"?h+"":h);e=e.trim();let t=0,n=null,s=null,c=null;const a=[];for(let h=0;h<e.length;h++){if(n=s,s=e.charAt(h),s===" "&&!c){n!==" "&&t++;continue}s===c?c=null:(s==="'"||s==='"')&&!c&&(c=s),a[t]||(a[t]=""),a[t]+=s}return a}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var W;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(W||(W={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let M;class jt{constructor(t){M=t}parse(t,n){const s=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),c=Nt(t),a=typeof t=="string",h=Ft(Object.assign(Object.create(null),s.alias)),d=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},s.configuration),C=Object.assign(Object.create(null),s.default),F=s.configObjects||[],w=s.envPrefix,D=d["populate--"],Y=D?"--":"_",Fe=Object.create(null),$t=Object.create(null),X=s.__||M.format,u={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},B=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,Ze=new RegExp("^--"+d["negation-prefix"]+"(.+)");[].concat(s.array||[]).filter(Boolean).forEach(function(o){const r=typeof o=="object"?o.key:o,f=Object.keys(o).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();f&&(u[f][r]=!0),u.arrays[r]=!0,u.keys.push(r)}),[].concat(s.boolean||[]).filter(Boolean).forEach(function(o){u.bools[o]=!0,u.keys.push(o)}),[].concat(s.string||[]).filter(Boolean).forEach(function(o){u.strings[o]=!0,u.keys.push(o)}),[].concat(s.number||[]).filter(Boolean).forEach(function(o){u.numbers[o]=!0,u.keys.push(o)}),[].concat(s.count||[]).filter(Boolean).forEach(function(o){u.counts[o]=!0,u.keys.push(o)}),[].concat(s.normalize||[]).filter(Boolean).forEach(function(o){u.normalize[o]=!0,u.keys.push(o)}),typeof s.narg=="object"&&Object.entries(s.narg).forEach(([o,r])=>{typeof r=="number"&&(u.nargs[o]=r,u.keys.push(o))}),typeof s.coerce=="object"&&Object.entries(s.coerce).forEach(([o,r])=>{typeof r=="function"&&(u.coercions[o]=r,u.keys.push(o))}),typeof s.config<"u"&&(Array.isArray(s.config)||typeof s.config=="string"?[].concat(s.config).filter(Boolean).forEach(function(o){u.configs[o]=!0}):typeof s.config=="object"&&Object.entries(s.config).forEach(([o,r])=>{(typeof r=="boolean"||typeof r=="function")&&(u.configs[o]=r)})),po(s.key,h,s.default,u.arrays),Object.keys(C).forEach(function(o){(u.aliases[o]||[]).forEach(function(r){C[r]=C[o]})});let z=null;Eo();let Re=[];const x=Object.assign(Object.create(null),{_:[]}),bt={};for(let o=0;o<c.length;o++){const r=c[o],f=r.replace(/^-{3,}/,"---");let l,i,g,p,m,N;if(r!=="--"&&/^-/.test(r)&&Pe(r))Ke(r);else if(f.match(/^---+(=|$)/)){Ke(r);continue}else if(r.match(/^--.+=/)||!d["short-option-groups"]&&r.match(/^-.+=/))p=r.match(/^--?([^=]+)=([\s\S]*)$/),p!==null&&Array.isArray(p)&&p.length>=3&&(y(p[1],u.arrays)?o=Te(o,p[1],c,p[2]):y(p[1],u.nargs)!==!1?o=Le(o,p[1],c,p[2]):A(p[1],p[2],!0));else if(r.match(Ze)&&d["boolean-negation"])p=r.match(Ze),p!==null&&Array.isArray(p)&&p.length>=2&&(i=p[1],A(i,y(i,u.arrays)?[!1]:!1));else if(r.match(/^--.+/)||!d["short-option-groups"]&&r.match(/^-[^-]+/))p=r.match(/^--?(.+)/),p!==null&&Array.isArray(p)&&p.length>=2&&(i=p[1],y(i,u.arrays)?o=Te(o,i,c):y(i,u.nargs)!==!1?o=Le(o,i,c):(m=c[o+1],m!==void 0&&(!m.match(/^-/)||m.match(B))&&!y(i,u.bools)&&!y(i,u.counts)||/^(true|false)$/.test(m)?(A(i,m),o++):A(i,k(i))));else if(r.match(/^-.\..+=/))p=r.match(/^-([^=]+)=([\s\S]*)$/),p!==null&&Array.isArray(p)&&p.length>=3&&A(p[1],p[2]);else if(r.match(/^-.\..+/)&&!r.match(B))m=c[o+1],p=r.match(/^-(.\..+)/),p!==null&&Array.isArray(p)&&p.length>=2&&(i=p[1],m!==void 0&&!m.match(/^-/)&&!y(i,u.bools)&&!y(i,u.counts)?(A(i,m),o++):A(i,k(i)));else if(r.match(/^-[^-]+/)&&!r.match(B)){g=r.slice(1,-1).split(""),l=!1;for(let R=0;R<g.length;R++){if(m=r.slice(R+2),g[R+1]&&g[R+1]==="="){N=r.slice(R+3),i=g[R],y(i,u.arrays)?o=Te(o,i,c,N):y(i,u.nargs)!==!1?o=Le(o,i,c,N):A(i,N),l=!0;break}if(m==="-"){A(g[R],m);continue}if(/[A-Za-z]/.test(g[R])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(m)&&y(m,u.bools)===!1){A(g[R],m),l=!0;break}if(g[R+1]&&g[R+1].match(/\W/)){A(g[R],m),l=!0;break}else A(g[R],k(g[R]))}i=r.slice(-1)[0],!l&&i!=="-"&&(y(i,u.arrays)?o=Te(o,i,c):y(i,u.nargs)!==!1?o=Le(o,i,c):(m=c[o+1],m!==void 0&&(!/^(-|--)[^-]/.test(m)||m.match(B))&&!y(i,u.bools)&&!y(i,u.counts)||/^(true|false)$/.test(m)?(A(i,m),o++):A(i,k(i))))}else if(r.match(/^-[0-9]$/)&&r.match(B)&&y(r.slice(1),u.bools))i=r.slice(1),A(i,k(i));else if(r==="--"){Re=c.slice(o+1);break}else if(d["halt-at-non-option"]){Re=c.slice(o);break}else Ke(r)}Et(x,!0),Et(x,!1),ao(x),uo(),Ct(x,u.aliases,C,!0),fo(x),d["set-placeholder-key"]&&ho(x),Object.keys(u.counts).forEach(function(o){_e(x,o.split("."))||A(o,0)}),D&&Re.length&&(x[Y]=[]),Re.forEach(function(o){x[Y].push(o)}),d["camel-case-expansion"]&&d["strip-dashed"]&&Object.keys(x).filter(o=>o!=="--"&&o.includes("-")).forEach(o=>{delete x[o]}),d["strip-aliased"]&&[].concat(...Object.keys(h).map(o=>h[o])).forEach(o=>{d["camel-case-expansion"]&&o.includes("-")&&delete x[o.split(".").map(r=>ee(r)).join(".")],delete x[o]});function Ke(o){const r=We("_",o);(typeof r=="string"||typeof r=="number")&&x._.push(r)}function Le(o,r,f,l){let i,g=y(r,u.nargs);if(g=typeof g!="number"||isNaN(g)?1:g,g===0)return G(l)||(z=Error(X("Argument unexpected for: %s",r))),A(r,k(r)),o;let p=G(l)?0:1;if(d["nargs-eats-options"])f.length-(o+1)+p<g&&(z=Error(X("Not enough arguments following: %s",r))),p=g;else{for(i=o+1;i<f.length&&(!f[i].match(/^-[^0-9]/)||f[i].match(B)||Pe(f[i]));i++)p++;p<g&&(z=Error(X("Not enough arguments following: %s",r)))}let m=Math.min(p,g);for(!G(l)&&m>0&&(A(r,l),m--),i=o+1;i<m+o+1;i++)A(r,f[i]);return o+m}function Te(o,r,f,l){let i=[],g=l||f[o+1];const p=y(r,u.nargs);if(y(r,u.bools)&&!/^(true|false)$/.test(g))i.push(!0);else if(G(g)||G(l)&&/^-/.test(g)&&!B.test(g)&&!Pe(g)){if(C[r]!==void 0){const m=C[r];i=Array.isArray(m)?m:[m]}}else{G(l)||i.push(Qe(r,l,!0));for(let m=o+1;m<f.length&&!(!d["greedy-arrays"]&&i.length>0||p&&typeof p=="number"&&i.length>=p||(g=f[m],/^-/.test(g)&&!B.test(g)&&!Pe(g)));m++)o=m,i.push(Qe(r,g,a))}return typeof p=="number"&&(p&&i.length<p||isNaN(p)&&i.length===0)&&(z=Error(X("Not enough arguments following: %s",r))),A(r,i),o}function A(o,r,f=a){if(/-/.test(o)&&d["camel-case-expansion"]){const g=o.split(".").map(function(p){return ee(p)}).join(".");yt(o,g)}const l=Qe(o,r,f),i=o.split(".");Se(x,i,l),u.aliases[o]&&u.aliases[o].forEach(function(g){const p=g.split(".");Se(x,p,l)}),i.length>1&&d["dot-notation"]&&(u.aliases[i[0]]||[]).forEach(function(g){let p=g.split(".");const m=[].concat(i);m.shift(),p=p.concat(m),(u.aliases[o]||[]).includes(p.join("."))||Se(x,p,l)}),y(o,u.normalize)&&!y(o,u.arrays)&&[o].concat(u.aliases[o]||[]).forEach(function(p){Object.defineProperty(bt,p,{enumerable:!0,get(){return r},set(m){r=typeof m=="string"?M.normalize(m):m}})})}function yt(o,r){u.aliases[o]&&u.aliases[o].length||(u.aliases[o]=[r],Fe[r]=!0),u.aliases[r]&&u.aliases[r].length||yt(r,o)}function Qe(o,r,f){f&&(r=Rt(r)),(y(o,u.bools)||y(o,u.counts))&&typeof r=="string"&&(r=r==="true");let l=Array.isArray(r)?r.map(function(i){return We(o,i)}):We(o,r);return y(o,u.counts)&&(G(l)||typeof l=="boolean")&&(l=ze()),y(o,u.normalize)&&y(o,u.arrays)&&(Array.isArray(r)?l=r.map(i=>M.normalize(i)):l=M.normalize(r)),l}function We(o,r){return!d["parse-positional-numbers"]&&o==="_"||!y(o,u.strings)&&!y(o,u.bools)&&!Array.isArray(r)&&(et(r)&&d["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${r}`)))||!G(r)&&y(o,u.numbers))&&(r=Number(r)),r}function ao(o){const r=Object.create(null);Ct(r,u.aliases,C),Object.keys(u.configs).forEach(function(f){const l=o[f]||r[f];if(l)try{let i=null;const g=M.resolve(M.cwd(),l),p=u.configs[f];if(typeof p=="function"){try{i=p(g)}catch(m){i=m}if(i instanceof Error){z=i;return}}else i=M.require(g);Ye(i)}catch(i){i.name==="PermissionDenied"?z=i:o[f]&&(z=Error(X("Invalid JSON config file: %s",l)))}})}function Ye(o,r){Object.keys(o).forEach(function(f){const l=o[f],i=r?r+"."+f:f;typeof l=="object"&&l!==null&&!Array.isArray(l)&&d["dot-notation"]?Ye(l,i):(!_e(x,i.split("."))||y(i,u.arrays)&&d["combine-arrays"])&&A(i,l)})}function uo(){typeof F<"u"&&F.forEach(function(o){Ye(o)})}function Et(o,r){if(typeof w>"u")return;const f=typeof w=="string"?w:"",l=M.env();Object.keys(l).forEach(function(i){if(f===""||i.lastIndexOf(f,0)===0){const g=i.split("__").map(function(p,m){return m===0&&(p=p.substring(f.length)),ee(p)});(r&&u.configs[g.join(".")]||!r)&&!_e(o,g)&&A(g.join("."),l[i])}})}function fo(o){let r;const f=new Set;Object.keys(o).forEach(function(l){if(!f.has(l)&&(r=y(l,u.coercions),typeof r=="function"))try{const i=We(l,r(o[l]));[].concat(u.aliases[l]||[],l).forEach(g=>{f.add(g),o[g]=i})}catch(i){z=i}})}function ho(o){return u.keys.forEach(r=>{~r.indexOf(".")||typeof o[r]>"u"&&(o[r]=void 0)}),o}function Ct(o,r,f,l=!1){Object.keys(f).forEach(function(i){_e(o,i.split("."))||(Se(o,i.split("."),f[i]),l&&($t[i]=!0),(r[i]||[]).forEach(function(g){_e(o,g.split("."))||Se(o,g.split("."),f[i])}))})}function _e(o,r){let f=o;d["dot-notation"]||(r=[r.join(".")]),r.slice(0,-1).forEach(function(i){f=f[i]||{}});const l=r[r.length-1];return typeof f!="object"?!1:l in f}function Se(o,r,f){let l=o;d["dot-notation"]||(r=[r.join(".")]),r.slice(0,-1).forEach(function(N){N=tt(N),typeof l=="object"&&l[N]===void 0&&(l[N]={}),typeof l[N]!="object"||Array.isArray(l[N])?(Array.isArray(l[N])?l[N].push({}):l[N]=[l[N],{}],l=l[N][l[N].length-1]):l=l[N]});const i=tt(r[r.length-1]),g=y(r.join("."),u.arrays),p=Array.isArray(f);let m=d["duplicate-arguments-array"];!m&&y(i,u.nargs)&&(m=!0,(!G(l[i])&&u.nargs[i]===1||Array.isArray(l[i])&&l[i].length===u.nargs[i])&&(l[i]=void 0)),f===ze()?l[i]=ze(l[i]):Array.isArray(l[i])?m&&g&&p?l[i]=d["flatten-duplicate-arrays"]?l[i].concat(f):(Array.isArray(l[i][0])?l[i]:[l[i]]).concat([f]):!m&&!!g==!!p?l[i]=f:l[i]=l[i].concat([f]):l[i]===void 0&&g?l[i]=p?f:[f]:m&&!(l[i]===void 0||y(i,u.counts)||y(i,u.bools))?l[i]=[l[i],f]:l[i]=f}function po(...o){o.forEach(function(r){Object.keys(r||{}).forEach(function(f){u.aliases[f]||(u.aliases[f]=[].concat(h[f]||[]),u.aliases[f].concat(f).forEach(function(l){if(/-/.test(l)&&d["camel-case-expansion"]){const i=ee(l);i!==f&&u.aliases[f].indexOf(i)===-1&&(u.aliases[f].push(i),Fe[i]=!0)}}),u.aliases[f].concat(f).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&d["camel-case-expansion"]){const i=Je(l,"-");i!==f&&u.aliases[f].indexOf(i)===-1&&(u.aliases[f].push(i),Fe[i]=!0)}}),u.aliases[f].forEach(function(l){u.aliases[l]=[f].concat(u.aliases[f].filter(function(i){return l!==i}))}))})})}function y(o,r){const f=[].concat(u.aliases[o]||[],o),l=Object.keys(r),i=f.find(g=>l.includes(g));return i?r[i]:!1}function At(o){const r=Object.keys(u);return[].concat(r.map(l=>u[l])).some(function(l){return Array.isArray(l)?l.includes(o):l[o]})}function go(o,...r){return[].concat(...r).some(function(l){const i=o.match(l);return i&&At(i[1])})}function mo(o){if(o.match(B)||!o.match(/^-[^-]+/))return!1;let r=!0,f;const l=o.slice(1).split("");for(let i=0;i<l.length;i++){if(f=o.slice(i+2),!At(l[i])){r=!1;break}if(l[i+1]&&l[i+1]==="="||f==="-"||/[A-Za-z]/.test(l[i])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(f)||l[i+1]&&l[i+1].match(/\W/))break}return r}function Pe(o){return d["unknown-options-as-args"]&&$o(o)}function $o(o){return o=o.replace(/^-{3,}/,"--"),o.match(B)||mo(o)?!1:!go(o,/^-+([^=]+?)=[\s\S]*$/,Ze,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function k(o){return!y(o,u.bools)&&!y(o,u.counts)&&`${o}`in C?C[o]:bo(yo(o))}function bo(o){return{[W.BOOLEAN]:!0,[W.STRING]:"",[W.NUMBER]:void 0,[W.ARRAY]:[]}[o]}function yo(o){let r=W.BOOLEAN;return y(o,u.strings)?r=W.STRING:y(o,u.numbers)?r=W.NUMBER:y(o,u.bools)?r=W.BOOLEAN:y(o,u.arrays)&&(r=W.ARRAY),r}function G(o){return o===void 0}function Eo(){Object.keys(u.counts).find(o=>y(o,u.arrays)?(z=Error(X("Invalid configuration: %s, opts.count excludes opts.array.",o)),!0):y(o,u.nargs)?(z=Error(X("Invalid configuration: %s, opts.count excludes opts.narg.",o)),!0):!1)}return{aliases:Object.assign({},u.aliases),argv:Object.assign(bt,x),configuration:d,defaulted:Object.assign({},$t),error:z,newAliases:Object.assign({},Fe)}}}function Ft(e){const t=[],n=Object.create(null);let s=!0;for(Object.keys(e).forEach(function(c){t.push([].concat(e[c],c))});s;){s=!1;for(let c=0;c<t.length;c++)for(let a=c+1;a<t.length;a++)if(t[c].filter(function(d){return t[a].indexOf(d)!==-1}).length){t[c]=t[c].concat(t[a]),t.splice(a,1),s=!0;break}}return t.forEach(function(c){c=c.filter(function(h,d,C){return C.indexOf(h)===d});const a=c.pop();a!==void 0&&typeof a=="string"&&(n[a]=c)}),n}function ze(e){return e!==void 0?e+1:1}function tt(e){return e==="__proto__"?"___proto___":e}function Rt(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var Ie,Be,Me;const nt=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,ot=(Be=(Ie=process==null?void 0:process.versions)===null||Ie===void 0?void 0:Ie.node)!==null&&Be!==void 0?Be:(Me=process==null?void 0:process.version)===null||Me===void 0?void 0:Me.slice(1);if(ot&&Number(ot.match(/^([^.]+)/)[1])<nt)throw Error(`yargs parser supports a minimum Node.js version of ${nt}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const Lt=process?process.env:{},st=new jt({cwd:process.cwd,env:()=>Lt,format:Q.format,normalize:j.normalize,resolve:j.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(I.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),te=function(t,n){return st.parse(t.slice(),n).argv};te.detailed=function(e,t){return st.parse(e.slice(),t)},te.camelCase=ee,te.decamelize=Je,te.looksLikeNumber=et;const Tt={right:Mt,center:Ut},Wt=0,we=1,Pt=2,xe=3;class zt{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(s=>typeof s=="string"?this.colFromString(s):s);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(c=>c.split("	"));let s=0;return n.forEach(c=>{c.length>1&&L.stringWidth(c[0])>s&&(s=Math.min(Math.floor(this.width*.5),L.stringWidth(c[0])))}),n.forEach(c=>{this.div(...c.map((a,h)=>({text:a.trim(),padding:this.measurePadding(a),width:h===0&&c.length>1?s:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=L.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((s,c)=>{let a="";s.forEach((h,d)=>{const{width:C}=t[d],F=this.negatePadding(t[d]);let w=h;if(F>L.stringWidth(h)&&(w+=" ".repeat(F-L.stringWidth(h))),t[d].align&&t[d].align!=="left"&&this.wrap){const Y=Tt[t[d].align];w=Y(w,F),L.stringWidth(w)<F&&(w+=" ".repeat((C||0)-L.stringWidth(w)-1))}const D=t[d].padding||[0,0,0,0];D[xe]&&(a+=" ".repeat(D[xe])),a+=it(t[d],w,"| "),a+=w,a+=it(t[d],w," |"),D[we]&&(a+=" ".repeat(D[we])),c===0&&n.length>0&&(a=this.renderInline(a,n[n.length-1]))}),n.push({text:a.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const s=t.match(/^ */),c=s?s[0].length:0,a=n.text,h=L.stringWidth(a.trimRight());return n.span?this.wrap?c<h?t:(n.hidden=!0,a.trimRight()+" ".repeat(c-h)+t.trimLeft()):(n.hidden=!0,a+t):t}rasterize(t){const n=[],s=this.columnWidths(t);let c;return t.forEach((a,h)=>{a.width=s[h],this.wrap?c=L.wrap(a.text,this.negatePadding(a),{hard:!0}).split(`
`):c=a.text.split(`
`),a.border&&(c.unshift("."+"-".repeat(this.negatePadding(a)+2)+"."),c.push("'"+"-".repeat(this.negatePadding(a)+2)+"'")),a.padding&&(c.unshift(...new Array(a.padding[Wt]||0).fill("")),c.push(...new Array(a.padding[Pt]||0).fill(""))),c.forEach((d,C)=>{n[C]||n.push([]);const F=n[C];for(let w=0;w<h;w++)F[w]===void 0&&F.push("");F.push(d)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[xe]||0)+(t.padding[we]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(h=>h.width||L.stringWidth(h.text));let n=t.length,s=this.width;const c=t.map(h=>{if(h.width)return n--,s-=h.width,h.width}),a=n?Math.floor(s/n):0;return c.map((h,d)=>h===void 0?Math.max(a,It(t[d])):h)}}function it(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function It(e){const t=e.padding||[],n=1+(t[xe]||0)+(t[we]||0);return e.border?n+4:n}function Bt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Mt(e,t){e=e.trim();const n=L.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function Ut(e,t){e=e.trim();const n=L.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let L;function Vt(e,t){return L=t,new zt({width:e?.width||Bt(),wrap:e?.wrap})}const rt=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function ct(e){return e.replace(rt,"")}function qt(e,t){const[n,s]=e.match(rt)||["",""];e=ct(e);let c="";for(let a=0;a<e.length;a++)a!==0&&a%t===0&&(c+=`
`),c+=e.charAt(a);return n&&s&&(c=`${n}${c}${s}`),c}function Dt(e){return Vt(e,{stringWidth:t=>[...t].length,stripAnsi:ct,wrap:qt})}function Gt(e,t){let n=j.resolve(".",e),s;for(I.statSync(n).isDirectory()||(n=j.dirname(n));;){if(s=t(n,I.readdirSync(n)),s)return j.resolve(n,s);if(n=j.dirname(s=n),s===n)break}}const Zt={fs:{readFileSync:I.readFileSync,writeFile:I.writeFile},format:Q.format,resolve:j.resolve,exists:e=>{try{return I.statSync(e).isFile()}catch{return!1}}};let P;class Kt{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let s=function(){};return typeof t[t.length-1]=="function"&&(s=t.pop()),s=s||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s(),P.format.apply(P.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),s=t.shift(),c=t.shift();let a=function(){};typeof t[t.length-1]=="function"&&(a=t.pop()),this.cache[this.locale]||this._readLocaleFile();let h=c===1?n:s;this.cache[this.locale][n]&&(h=this.cache[this.locale][n][c===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:s},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:a})):a();const d=[h];return~h.indexOf("%d")&&d.push(c),P.format.apply(P.format,d.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let s="";return t.forEach(function(c,a){const h=n[a+1];s+=c,typeof h<"u"&&(s+="%s")}),this.__.apply(this,[s].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],s=n.directory,c=n.locale,a=n.cb,h=this._resolveLocaleFile(s,c),d=JSON.stringify(this.cache[c],null,2);P.fs.writeFile(h,d,"utf-8",function(C){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),a(C)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{P.fs.readFileSync&&(t=JSON.parse(P.fs.readFileSync(n,"utf-8")))}catch(s){if(s instanceof SyntaxError&&(s.message="syntax error in "+n),s.code==="ENOENT")t={};else throw s}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let s=P.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(s)&&~n.lastIndexOf("_")){const c=P.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(c)&&(s=c)}return s}_fileExistsSync(t){return P.exists(t)}}function Qt(e,t){P=t;const n=new Kt(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const Yt=e=>Qt(e,Zt),Xt="require is not supported by ESM",lt="loading a directory of commands is not supported yet for ESM";let ne;try{ne=vt.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:He&&He.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{ne=process.cwd()}const Ht=ne.substring(0,ne.lastIndexOf("node_modules"));Xe.notStrictEqual,Xe.strictEqual,Q.inspect,Ht||process.cwd(),j.basename,j.dirname,j.extname,j.relative,j.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,I.readFileSync,Yt({directory:j.resolve(ne,"../../../locales"),updateFiles:!1});const Ue="\x1B[44m",v="\x1B[43m",O="\x1B[41m",kt="\x1B[42m",E="\x1B[0m",_="\x1B[33m",S="\x1B[36m",$="\x1B[0m",Ve=100,oe=[],Jt=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>Ve&&oe.push({fileName:t,scriptLength:n.length})},en=()=>(oe.length>0&&(console.log(`
${S}rrd${$} ${O}Long <script> blocks${E} in ${oe.length} files.`),console.log(`👉 ${_}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${Ve} lines.${$}`),oe.forEach(e=>{console.log(`- ${e.fileName} ${e.scriptLength>Ve*2?O:v}(${e.scriptLength} lines)${E}`)})),oe.length),se=[],tn=(e,t)=>{!e||!e.setup||se.push(t)},nn=()=>(se.length>0&&(console.log(`
${S}rrd${$} ${v}Plain <script> blocks${E} in ${se.length} files.`),console.log(`👉 ${_} Consider using <script setup> to leverage the new SFC <script> syntax.${$}`),se.forEach(e=>{console.log(`- ${e}`)})),se.length),ie=[],on=(e,t)=>{if(!e)return;const n=/\belse\b/gi,s=e.content.match(n);s?.length&&ie.push({fileName:t,elseCount:s.length})},sn=()=>(ie.length>0&&(console.log(`
${S}rrd${$} ${v}else conditions${E} are used in ${ie.length} files.`),console.log(`👉 ${_}Try to rewrite the conditions in a way that the else clause is not necessary.${$}`),ie.forEach(e=>{console.log(`- ${e.fileName} ${v}(${e.elseCount})${E}`)})),ie.length),rn=5,cn=10,re=[],ln=(e,t)=>{if(!e)return;const n=/\bif\b/gi,s=/\belse\b/gi,c=/\bfor\b/gi,a=/\bwhile\b/gi,h=/\bcase\b/gi,d=e.content.match(n),C=e.content.match(s),F=e.content.match(c),w=e.content.match(a),D=e.content.match(h),Y=(d?.length||0)+(C?.length||0)+(F?.length||0)+(w?.length||0)+(D?.length||0);Y>rn&&re.push({fileName:t,cyclomaticComplexity:Y})},an=()=>(re.length>0&&(console.log(`
${S}rrd${$} ${Ue}cyclomaticComplexity${E} is above moderate in ${re.length} files.`),console.log(`👉 ${_}Try to reduce complexity.${$}`),re.forEach(e=>{console.log(`- ${e.fileName} ${e.cyclomaticComplexity>cn?O:v}(${e.cyclomaticComplexity})${E}`)})),re.length),ce=[],un=e=>{if(e.includes("pages"))return;const t=j.basename(e);if(t==="App.vue")return;const n=/[A-Z]/;t.slice(1).match(n)?.length||ce.push({filePath:e})},fn=()=>(ce.length>0&&(console.log(`
${S}vue-essential${$} ${O}single name component${E} is used in ${ce.length} files.`),console.log(`👉 ${_}Rename the component to use multi-word name.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),ce.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ce.length),le=[],hn=(e,t)=>{e.forEach(n=>{n.scoped||le.push({filePath:t})})},pn=()=>(le.length>0&&(console.log(`
${S}vue-essential${$} ${O}Global style ${E} is used in ${le.length} files.`),console.log(`👉 ${_}Use <style scoped>.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`),le.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),le.length),ae=[],dn=(e,t)=>{if(!e)return;const n=/defineProps\(\[/gi;e.content.match(n)?.length&&ae.push({filePath:t})},gn=()=>(ae.length>0&&(console.log(`
${S}vue-essential${$} ${O}simple prop${E} is used in ${ae.length} files.`),console.log(`👉 ${_}Add at least type definition.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`),ae.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ae.length),ue=[],mn=(e,t)=>{if(!e)return;const n=/<[^>]+ v-if[^>]+ v-for[^>]+>/gi,s=/<[^>]+ v-for[^>]+ v-if[^>]+>/gi,c=e.content.match(n),a=e.content.match(s);(c?.length||a?.length)&&ue.push({filePath:t})},$n=()=>(ue.length>0&&(console.log(`
${S}vue-essential${$} ${O}v-if used with v-for${E} in ${ue.length} files.`),console.log(`👉 ${_}Move out the v-if to a computed property.${$} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`),ue.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ue.length),fe=[],bn=(e,t)=>{if(!e)return;const n=/<[^>]+ v-for[^>]+>/gi,s=e.content.match(n);s?.length&&(s.some(a=>a.includes(":key"))||fe.push({filePath:t}))},yn=()=>(fe.length>0&&(console.log(`
${S}vue-essential${$} ${O}v-for has no key${E} in ${fe.length} files.`),console.log(`👉 ${_}Add a \`:key\` property to all v-for.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`),fe.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),fe.length),he=[],En=e=>{if(e.includes("pages/")||e.includes("layouts/"))return;const t=j.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,s=t.match(n),c=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,a=t.match(c);!s?.length&&!a?.length&&he.push({fileName:e})},Cn=()=>(he.length>0&&(console.log(`
${S}vue-strong${$} ${O}component name is not PascalCase and not kebab-case${E} in ${he.length} files.`),console.log(`👉 ${_}Rename the component to use PascalCase or kebab-case file name.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`),he.forEach(e=>{console.log(`- ${O}${e.fileName}${E}`)})),he.length),pe=[],An=/^[a-z]+([A-Z][a-z]*)+$/,vn=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let s;for(;(s=n.exec(e.content))!==null;)s[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(a=>a.split(":")[0]).filter(a=>a.length).filter(a=>!An.test(a)).length&&pe.push({filePath:t})},_n=()=>(pe.length>0&&(console.log(`
${S}vue-strong${$} ${O}prop names are not camelCased${E} in ${pe.length} files.`),console.log(`👉 ${_}Rename the props to camelCase.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`),pe.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),pe.length),Z=(e,t)=>{if(!t.includes(`
`))return e.split(`
`).findIndex(h=>h.includes(t))+1;const n=e.indexOf(t),s=e.slice(0,n).split(`
`).length,c=t.split(`
`).length;return s+c-1};function de(e,t){return new Set(e.map(s=>s[t])).size}const ge=[],Sn=40,wn=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(c=>c[1].trim()).forEach(c=>{if(c.length>Sn){const a=Z(e.content,c),h=c.split(`
`).at(0)?.trim()||"";ge.push({filename:t,message:`${t}#${a} ${v}${h}${E}`})}})},xn=()=>{if(ge.length>0){const e=de(ge,"filename");console.log(`
${S}vue-strong${$} ${O}Lengthy template expression${E} found in ${e} files.`),console.log(`👉 ${_}Refactor the expression into a computed property.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-expressions-in-templates`),ge.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return ge.length},On=/^(\(.*\)|\\?.)$/;function K(e){const t=e.toString();return On.test(t)?t:`(?:${t})`}const Nn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,jn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function b(e){const t=n=>b(`(?<${n}>${`${e}`.replace(Nn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>b(`${e}${V(...n)}`),{referenceTo:n=>b(`${e}\\k<${n}>`)}),or:(...n)=>b(`(?:${e}|${V(...n)})`),after:(...n)=>b(`(?<=${V(...n)})${e}`),before:(...n)=>b(`${e}(?=${V(...n)})`),notAfter:(...n)=>b(`(?<!${V(...n)})${e}`),notBefore:(...n)=>b(`${e}(?!${V(...n)})`),times:Object.assign(n=>b(`${K(e)}{${n}}`),{any:()=>b(`${K(e)}*`),atLeast:n=>b(`${K(e)}{${n},}`),atMost:n=>b(`${K(e)}{0,${n}}`),between:(n,s)=>b(`${K(e)}{${n},${s}}`)}),optionally:()=>b(`${K(e)}?`),as:t,groupedAs:t,grouped:()=>b(`${e}`.replace(jn,"($1$3)$2")),at:{lineStart:()=>b(`^${e}`),lineEnd:()=>b(`${e}$`)}}}const Fn=/[.*+?^${}()|[\]\\/]/g;function at(e){return b(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function qe(e){return b(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}const Rn=b(".");b("\\b\\w+\\b");const Oe=b("\\w");b("\\b"),b("\\d"),b("\\s");const Ln=Object.assign(b("[a-zA-Z]"),{lowercase:b("[a-z]"),uppercase:b("[A-Z]")}),Tn=b("\\t"),Wn=b("\\n");b("\\r"),b("\\W+"),b("\\W"),b("\\B"),b("\\D"),b("\\S"),Object.assign(b("[^a-zA-Z]"),{lowercase:b("[^a-z]"),uppercase:b("[^A-Z]")}),b("[^\\t]"),b("[^\\n]"),b("[^\\r]");function U(...e){return b(`${K(V(...e))}?`)}function V(...e){return b(e.map(t=>typeof t=="string"?t.replace(Fn,"\\$&"):t).join(""))}function q(...e){return b(`${K(V(...e))}+`)}const Ne=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(V(...e).toString(),[...t||""].join(""))},me=[],Pn=(e,t)=>{if(!e)return;const n=e.template,s=Ne("<",q(Oe),U(q(at(` 	
\r`))),q(qe("/>")),U(q(at(` 	
\r`))),U("/"),">",["g"]),c=n.content.match(s);if(c===null)return;const a=Ne(":",q(Oe),U(" "),"=",U(" "),qe(`'"`),["g"]);c.forEach(h=>{if(!h.includes(":"))return;const d=h.match(a);if(d?.length){const C=Z(e.source,h);me.push({message:`${t}#${C} ${v}${d}${E}`})}})},zn=()=>(me.length>0&&(console.log(`
${S}vue-strong${$} ${O}Attribute value is not quoted${E} in ${me.length} files.`),console.log(`👉 ${_}Use quotes for attribute values.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#quoted-attribute-values`),me.forEach(e=>{console.log(`- ${e.message} 🚨`)})),me.length),$e=[],In=(e,t)=>{if(!e)return;const n=e.template,s=Ne("<",q(Ln.uppercase,Oe),U(Wn,Tn),U(q(qe(">"))),"></",q(Oe),">",["g"]),c=n.content.match(s);c!==null&&c.forEach(a=>{const h=Z(e.source,a),d=a.split(`
`).at(-1)?.trim()||"";$e.push({message:`${t}#${h} ${v}${d}${E}`})})},Bn=()=>($e.length>0&&(console.log(`
${S}vue-strong${$} - ${O}Component is not self closing${E} in ${$e.length} files.`),console.log(`👉 ${_}Components with no content should be self-closing.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#self-closing-components`),$e.forEach(e=>{console.log(`- ${e.message} 🚨`)})),$e.length),je=[],De=[],Mn=["v-slot","v-bind","v-on"],Un=(e,t)=>{if(!e)return;const n=e.template;Mn.forEach(s=>{if(n.content.includes(`${s}:`)){const c=Z(e.source,s);je.push({message:`${t}:${c} ${v}${s}${E}`}),De.some(a=>a.filePath===t)||De.push({filePath:t})}})},Vn=()=>(je.length>0&&(console.log(`
${S}vue-strong${$} ${O}Directive shorthands not used${E} in ${De.length} files.`),console.log(`👉 ${_}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#directive-shorthands`),je.forEach(e=>{console.log(`- ${e.message} 🚨`)})),je.length),be=[],qn=5,Dn=(e,t)=>{if(!e)return;const n=Ne("defineProps",U("<"),U("("),"{",q(Rn),"}",["g","s"]),s=e.content.match(n);if(s?.length){const c=s[0].split(",").length;c>qn&&be.push({fileName:t,propsCount:c})}},Gn=()=>(be.length>0&&(console.log(`
${S}rrd${$} ${v}too many props${E} are used in ${be.length} files.`),console.log(`👉 ${_}Try to refactor your code to use less properties.${$}`),be.forEach(e=>{console.log(`- ${e.fileName} ${v}(${e.propsCount})${E}`)})),be.length),ye=[],ut=20,Zn=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\([^)]*\)\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}|const\s+([a-zA-Z0-9_$]+)\s*=\s*\([^)]*\)\s*=>\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}/g;let s;for(;(s=n.exec(e.content))!==null;){const c=s[1]||s[5];(s[2]||s[6]).split(`
`).length>ut&&ye.push({filename:t,funcName:c})}},Kn=()=>{if(ye.length>0){const e=de(ye,"filename");console.log(`
${S}rrd${$} ${v}function size${E} exceeds recommended limit in ${e} files.`),console.log(`👉 ${_}Functions must be shorter than ${ut} lines${$}`),ye.forEach(t=>{console.log(`- ${t.filename} 🚨 ${v}(${t.funcName})${E}`)})}return ye.length},Ee=[],ft=3,ht=(e,t,n)=>{const s=t.split(",").map(c=>c.trim()).filter(c=>c.length>0);s.length>ft&&Ee.push({filename:n,funcName:e,paramsCount:s.length})},Qn=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\(([^)]*)\)\s*{|const\s+([a-zA-Z0-9_$]+)\s*=\s*\(([^)]*)\)\s*=>\s*{/g;let s;for(;(s=n.exec(e.content))!==null;)s[1]?ht(s[1],s[2],t):s[3]&&ht(s[3],s[4],t)},Yn=()=>(Ee.length>0&&(console.log(`
${S}rrd${$} ${v}parameter count${E} exceeds recommended limit in ${Ee.length} files.`),console.log(`👉 ${_}Max number of function parameters should be ${ft}${$}`),Ee.forEach(e=>{console.log(`- ${v}${e.funcName}${E} in file ${e.filename} 🚨 ${v}(${e.paramsCount})${E}`)})),Ee.length),pt=4,Ce=[],Xn=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;let s;for(;(s=n.exec(e.content))!==null;){const c=s[1];c.length<pt&&Ce.push({filename:t,variable:c})}},Hn=()=>{if(Ce.length>0){const e=de(Ce,"filename");console.log(`
${S}rrd${$} ${v}variable names${E} are too short in ${e} files.`),console.log(`👉 ${_}Variable names must have a minimum length of ${pt}${$}`),Ce.forEach(t=>{console.log(`- ${t.filename} 🚨 ${v}(${t.variable})${E}`)})}return Ce.length},Ge=[],Ae=[],kn=5,Jn=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,s=e.content.match(n);s?.length&&s.forEach(c=>{if(c.split(`
`).length>kn){const a=c.split(`
`)[0],h=Z(e.content,a);Ge.push({message:`${t}:${h} ${v}computed${E}`}),Ae.push({filePath:t}),Ae.some(d=>d.filePath===t)||Ae.push({filePath:t})}})},eo=()=>(Ae.length>0&&(console.log(`
${S}vue-strong${$} ${O}complicated computed property ${E} in ${Ae.length} files.`),console.log(`👉 ${_}Refactor the computed properties to smaller ones.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-computed-properties`),Ge.forEach(e=>{console.log(`- ${e.message} 🚨`)})),Ge.length),ve=[],to=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(c=>c[1].trim()).forEach(c=>{const a=Z(e.content.trim(),c),h=c.split(`
`).at(0)?.trim()||"";ve.push({filename:t,message:`${t}#${a} ${v}(${h})${E}`})})},no=()=>{if(ve.length>0){const e=de(ve,"filename");console.log(`
${S}vue-strong${$} ${O}component files${E} detected in ${e} files.`),console.log(`👉 ${_}Whenever a build system is available to concatenate files, each component should be in its own file.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#component-files`),ve.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return ve.length},H=[],oo=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,s=/v-model\s*=\s*"([^"]+)"/,c=/\$parent|getCurrentInstance/g,a=e.content.match(n),h=e.content.match(s);if(h){const C=h[1].split(".")[0],F=a?a[1]:"";if(F.includes(C)){const w=Z(e.content.trim(),F);H.push({filename:t,message:`${t}#${w} ${v}(${C})${E}`})}}const d=e.content.match(c);if(d){const C=Z(e.content.trim(),d[0]);H.push({filename:t,message:`${t}#${C} ${v}(${d[0]})${E}`})}},so=()=>{if(H.length>0){const e=de(H,"filename");console.log(`
${S}vue-caution${$} ${v}implicit parent-child communication${E} detected in ${e} files.`),console.log(`👉 ${_}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${$} See: https://vuejs.org/style-guide/rules-use-with-caution.html#implicit-parent-child-communication`),H.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return H.length},io=()=>{let e=0;return e+=fn(),e+=gn(),e+=yn(),e+=$n(),e+=pn(),e+=Cn(),e+=Bn(),e+=_n(),e+=xn(),e+=zn(),e+=Vn(),e+=eo(),e+=no(),e+=so(),e+=en(),e+=nn(),e+=an(),e+=sn(),e+=Gn(),e+=Kn(),e+=Yn(),e+=Hn(),e},ro=(e,t,n)=>{const s=e.scriptSetup||e.script;n.includes("vue-essential")||(un(t),dn(s,t),hn(e.styles,t),bn(e.template,t),mn(e.template,t)),n.includes("vue-strong")||(En(t),vn(s,t),to(s,t),Jn(s,t),In(e,t),wn(e.template,t),Pn(e,t),Un(e,t)),n.includes("vue-caution")||oo(s,t),n.includes("rrd")||(tn(e.script,t),Jt(s,t),ln(s,t),on(s,t),Dn(s,t),Zn(s,t),Qn(s,t),Xn(s,t))};let dt=0;const co=["src","components","pages","layouts","server","composables","store","utils","plugins","middleware"],gt=(e,t)=>{const n=I.readdirSync(e);dt+=n.length;for(const s of n){const c=j.join(e,s);I.statSync(c).isDirectory()?co.some(a=>c.includes(a))&&gt(c,t):s.endsWith(".vue")&&t(c)}},lo=(e,t=[])=>{console.log(`

${Ue}Analyzing Vue files in ${e}${E}`),gt(e,n=>{if(n.includes("App.vue")||n.includes("app.vue"))return;const s=I.readFileSync(n,"utf-8"),{descriptor:c}=_t.parse(s);ro(c,n,t)}),console.log(`Found ${Ue}${dt}${E} Vue files`),io()||console.log(`${kt}No code smells detected!${E}`)},mt=Object.keys({"vue-caution":["implicitParentChildCommunication"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-reccomended":[],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression"],rrd:["cyclomaticComplexity","elseCondition","functionSize","parameterCount","plainScript","scriptLenght","shortVariableName","tooManyProps"]});T(xt(process.argv)).command("analyze [path]","Analyze Vue files for code smells",e=>e.positional("path",{describe:"path to the Vue files",type:"string",default:"./"}).option("ignore",{describe:"Comma-separated list of rules to ignore",type:"string",coerce:t=>{const n=t.split(","),s=n.filter(c=>!mt.includes(c));return s.length>0&&(console.error(`
${O}Invalid ignore values: ${s.join(", ")}${E}. 
${_}Allowed values are: ${[...mt].join(", ")}${$}

`),process.exit(1)),n}}),e=>{lo(e.path,e.ignore)}).help().argv});
