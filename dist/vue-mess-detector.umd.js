(function(I,ne){typeof exports=="object"&&typeof module<"u"?ne(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("node:fs/promises"),require("node:path"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","node:fs/promises","node:path","@vue/compiler-sfc"],ne):(I=typeof globalThis<"u"?globalThis:I||self,ne(I.yargs,I.util,I.path,I.fs,I.assert,I.url,I["node:fs/promises"],I["node:path"],I.compilerSfc))})(this,function(I,ne,B,se,gt,sn,me,xe,on){"use strict";var $t=typeof document<"u"?document.currentScript:null;class ae extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,ae)}}function bt(){return rn()?0:1}function rn(){return cn()&&!process.defaultApp}function cn(){return!!process.versions.electron}function an(e){return e.slice(bt()+1)}function ln(){return process.argv[bt()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function le(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",o=!1;const s=e.match(/^-+/);for(let c=s?s[0].length:0;c<e.length;c++){let u=e.charAt(c);o&&(o=!1,u=u.toUpperCase()),c!==0&&(u==="-"||u==="_")?o=!0:u!=="-"&&u!=="_"&&(n+=u)}return n}}function yt(e,t){const n=e.toLowerCase();t=t||"-";let o="";for(let s=0;s<e.length;s++){const c=n.charAt(s),u=e.charAt(s);c!==u&&s>0?o+=`${t}${n.charAt(s)}`:o+=u}return o}function Et(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function un(e){if(Array.isArray(e))return e.map(u=>typeof u!="string"?u+"":u);e=e.trim();let t=0,n=null,o=null,s=null;const c=[];for(let u=0;u<e.length;u++){if(n=o,o=e.charAt(u),o===" "&&!s){n!==" "&&t++;continue}o===s?s=null:(o==="'"||o==='"')&&!s&&(s=o),c[t]||(c[t]=""),c[t]+=o}return c}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var G;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(G||(G={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let J;class fn{constructor(t){J=t}parse(t,n){const o=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),s=un(t),c=typeof t=="string",u=hn(Object.assign(Object.create(null),o.alias)),f=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},o.configuration),g=Object.assign(Object.create(null),o.default),w=o.configObjects||[],A=o.envPrefix,L=f["populate--"],F=L?"--":"_",ie=Object.create(null),Zt=Object.create(null),re=o.__||J.format,h={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},X=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,ht=new RegExp("^--"+f["negation-prefix"]+"(.+)");[].concat(o.array||[]).filter(Boolean).forEach(function(r){const a=typeof r=="object"?r.key:r,p=Object.keys(r).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();p&&(h[p][a]=!0),h.arrays[a]=!0,h.keys.push(a)}),[].concat(o.boolean||[]).filter(Boolean).forEach(function(r){h.bools[r]=!0,h.keys.push(r)}),[].concat(o.string||[]).filter(Boolean).forEach(function(r){h.strings[r]=!0,h.keys.push(r)}),[].concat(o.number||[]).filter(Boolean).forEach(function(r){h.numbers[r]=!0,h.keys.push(r)}),[].concat(o.count||[]).filter(Boolean).forEach(function(r){h.counts[r]=!0,h.keys.push(r)}),[].concat(o.normalize||[]).filter(Boolean).forEach(function(r){h.normalize[r]=!0,h.keys.push(r)}),typeof o.narg=="object"&&Object.entries(o.narg).forEach(([r,a])=>{typeof a=="number"&&(h.nargs[r]=a,h.keys.push(r))}),typeof o.coerce=="object"&&Object.entries(o.coerce).forEach(([r,a])=>{typeof a=="function"&&(h.coercions[r]=a,h.keys.push(r))}),typeof o.config<"u"&&(Array.isArray(o.config)||typeof o.config=="string"?[].concat(o.config).filter(Boolean).forEach(function(r){h.configs[r]=!0}):typeof o.config=="object"&&Object.entries(o.config).forEach(([r,a])=>{(typeof a=="boolean"||typeof a=="function")&&(h.configs[r]=a)})),Co(o.key,u,o.default,h.arrays),Object.keys(g).forEach(function(r){(h.aliases[r]||[]).forEach(function(a){g[a]=g[r]})});let Y=null;Fo();let ve=[];const T=Object.assign(Object.create(null),{_:[]}),Xt={};for(let r=0;r<s.length;r++){const a=s[r],p=a.replace(/^-{3,}/,"---");let l,i,$,m,y,P;if(a!=="--"&&/^-/.test(a)&&Se(a))pt(a);else if(p.match(/^---+(=|$)/)){pt(a);continue}else if(a.match(/^--.+=/)||!f["short-option-groups"]&&a.match(/^-.+=/))m=a.match(/^--?([^=]+)=([\s\S]*)$/),m!==null&&Array.isArray(m)&&m.length>=3&&(v(m[1],h.arrays)?r=Ae(r,m[1],s,m[2]):v(m[1],h.nargs)!==!1?r=we(r,m[1],s,m[2]):N(m[1],m[2],!0));else if(a.match(ht)&&f["boolean-negation"])m=a.match(ht),m!==null&&Array.isArray(m)&&m.length>=2&&(i=m[1],N(i,v(i,h.arrays)?[!1]:!1));else if(a.match(/^--.+/)||!f["short-option-groups"]&&a.match(/^-[^-]+/))m=a.match(/^--?(.+)/),m!==null&&Array.isArray(m)&&m.length>=2&&(i=m[1],v(i,h.arrays)?r=Ae(r,i,s):v(i,h.nargs)!==!1?r=we(r,i,s):(y=s[r+1],y!==void 0&&(!y.match(/^-/)||y.match(X))&&!v(i,h.bools)&&!v(i,h.counts)||/^(true|false)$/.test(y)?(N(i,y),r++):N(i,ce(i))));else if(a.match(/^-.\..+=/))m=a.match(/^-([^=]+)=([\s\S]*)$/),m!==null&&Array.isArray(m)&&m.length>=3&&N(m[1],m[2]);else if(a.match(/^-.\..+/)&&!a.match(X))y=s[r+1],m=a.match(/^-(.\..+)/),m!==null&&Array.isArray(m)&&m.length>=2&&(i=m[1],y!==void 0&&!y.match(/^-/)&&!v(i,h.bools)&&!v(i,h.counts)?(N(i,y),r++):N(i,ce(i)));else if(a.match(/^-[^-]+/)&&!a.match(X)){$=a.slice(1,-1).split(""),l=!1;for(let W=0;W<$.length;W++){if(y=a.slice(W+2),$[W+1]&&$[W+1]==="="){P=a.slice(W+3),i=$[W],v(i,h.arrays)?r=Ae(r,i,s,P):v(i,h.nargs)!==!1?r=we(r,i,s,P):N(i,P),l=!0;break}if(y==="-"){N($[W],y);continue}if(/[A-Za-z]/.test($[W])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(y)&&v(y,h.bools)===!1){N($[W],y),l=!0;break}if($[W+1]&&$[W+1].match(/\W/)){N($[W],y),l=!0;break}else N($[W],ce($[W]))}i=a.slice(-1)[0],!l&&i!=="-"&&(v(i,h.arrays)?r=Ae(r,i,s):v(i,h.nargs)!==!1?r=we(r,i,s):(y=s[r+1],y!==void 0&&(!/^(-|--)[^-]/.test(y)||y.match(X))&&!v(i,h.bools)&&!v(i,h.counts)||/^(true|false)$/.test(y)?(N(i,y),r++):N(i,ce(i))))}else if(a.match(/^-[0-9]$/)&&a.match(X)&&v(a.slice(1),h.bools))i=a.slice(1),N(i,ce(i));else if(a==="--"){ve=s.slice(r+1);break}else if(f["halt-at-non-option"]){ve=s.slice(r);break}else pt(a)}en(T,!0),en(T,!1),Ao(T),Oo(),tn(T,h.aliases,g,!0),So(T),f["set-placeholder-key"]&&xo(T),Object.keys(h.counts).forEach(function(r){pe(T,r.split("."))||N(r,0)}),L&&ve.length&&(T[F]=[]),ve.forEach(function(r){T[F].push(r)}),f["camel-case-expansion"]&&f["strip-dashed"]&&Object.keys(T).filter(r=>r!=="--"&&r.includes("-")).forEach(r=>{delete T[r]}),f["strip-aliased"]&&[].concat(...Object.keys(u).map(r=>u[r])).forEach(r=>{f["camel-case-expansion"]&&r.includes("-")&&delete T[r.split(".").map(a=>le(a)).join(".")],delete T[r]});function pt(r){const a=Oe("_",r);(typeof a=="string"||typeof a=="number")&&T._.push(a)}function we(r,a,p,l){let i,$=v(a,h.nargs);if($=typeof $!="number"||isNaN($)?1:$,$===0)return ee(l)||(Y=Error(re("Argument unexpected for: %s",a))),N(a,ce(a)),r;let m=ee(l)?0:1;if(f["nargs-eats-options"])p.length-(r+1)+m<$&&(Y=Error(re("Not enough arguments following: %s",a))),m=$;else{for(i=r+1;i<p.length&&(!p[i].match(/^-[^0-9]/)||p[i].match(X)||Se(p[i]));i++)m++;m<$&&(Y=Error(re("Not enough arguments following: %s",a)))}let y=Math.min(m,$);for(!ee(l)&&y>0&&(N(a,l),y--),i=r+1;i<y+r+1;i++)N(a,p[i]);return r+y}function Ae(r,a,p,l){let i=[],$=l||p[r+1];const m=v(a,h.nargs);if(v(a,h.bools)&&!/^(true|false)$/.test($))i.push(!0);else if(ee($)||ee(l)&&/^-/.test($)&&!X.test($)&&!Se($)){if(g[a]!==void 0){const y=g[a];i=Array.isArray(y)?y:[y]}}else{ee(l)||i.push(dt(a,l,!0));for(let y=r+1;y<p.length&&!(!f["greedy-arrays"]&&i.length>0||m&&typeof m=="number"&&i.length>=m||($=p[y],/^-/.test($)&&!X.test($)&&!Se($)));y++)r=y,i.push(dt(a,$,c))}return typeof m=="number"&&(m&&i.length<m||isNaN(m)&&i.length===0)&&(Y=Error(re("Not enough arguments following: %s",a))),N(a,i),r}function N(r,a,p=c){if(/-/.test(r)&&f["camel-case-expansion"]){const $=r.split(".").map(function(m){return le(m)}).join(".");Jt(r,$)}const l=dt(r,a,p),i=r.split(".");de(T,i,l),h.aliases[r]&&h.aliases[r].forEach(function($){const m=$.split(".");de(T,m,l)}),i.length>1&&f["dot-notation"]&&(h.aliases[i[0]]||[]).forEach(function($){let m=$.split(".");const y=[].concat(i);y.shift(),m=m.concat(y),(h.aliases[r]||[]).includes(m.join("."))||de(T,m,l)}),v(r,h.normalize)&&!v(r,h.arrays)&&[r].concat(h.aliases[r]||[]).forEach(function(m){Object.defineProperty(Xt,m,{enumerable:!0,get(){return a},set(y){a=typeof y=="string"?J.normalize(y):y}})})}function Jt(r,a){h.aliases[r]&&h.aliases[r].length||(h.aliases[r]=[a],ie[a]=!0),h.aliases[a]&&h.aliases[a].length||Jt(a,r)}function dt(r,a,p){p&&(a=pn(a)),(v(r,h.bools)||v(r,h.counts))&&typeof a=="string"&&(a=a==="true");let l=Array.isArray(a)?a.map(function(i){return Oe(r,i)}):Oe(r,a);return v(r,h.counts)&&(ee(l)||typeof l=="boolean")&&(l=Ce()),v(r,h.normalize)&&v(r,h.arrays)&&(Array.isArray(a)?l=a.map(i=>J.normalize(i)):l=J.normalize(a)),l}function Oe(r,a){return!f["parse-positional-numbers"]&&r==="_"||!v(r,h.strings)&&!v(r,h.bools)&&!Array.isArray(a)&&(Et(a)&&f["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${a}`)))||!ee(a)&&v(r,h.numbers))&&(a=Number(a)),a}function Ao(r){const a=Object.create(null);tn(a,h.aliases,g),Object.keys(h.configs).forEach(function(p){const l=r[p]||a[p];if(l)try{let i=null;const $=J.resolve(J.cwd(),l),m=h.configs[p];if(typeof m=="function"){try{i=m($)}catch(y){i=y}if(i instanceof Error){Y=i;return}}else i=J.require($);mt(i)}catch(i){i.name==="PermissionDenied"?Y=i:r[p]&&(Y=Error(re("Invalid JSON config file: %s",l)))}})}function mt(r,a){Object.keys(r).forEach(function(p){const l=r[p],i=a?a+"."+p:p;typeof l=="object"&&l!==null&&!Array.isArray(l)&&f["dot-notation"]?mt(l,i):(!pe(T,i.split("."))||v(i,h.arrays)&&f["combine-arrays"])&&N(i,l)})}function Oo(){typeof w<"u"&&w.forEach(function(r){mt(r)})}function en(r,a){if(typeof A>"u")return;const p=typeof A=="string"?A:"",l=J.env();Object.keys(l).forEach(function(i){if(p===""||i.lastIndexOf(p,0)===0){const $=i.split("__").map(function(m,y){return y===0&&(m=m.substring(p.length)),le(m)});(a&&h.configs[$.join(".")]||!a)&&!pe(r,$)&&N($.join("."),l[i])}})}function So(r){let a;const p=new Set;Object.keys(r).forEach(function(l){if(!p.has(l)&&(a=v(l,h.coercions),typeof a=="function"))try{const i=Oe(l,a(r[l]));[].concat(h.aliases[l]||[],l).forEach($=>{p.add($),r[$]=i})}catch(i){Y=i}})}function xo(r){return h.keys.forEach(a=>{~a.indexOf(".")||typeof r[a]>"u"&&(r[a]=void 0)}),r}function tn(r,a,p,l=!1){Object.keys(p).forEach(function(i){pe(r,i.split("."))||(de(r,i.split("."),p[i]),l&&(Zt[i]=!0),(a[i]||[]).forEach(function($){pe(r,$.split("."))||de(r,$.split("."),p[i])}))})}function pe(r,a){let p=r;f["dot-notation"]||(a=[a.join(".")]),a.slice(0,-1).forEach(function(i){p=p[i]||{}});const l=a[a.length-1];return typeof p!="object"?!1:l in p}function de(r,a,p){let l=r;f["dot-notation"]||(a=[a.join(".")]),a.slice(0,-1).forEach(function(P){P=vt(P),typeof l=="object"&&l[P]===void 0&&(l[P]={}),typeof l[P]!="object"||Array.isArray(l[P])?(Array.isArray(l[P])?l[P].push({}):l[P]=[l[P],{}],l=l[P][l[P].length-1]):l=l[P]});const i=vt(a[a.length-1]),$=v(a.join("."),h.arrays),m=Array.isArray(p);let y=f["duplicate-arguments-array"];!y&&v(i,h.nargs)&&(y=!0,(!ee(l[i])&&h.nargs[i]===1||Array.isArray(l[i])&&l[i].length===h.nargs[i])&&(l[i]=void 0)),p===Ce()?l[i]=Ce(l[i]):Array.isArray(l[i])?y&&$&&m?l[i]=f["flatten-duplicate-arrays"]?l[i].concat(p):(Array.isArray(l[i][0])?l[i]:[l[i]]).concat([p]):!y&&!!$==!!m?l[i]=p:l[i]=l[i].concat([p]):l[i]===void 0&&$?l[i]=m?p:[p]:y&&!(l[i]===void 0||v(i,h.counts)||v(i,h.bools))?l[i]=[l[i],p]:l[i]=p}function Co(...r){r.forEach(function(a){Object.keys(a||{}).forEach(function(p){h.aliases[p]||(h.aliases[p]=[].concat(u[p]||[]),h.aliases[p].concat(p).forEach(function(l){if(/-/.test(l)&&f["camel-case-expansion"]){const i=le(l);i!==p&&h.aliases[p].indexOf(i)===-1&&(h.aliases[p].push(i),ie[i]=!0)}}),h.aliases[p].concat(p).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&f["camel-case-expansion"]){const i=yt(l,"-");i!==p&&h.aliases[p].indexOf(i)===-1&&(h.aliases[p].push(i),ie[i]=!0)}}),h.aliases[p].forEach(function(l){h.aliases[l]=[p].concat(h.aliases[p].filter(function(i){return l!==i}))}))})})}function v(r,a){const p=[].concat(h.aliases[r]||[],r),l=Object.keys(a),i=p.find($=>l.includes($));return i?a[i]:!1}function nn(r){const a=Object.keys(h);return[].concat(a.map(l=>h[l])).some(function(l){return Array.isArray(l)?l.includes(r):l[r]})}function _o(r,...a){return[].concat(...a).some(function(l){const i=r.match(l);return i&&nn(i[1])})}function No(r){if(r.match(X)||!r.match(/^-[^-]+/))return!1;let a=!0,p;const l=r.slice(1).split("");for(let i=0;i<l.length;i++){if(p=r.slice(i+2),!nn(l[i])){a=!1;break}if(l[i+1]&&l[i+1]==="="||p==="-"||/[A-Za-z]/.test(l[i])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(p)||l[i+1]&&l[i+1].match(/\W/))break}return a}function Se(r){return f["unknown-options-as-args"]&&Ro(r)}function Ro(r){return r=r.replace(/^-{3,}/,"--"),r.match(X)||No(r)?!1:!_o(r,/^-+([^=]+?)=[\s\S]*$/,ht,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function ce(r){return!v(r,h.bools)&&!v(r,h.counts)&&`${r}`in g?g[r]:Lo(jo(r))}function Lo(r){return{[G.BOOLEAN]:!0,[G.STRING]:"",[G.NUMBER]:void 0,[G.ARRAY]:[]}[r]}function jo(r){let a=G.BOOLEAN;return v(r,h.strings)?a=G.STRING:v(r,h.numbers)?a=G.NUMBER:v(r,h.bools)?a=G.BOOLEAN:v(r,h.arrays)&&(a=G.ARRAY),a}function ee(r){return r===void 0}function Fo(){Object.keys(h.counts).find(r=>v(r,h.arrays)?(Y=Error(re("Invalid configuration: %s, opts.count excludes opts.array.",r)),!0):v(r,h.nargs)?(Y=Error(re("Invalid configuration: %s, opts.count excludes opts.narg.",r)),!0):!1)}return{aliases:Object.assign({},h.aliases),argv:Object.assign(Xt,T),configuration:f,defaulted:Object.assign({},Zt),error:Y,newAliases:Object.assign({},ie)}}}function hn(e){const t=[],n=Object.create(null);let o=!0;for(Object.keys(e).forEach(function(s){t.push([].concat(e[s],s))});o;){o=!1;for(let s=0;s<t.length;s++)for(let c=s+1;c<t.length;c++)if(t[s].filter(function(f){return t[c].indexOf(f)!==-1}).length){t[s]=t[s].concat(t[c]),t.splice(c,1),o=!0;break}}return t.forEach(function(s){s=s.filter(function(u,f,g){return g.indexOf(u)===f});const c=s.pop();c!==void 0&&typeof c=="string"&&(n[c]=s)}),n}function Ce(e){return e!==void 0?e+1:1}function vt(e){return e==="__proto__"?"___proto___":e}function pn(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var _e,Ne,Re;const wt=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,At=(Ne=(_e=process==null?void 0:process.versions)===null||_e===void 0?void 0:_e.node)!==null&&Ne!==void 0?Ne:(Re=process==null?void 0:process.version)===null||Re===void 0?void 0:Re.slice(1);if(At&&Number(At.match(/^([^.]+)/)[1])<wt)throw Error(`yargs parser supports a minimum Node.js version of ${wt}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const dn=process?process.env:{},Ot=new fn({cwd:process.cwd,env:()=>dn,format:ne.format,normalize:B.normalize,resolve:B.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(se.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ue=function(t,n){return Ot.parse(t.slice(),n).argv};ue.detailed=function(e,t){return Ot.parse(e.slice(),t)},ue.camelCase=le,ue.decamelize=yt,ue.looksLikeNumber=Et;const mn={right:vn,center:wn},gn=0,ge=1,$n=2,$e=3;class bn{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(o=>typeof o=="string"?this.colFromString(o):o);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(s=>s.split("	"));let o=0;return n.forEach(s=>{s.length>1&&M.stringWidth(s[0])>o&&(o=Math.min(Math.floor(this.width*.5),M.stringWidth(s[0])))}),n.forEach(s=>{this.div(...s.map((c,u)=>({text:c.trim(),padding:this.measurePadding(c),width:u===0&&s.length>1?o:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=M.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((o,s)=>{let c="";o.forEach((u,f)=>{const{width:g}=t[f],w=this.negatePadding(t[f]);let A=u;if(w>M.stringWidth(u)&&(A+=" ".repeat(w-M.stringWidth(u))),t[f].align&&t[f].align!=="left"&&this.wrap){const F=mn[t[f].align];A=F(A,w),M.stringWidth(A)<w&&(A+=" ".repeat((g||0)-M.stringWidth(A)-1))}const L=t[f].padding||[0,0,0,0];L[$e]&&(c+=" ".repeat(L[$e])),c+=St(t[f],A,"| "),c+=A,c+=St(t[f],A," |"),L[ge]&&(c+=" ".repeat(L[ge])),s===0&&n.length>0&&(c=this.renderInline(c,n[n.length-1]))}),n.push({text:c.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const o=t.match(/^ */),s=o?o[0].length:0,c=n.text,u=M.stringWidth(c.trimRight());return n.span?this.wrap?s<u?t:(n.hidden=!0,c.trimRight()+" ".repeat(s-u)+t.trimLeft()):(n.hidden=!0,c+t):t}rasterize(t){const n=[],o=this.columnWidths(t);let s;return t.forEach((c,u)=>{c.width=o[u],this.wrap?s=M.wrap(c.text,this.negatePadding(c),{hard:!0}).split(`
`):s=c.text.split(`
`),c.border&&(s.unshift("."+"-".repeat(this.negatePadding(c)+2)+"."),s.push("'"+"-".repeat(this.negatePadding(c)+2)+"'")),c.padding&&(s.unshift(...new Array(c.padding[gn]||0).fill("")),s.push(...new Array(c.padding[$n]||0).fill(""))),s.forEach((f,g)=>{n[g]||n.push([]);const w=n[g];for(let A=0;A<u;A++)w[A]===void 0&&w.push("");w.push(f)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[$e]||0)+(t.padding[ge]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(u=>u.width||M.stringWidth(u.text));let n=t.length,o=this.width;const s=t.map(u=>{if(u.width)return n--,o-=u.width,u.width}),c=n?Math.floor(o/n):0;return s.map((u,f)=>u===void 0?Math.max(c,yn(t[f])):u)}}function St(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function yn(e){const t=e.padding||[],n=1+(t[$e]||0)+(t[ge]||0);return e.border?n+4:n}function En(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function vn(e,t){e=e.trim();const n=M.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function wn(e,t){e=e.trim();const n=M.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let M;function An(e,t){return M=t,new bn({width:e?.width||En(),wrap:e?.wrap})}const xt=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Ct(e){return e.replace(xt,"")}function On(e,t){const[n,o]=e.match(xt)||["",""];e=Ct(e);let s="";for(let c=0;c<e.length;c++)c!==0&&c%t===0&&(s+=`
`),s+=e.charAt(c);return n&&o&&(s=`${n}${s}${o}`),s}function Sn(e){return An(e,{stringWidth:t=>[...t].length,stripAnsi:Ct,wrap:On})}function xn(e,t){let n=B.resolve(".",e),o;for(se.statSync(n).isDirectory()||(n=B.dirname(n));;){if(o=t(n,se.readdirSync(n)),o)return B.resolve(n,o);if(n=B.dirname(o=n),o===n)break}}const Cn={fs:{readFileSync:se.readFileSync,writeFile:se.writeFile},format:ne.format,resolve:B.resolve,exists:e=>{try{return se.statSync(e).isFile()}catch{return!1}}};let K;class _n{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let o=function(){};return typeof t[t.length-1]=="function"&&(o=t.pop()),o=o||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o(),K.format.apply(K.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),o=t.shift(),s=t.shift();let c=function(){};typeof t[t.length-1]=="function"&&(c=t.pop()),this.cache[this.locale]||this._readLocaleFile();let u=s===1?n:o;this.cache[this.locale][n]&&(u=this.cache[this.locale][n][s===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:o},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:c})):c();const f=[u];return~u.indexOf("%d")&&f.push(s),K.format.apply(K.format,f.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let o="";return t.forEach(function(s,c){const u=n[c+1];o+=s,typeof u<"u"&&(o+="%s")}),this.__.apply(this,[o].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],o=n.directory,s=n.locale,c=n.cb,u=this._resolveLocaleFile(o,s),f=JSON.stringify(this.cache[s],null,2);K.fs.writeFile(u,f,"utf-8",function(g){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),c(g)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{K.fs.readFileSync&&(t=JSON.parse(K.fs.readFileSync(n,"utf-8")))}catch(o){if(o instanceof SyntaxError&&(o.message="syntax error in "+n),o.code==="ENOENT")t={};else throw o}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let o=K.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(o)&&~n.lastIndexOf("_")){const s=K.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(s)&&(o=s)}return o}_fileExistsSync(t){return K.exists(t)}}function Nn(e,t){K=t;const n=new _n(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const Rn=e=>Nn(e,Cn),Ln="require is not supported by ESM",_t="loading a directory of commands is not supported yet for ESM";let fe;try{fe=sn.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:$t&&$t.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{fe=process.cwd()}const jn=fe.substring(0,fe.lastIndexOf("node_modules"));gt.notStrictEqual,gt.strictEqual,ne.inspect,jn||process.cwd(),B.basename,B.dirname,B.extname,B.relative,B.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,se.readFileSync,Rn({directory:B.resolve(fe,"../../../locales"),updateFiles:!1});const Q="\x1B[44m",S="\x1B[43m",U="\x1B[41m",Nt="\x1B[42m",b="\x1B[0m",O="\x1B[33m",x="\x1B[36m",d="\x1B[0m",oe=Object.keys({"vue-caution":["elementSelectorsWithScoped","implicitParentChildCommunication"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-recommended":["elementAttributeOrder","topLevelElementOrder"],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","fullWordComponentName","multiAttributeElements","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression"],rrd:["cyclomaticComplexity","deepIndentation","elseCondition","functionSize","htmlLink","ifWithoutCurlyBraces","magicNumbers","nestedTernary","parameterCount","plainScript","propsDrilling","scriptLength","shortVariableName","tooManyProps","vForWithIndexKey"]}),Le=[],je=100,Fn=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>je&&Le.push({filePath:t,message:`${n.length>je*2?U:S}(${n.length} lines)${b}`})},Tn=()=>{const e=[];return Le.length>0&&Le.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ Long <script> blocks${d}`,description:`👉 ${O}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${je} lines.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/script-length.html`,message:`${t.message} 🚨`})}),e},Fe=[],Pn=(e,t)=>{!e||e.setup||Fe.push({filePath:t,message:`${S}Plain <script> block${b} found`})},Wn=()=>{const e=[];return Fe.length>0&&Fe.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ Plain <script> blocks${d}`,description:`👉 ${O} Consider using <script setup> to leverage the new SFC <script> syntax.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/plain-script.html`,message:`${t.message} 🚨`})}),e},In=/^(\(.*\)|\\?.)$/;function te(e){const t=e.toString();return In.test(t)?t:`(?:${t})`}const Bn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Mn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function E(e){const t=n=>E(`(?<${n}>${`${e}`.replace(Bn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>E(`${e}${V(...n)}`),{referenceTo:n=>E(`${e}\\k<${n}>`)}),or:(...n)=>E(`(?:${e}|${V(...n)})`),after:(...n)=>E(`(?<=${V(...n)})${e}`),before:(...n)=>E(`${e}(?=${V(...n)})`),notAfter:(...n)=>E(`(?<!${V(...n)})${e}`),notBefore:(...n)=>E(`${e}(?!${V(...n)})`),times:Object.assign(n=>E(`${te(e)}{${n}}`),{any:()=>E(`${te(e)}*`),atLeast:n=>E(`${te(e)}{${n},}`),atMost:n=>E(`${te(e)}{0,${n}}`),between:(n,o)=>E(`${te(e)}{${n},${o}}`)}),optionally:()=>E(`${te(e)}?`),as:t,groupedAs:t,grouped:()=>E(`${e}`.replace(Mn,"($1$3)$2")),at:{lineStart:()=>E(`^${e}`),lineEnd:()=>E(`${e}$`)}}}const kn=/[.*+?^${}()|[\]\\/]/g;function he(e){return E(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function k(e){return E(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function zn(...e){return E(`(?:${e.map(t=>V(t)).join("|")})`)}const be=E(".");E("\\b\\w+\\b");const H=E("\\w"),z=E("\\b"),Dn=E("\\d"),R=E("\\s"),Rt=Object.assign(E("[a-zA-Z]"),{lowercase:E("[a-z]"),uppercase:E("[A-Z]")}),Lt=E("\\t"),jt=E("\\n");E("\\r"),E("\\W+"),E("\\W"),E("\\B"),E("\\D"),E("\\S"),Object.assign(E("[^a-zA-Z]"),{lowercase:E("[^a-z]"),uppercase:E("[^A-Z]")}),E("[^\\t]"),E("[^\\n]"),E("[^\\r]");function Z(...e){return E(`${te(V(...e))}?`)}function V(...e){return E(e.map(t=>typeof t=="string"?t.replace(kn,"\\$&"):t).join(""))}function C(...e){return E(`${te(V(...e))}+`)}const q="i",j="g",_=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(V(...e).toString(),[...t||""].join(""))},Te=[],Un=(e,t)=>{if(!e)return;const n=_(z,"else",z,[j,q]),o=e.content.match(n);o?.length&&Te.push({filePath:t,message:`else clauses found ${U}(${o.length})${b}`})},Hn=()=>{const e=[];return Te.length>0&&Te.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ else conditions${d}`,description:`👉 ${O}Try to rewrite the conditions in a way that the else clause is not necessary.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/else-condition.html`,message:`${t.message} 🚨`})}),e},Pe=[],Vn=5,qn=10,Gn=(e,t)=>{if(!e)return;const n=_(z,"if",z,[j,q]),o=_(z,"else",z,[j,q]),s=_(z,"for",z,[j,q]),c=_(z,"while",z,[j,q]),u=_(z,"case",z,[j,q]),f=e.content.match(n),g=e.content.match(o),w=e.content.match(s),A=e.content.match(c),L=e.content.match(u),F=(f?.length||0)+(g?.length||0)+(w?.length||0)+(A?.length||0)+(L?.length||0);F>Vn&&Pe.push({filePath:t,message:`${F>qn?U:S}(${F})${b}`})},Kn=()=>{const e=[];return Pe.length>0&&Pe.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ cyclomatic complexity${d}`,description:`👉 ${O}Try to reduce complexity.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/cyclomatic-complexity.html`,message:`${t.message} 🚨`})}),e},We=[],Qn=e=>{if(e.includes("pages"))return;const t=xe.basename(e);if(t==="App.vue")return;const n=_(Rt.uppercase);t.slice(1).match(n)?.length||We.push({filePath:e,message:`Component name is ${S}single word${b}`})},Yn=()=>{const e=[];return We.length>0&&We.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ single name component${d}`,description:`👉 ${O}Rename the component to use multi-word name.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/single-name-component.html`,message:`${t.message} 🚨`})}),e},Ie=[],Zn=(e,t)=>{e&&e.forEach(n=>{n.scoped||Ie.push({filePath:t,message:`${S}global style${b} used`})})},Xn=()=>{const e=[];return Ie.length>0&&Ie.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ global style${d}`,description:`👉 ${O}Use <style scoped>.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/global-style.html`,message:`${t.message} 🚨`})}),e},Be=[],Jn=(e,t)=>{if(!e)return;const n=_("defineProps([",[j,q]);e.content.match(n)?.length&&Be.push({filePath:t,message:`${S}Props type${b} not defined`})},es=()=>{const e=[];return Be.length>0&&Be.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ simple prop${d}`,description:`👉 ${O}Add at least type definition.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/simple-prop.html`,message:`${t.message} 🚨`})}),e},D=(e,t,n=0)=>{if(!t.includes(`
`))return e.split(`
`).findIndex((f,g)=>g>=n&&f.includes(t))+1;const o=e.split(`
`).slice(0,n).reduce((u,f)=>u+f.length,0),s=e.indexOf(t,o);return e.slice(0,s).split(`
`).length},Me=[],ts=(e,t)=>{if(!e)return;const n=_("<",C(k(">"))," v-if",C(k(">"))," v-for",C(k(">")),">",[j,q]),o=_("<",C(k(">"))," v-for",C(k(">"))," v-if",C(k(">")),">",[j,q]),s=e.content.match(n),c=e.content.match(o);if(s?.length||c?.length){const u=s?.length?s[0]:c?.length?c[0]:"",f=D(e.content,u);Me.push({filePath:t,message:`line #${f} ${S}v-if used with v-for${b}`})}},ns=()=>{const e=[];return Me.length>0&&Me.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-if used with v-for${d}`,description:`👉 ${O}Move out the v-if to a computed property.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/vif-with-vfor.html`,message:`${t.message} 🚨`})}),e},ke=[],ss=(e,t)=>{if(!e)return;const n=_("<",C(k(">"))," v-for",C(k(">")),">",[j,q]),o=e.content.match(n);o?.length&&(o.some(c=>c.includes(":key"))||ke.push({filePath:t,message:`v-for used ${S}without a key${b}`}))},os=()=>{const e=[];return ke.length>0&&ke.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-for has no key${d}`,description:`👉 ${O}Add a \`:key\` property to all v-for.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/vfor-no-key.html`,message:`${t.message} 🚨`})}),e},ze=[],rs=e=>{if(e.includes("pages")||e.includes("layouts"))return;const t=xe.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,o=t.match(n),s=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,c=t.match(s);!o?.length&&!c?.length&&ze.push({filePath:e,message:`component name is ${S}not PascalCase, nor kebab-case.${b}`})},is=()=>{const e=[];return ze.length>0&&ze.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component name is not PascalCase and not kebab-case${d}`,description:`👉 ${O}Rename the component to use PascalCase or kebab-case file name.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/component-filename-casing.html`,message:`${t.message} 🚨`})}),e},De=[],cs=/^[a-z]+([A-Z][a-z]*)*$/,as=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let o;for(;(o=n.exec(e.content))!==null;)o[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(c=>c.split(":")[0]).filter(c=>c.length).filter(c=>!cs.test(c)).length&&De.push({filePath:t,message:`prop names are ${S}not camelCased${b}`})},ls=()=>{const e=[];return De.length>0&&De.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ prop names are not camelCased${d}`,description:`👉 ${O}Rename the props to camelCase.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/prop-name-casing.html`,message:`${t.message} 🚨`})}),e},Ue=[],us=40,fs=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(s=>s[1].trim()).forEach(s=>{if(s.length>us){const c=D(e.content,s),u=s.split(`
`).at(0)?.trim()||"";Ue.push({filePath:t,message:`line #${c} ${S}${u}${b}`})}})},hs=()=>{const e=[];return Ue.length>0&&Ue.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ lengthy template expression${d}`,description:`👉 ${O}Refactor the expression into a computed property.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/template-simple-expression.html`,message:`${t.message} 🚨`})}),e},He=[],ps=(e,t)=>{if(!e)return;const n=e.template,o=_("<",C(H),Z(C(he(` 	
\r`))),C(k("/>")),Z(C(he(` 	
\r`))),Z("/"),">",["g"]),s=n?.content.match(o);if(s===null)return;const c=_(":",C(H),Z(" "),"=",Z(" "),k(`'"`),["g"]);s?.forEach(u=>{if(!u.includes(":"))return;const f=u.match(c);if(f?.length){const g=D(e.source,u);He.push({filePath:t,message:`line #${g} ${S}${f}${b}`})}})},ds=()=>{const e=[];return He.length>0&&He.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ attribute value is not quoted${d}`,description:`👉 ${O}Use quotes for attribute values.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/quoted-attribute-values.html`,message:`${t.message} 🚨`})}),e},Ve=[],ms=(e,t)=>{if(!e)return;const n=e.template,o=_("<",C(Rt.uppercase,H),Z(jt,Lt),Z(C(k(">"))),"></",C(H),">",["g"]),s=n?.content?.match(o);s!==null&&s?.forEach(c=>{const u=D(e.source,c),f=c.split(`
`).at(-1)?.trim()||"";Ve.push({filePath:t,message:`line #${u} ${S}${f}${b}`})})},gs=()=>{const e=[];return Ve.length>0&&Ve.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component is not self closing${d}`,description:`👉 ${O}Components with no content should be self-closing.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/self-closing-components.html`,message:`${t.message} 🚨`})}),e},qe=[],Ft=[],$s=["v-slot","v-bind","v-on"],bs=(e,t)=>{if(!e)return;const n=e.template;$s.forEach(o=>{if(n?.content.includes(`${o}:`)){const s=D(e.source,o);qe.push({filePath:t,message:`line #${s} ${S}${o}${b}`}),Ft.some(c=>c.filePath===t)||Ft.push({filePath:t})}})},ys=()=>{const e=[];return qe.length>0&&qe.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ directive shorthands not used${d}`,description:`👉 ${O}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/directive-shorthands.html`,message:`${t.message} 🚨`})}),e},Ge=[],Es=3,vs=e=>{const t=_(C(k("/")).grouped(),V(".vue").at.lineEnd()),n=e.match(t);if(n){const o=n[0]?.split(".vue")[0],s=_(he("bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ"),[j]),c=o.match(s);(!c||c.length<Es)&&Ge.push({filePath:e,message:`${o} is not a ${S}full word.${b}`})}},ws=()=>{const e=[];return Ge.length>0&&Ge.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ full-word component names${d}`,description:`👉 ${O}Component names should prefer full words over abbreviations.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/full-word-component-name.html`,message:`${t.message} 🚨`})}),e},Ke=[],As=(e,t)=>{const n=e.toString(),o=n.indexOf("<script setup>"),s=n.indexOf("<template>"),c=n.indexOf("<style>"),u=[{name:"script",index:o},{name:"template",index:s},{name:"style",index:c}].filter(g=>g.index!==-1);u.every((g,w)=>w===0?!0:u[w-1].index<g.index)||Ke.push({filePath:t,message:`Top level elements are ${S}not following the correct order.${b}`})},Os=()=>{const e=[];return Ke.length>0&&Ke.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-recommended ~ top level element order${d}`,description:`👉 ${O}Single-File Components should always order <script>, <template>, and <style> tags consistently.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-recommended/top-level-element-order.html`,message:`${t.message} 🚨`})}),e},Qe=[],Tt=["is","v-for","v-if","v-else-if","v-else","v-show","v-cloak","v-pre","v-once","id","ref","key","v-model","v-on","v-html","v-text"],Ss=(e,t)=>{if(!e)return;const n=e.content.replace(/<\/?template>/g,""),o=/<(\w+)(\s[^>]+)?>/g,s=/(\w+(?:-\w+)*)(?:="[^"]*")?/g;let c;for(;(c=o.exec(n))!==null;){const u=c[1],f=c[2];if(f){const w=Array.from(f.matchAll(s),L=>L[1]).filter(L=>Tt.includes(L));let A=-1;for(const L of w){const F=Tt.indexOf(L);if(F!==-1&&F<A){Qe.push({filePath:t,message:`tag has attributes out of order ${S}(${u})${b}`});break}A=F}}}},xs=()=>{const e=[];return Qe.length>0&&Qe.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-recommended ~ element attribute order${d}`,description:`👉 ${O}The attributes of elements (including components) should be ordered consistently.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-recommended/element-attribute-order.html`,message:`${t.message} 🚨`})}),e},Ye=[],Cs=5,_s=(e,t)=>{if(!e)return;const n=_("defineProps",Z("<"),Z("("),"{",C(be),"}",["g","s"]),o=e.content.match(n);if(o?.length){const s=o[0].split(",").length;s>Cs&&Ye.push({filePath:t,message:`props found ${U}(${s})${b}`})}},Ns=()=>{const e=[];return Ye.length>0&&Ye.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ too many props${d}`,description:`👉 ${O}Try to refactor your code to use less properties.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/too-many-props.html`,message:`${t.message} 🚨`})}),e},Ze=[],Pt=20,Xe=5,Wt=8;function Rs(e,t,n){t.split(`
`).length>Pt&&Ze.push({filePath:n,message:`function ${U}(${Ps(e)})${b} is too long`})}function Ls(e,t){let n="",o=t;for(;o<e.length&&/\s/.test(e[o]);)o++;if(e.slice(o,o+Xe)==="const")for(o+=Xe;o<e.length&&/\s/.test(e[o]);)o++;for(;o<e.length&&/[\w$]/.test(e[o]);)n+=e[o],o++;return n.trim()}function js(e,t){let n=t;for(;n<e.length&&e[n]!=="{";)n++;return n+1}function Fs(e,t){let n="",o=-1;for(;t<e.length&&e[t]!=="=";)/\w/.test(e[t])&&(n+=e[t]),t++;return t=e.indexOf("=>",t),t===-1?null:(o=t+2,{name:n,bodyStart:o})}function Ts(e,t){let n=1,o="",s=t;for(;s<e.length&&n>0;){const c=e[s];c==="{"&&n++,c==="}"&&n--,o+=c,s++}return{body:o,end:s}}function Ps(e){return e.replace(/^const\s*/,"")}const Ws=(e,t)=>{if(!e)return;const n=e.content,o=n.length;let s=0;for(;s<o;){let c="",u="",f=!1;if(n.slice(s,s+Wt)==="function"&&(s+=Wt,f=!0,c=Ls(n,s),s=js(n,s)),n.slice(s,s+Xe)==="const"){const g=Fs(n,s);g&&(f=!0,c=g.name,s=g.bodyStart)}if(f){const{body:g,end:w}=Ts(n,s);u=g,s=w,Rs(c,u,t)}f||s++}},Is=()=>{const e=[];return Ze.length>0&&Ze.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ function size${d}`,description:`👉 ${O}Functions must be shorter than ${Pt} lines.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/function-size.html`,message:`${t.message} 🚨`})}),e},Je=[],It=3,Bt=(e,t,n)=>{const o=t.split(",").map(s=>s.trim()).filter(s=>s.length>0);o.length>It&&Je.push({filePath:n,message:`function ${S}${e}${b} has ${S}${o.length}${b} parameters`})},Bs=(e,t)=>{if(!e)return;const n=/function\s+([\w$]+)\s*\(([^)]*)\)\s*\{|const\s+([\w$]+)\s*=\s*\(([^)]*)\)\s*=>\s*\{/g;let o;for(;(o=n.exec(e.content))!==null;)o[1]?Bt(o[1],o[2],t):o[3]&&Bt(o[3],o[4],t)},Ms=()=>{const e=[];return Je.length>0&&Je.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ parameter count${d}`,description:`👉 ${O}Max number of function parameters should be ${It}.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/parameter-count.html`,message:`${t.message} 🚨`})}),e},et=[],ks=(e,t)=>{if(!e)return;const n=_("defineProps(",R.times.any(),"[",R.times.any(),C(he(`'"`),C(H),he(`'"`),R.times.any(),Z(",",R.times.any())),"]",R.times.any(),")",[j]),o=_("<",C(H).grouped(),R,k(">").times.any(),":",C(H).grouped(),R.times.any(),"=",R.times.any(),'"props.',C(H).grouped(),'"',[j]);let s;const c=new Set;for(;(s=n.exec(e.content))!==null;)s[0].replace(/defineProps\(|[)[\]'"\s]/g,"").split(",").forEach(g=>c.add(g));let u;for(;(u=o.exec(e.content))!==null;){const f=u[1],g=u[2],w=u[3];c.has(w)&&g===w&&et.push({filePath:t,message:`Prop ${S}(${w})${b} is being drilled through ${S}${f}${b} component unmodified.`})}},zs=()=>{const e=[];return et.length>0&&et.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ props drilling${d}`,description:`👉 ${O}Props should not be forwarded unmodified. Consider refactoring.${d}`,message:`${t.message} 🚨`})}),e},tt=[],Mt=4,Ds=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][\w$]*)/g;let o;for(;(o=n.exec(e.content))!==null;){const s=o[1];s.length<Mt&&tt.push({filePath:t,message:`${U}(${s})${b}`})}},Us=()=>{const e=[];return tt.length>0&&tt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ short variable names${d}`,description:`👉 ${O}Variable names must have a minimum length of ${Mt}.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/short-variable-name.html`,message:`${t.message} 🚨`})}),e},kt=[],ye=[],Hs=5,Vs=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,o=e.content.match(n);o?.length&&o.forEach(s=>{if(s.split(`
`).length>Hs){const c=s.split(`
`)[0],u=D(e.content,c);kt.push({filePath:t,message:`line #${u} ${S}computed${b}`}),ye.push({filePath:t}),ye.some(f=>f.filePath===t)||ye.push({filePath:t})}})},qs=()=>{const e=[];return ye.length>0&&kt.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ complicated computed property${d}`,description:`👉 ${O}Refactor the computed properties to smaller ones.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/simple-computed.html`,message:`${t.message} 🚨`})}),e},nt=[],Gs=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(s=>s[1].trim()).forEach(s=>{const c=D(e.content.trim(),s),u=s.split(`
`).at(0)?.trim()||"";nt.push({filePath:t,message:`line #${c} ${S}(${u})${b}`})})},Ks=()=>{const e=[];return nt.length>0&&nt.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component files${d}`,description:`👉 ${O}Whenever a build system is available to concatenate files, each component should be in its own file.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/component-files.html`,message:`${t.message} 🚨`})}),e},Ee=[],Qs=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,o=/v-model\s*=\s*"([^"]+)"/,s=_(V("$parent").or("getCurrentInstance"),[j]),c=e.content.match(n),u=e.content.match(o);if(u){const g=u[1].split(".")[0];if((c?c[1]:"").includes(g)){const A=D(e.content.trim(),g);Ee.push({filePath:t,message:`line #${A} ${S}(${g})${b}`})}}const f=e.content.match(s);if(f){const g=D(e.content.trim(),f[0]);Ee.push({filePath:t,message:`line #${g} ${S}(${f[0]})${b}`})}},Ys=()=>{const e=[];return Ee.length>0&&Ee.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-caution ~ implicit parent-child communication${d}`,description:`👉 ${O}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-caution/implicit-parent-child-communication.html`,message:`${t.message} 🚨`})}),e},st=[],zt=5,Zs=3,Xs=(e,t)=>{if(!e)return;const n=_(Lt.times.atLeast(zt).or(R.times.atLeast(Zs*zt)),[j,q]);e.content.match(n)?.forEach(s=>{const c=D(e.content,s);st.push({filePath:t,message:`line #${c} ${S}indentation: ${s.length}${b}`})})},Js=()=>{const e=[];return st.length>0&&st.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ deep indentation${d}`,description:`👉 ${O}Try to refactor your component to child components, to avoid deep indentations.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/deep-indentation.html`,message:`${t.message} 🚨`})}),e},ot=[],eo=(e,t)=>{if(!e)return;const n=_("<a",z,[j,q]),o=e.content.match(n);o?.length&&ot.push({filePath:t,message:`${o?.length} ${S}html link found${b}`})},to=()=>{const e=[];return ot.length>0&&ot.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ html link${d}`,description:`👉 ${O}Use router-link or NuxtLink.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/html-link.html`,message:`${t.message} 🚨`})}),e},rt=[],no=(e,t)=>{if(!e)return;const o=e.content.split(`
`);o.forEach((s,c)=>{const u=s.trim();if(u.startsWith("if (")&&!u.includes("{")){const f=o[c+1]?.trim();(!f||!f.startsWith("{")&&!u.endsWith("{"))&&rt.push({filePath:t,message:`line #${c} if statement without curly braces: ${U}${u}${b}`})}})},so=()=>{const e=[];return rt.length>0&&rt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ if without curly braces${d}`,description:`👉 ${O}All if statements must be enclosed in curly braces for better readability and maintainability.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/if-without-curly-braces.html`,message:`${t.message} 🚨`})}),e},it=[],oo=(e,t)=>{if(!e)return;const n=_(C(Dn).as("magicNumber"),zn(")",jt),[j]);let o,s=0;for(;(o=n.exec(e.content))!==null;){const c=o.groups?.magicNumber||"",u=D(e.content,c,s);it.push({filePath:t,message:`line #${u} ${S}magic number: ${c}${b}`}),s=u}},ro=()=>{const e=[];return it.length&&it.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ magic numbers${d}`,description:`👉 ${O}Extract magic numbers to a constant.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/magic-numbers.html`,message:`magic numbers found (${t.message}) 🚨`})}),e},ct=[],io=(e,t)=>{if(!e)return;const n=/<(\w+)([^>]*)>/g;let o;for(;(o=n.exec(e.content))!==null;){const s=o[1],c=o[2];c.split(/\s+/).filter(f=>f.trim()!=="").length>1&&c.split(`
`).length===1&&ct.push({filePath:t,message:`Element ${S}<${s}>${b} should have its attributes on separate lines`})}},co=()=>{const e=[];return ct.length>0&&ct.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ multi-attribute elements${d}`,description:`👉 ${O}Elements with multiple attributes should span multiple lines, with one attribute per line.${d}`,message:`${t.message} 🚨`})}),e},ao=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],at=[],lo=(e,t)=>{if(!e)return;const n=/([a-z]+)\s*\{[^}]*\}/gi;e.forEach(o=>{let s;for(;(s=n.exec(o.content))!==null;){const c=s[1];ao.includes(c)&&at.push({filePath:t,message:`${S}(${c})${b}`})}})},uo=()=>{const e=[];return at.length>0&&at.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-caution ~ element selectors with scoped${d}`,description:`👉 ${O}Prefer class selectors over element selectors in scoped styles, because large numbers of element selectors are slow.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-caution/element-selectors-with-scoped.html`,message:`${t.message} 🚨`})}),e},lt=[],fo=(e,t)=>{if(!e)return;const n=_(C(be),R,"?",R,C(be),R,":",R,C(be));e.content.match(n)?.forEach(s=>{if(s.split("?").length-1>1){const c=D(e.content,s);lt.push({filePath:t,message:`line #${c} has ${S}nested ternary${b}`})}})},ho=()=>{const e=[];return lt.length>0&&lt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ nested Ternary${d}`,description:`👉 ${O}/* TODO tip to fix this issue */.${d} See: https:///* TODO doc link */`,message:`${t.message} 🚨`})}),e},ut=[],po=(e,t)=>{if(!e)return;const n=_('v-for="(',R.times.any(),C(H).grouped(),R.times.any(),",",R.times.any(),C(H).grouped(),R.times.any(),")",C(R),"in",C(R),C(H).grouped(),[j]),o=_(':key="',R.times.any(),C(H).grouped(),R.times.any(),'"',[j]),s=[...e.content.matchAll(n)],c=[...e.content.matchAll(o)];s.forEach(u=>{const[f,g,w,A]=u;c.forEach(L=>{const F=L[1];if(F===w){const ie=D(e.content.trim(),F);ut.push({filePath:t,message:`line #${ie} ${S}index is being used as :key in v-for${b}`})}})})},mo=()=>{const e=[];return ut.length>0&&ut.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ VFor With Index Key${d}`,description:`👉 ${O}Avoid using index as key in v-for loops.${d} See: https://`,message:`${t.message} 🚨`})}),e},go=(e,t)=>{const n={},o=({file:f,rule:g,title:w,description:A,message:L})=>{const F=e==="rule"?g:f;n[F]||(n[F]=[]),n[F].push({file:f,rule:g,title:w,description:A,message:L})},s=f=>{f().forEach(w=>{o(w)})};s(Yn),s(es),s(os),s(ns),s(Xn),s(is),s(Ks),s(ys),s(ws),s(co),s(ls),s(ds),s(gs),s(qs),s(hs),s(Os),s(xs),s(Ys),s(uo),s(Kn),s(Js),s(Hn),s(Is),s(to),s(so),s(ro),s(ho),s(Ms),s(Wn),s(zs),s(Tn),s(Us),s(Ns),s(mo);const c=[];return Object.keys(n).sort((f,g)=>{const w=n[f].length,A=n[g].length;return t==="desc"?A-w:w-A}).forEach(f=>{console.log(`
 - ${f}`),n[f].forEach(g=>{const w=g.message.includes(U);if(c.some(A=>A.file===g.file)){const A=c.find(L=>L.file===g.file);A&&(w?A.errors++:A.warnings++)}else c.push({file:g.file,errors:w?1:0,warnings:w?0:1});console.log(e==="file"?`   Rule: ${g.rule}`:`   File: ${g.file}`),console.log(`   Description: ${g.description}`),console.log(`   Message: ${g.message||"🚨"}
`)})}),c},$o=(e,t,n)=>{const o=e.scriptSetup||e.script;console.log(`Analyzing ${t}...`);const s=t.endsWith(".vue");n.includes("vue-essential")&&(Jn(o,t),s&&(Qn(t),Zn(e.styles,t),ss(e.template,t),ts(e.template,t))),n.includes("vue-strong")&&(Vs(o,t),s&&(Gs(o,t),as(o,t),rs(t),ms(e,t),fs(e.template,t),ps(e,t),bs(e,t),vs(t),io(e.template,t))),n.includes("vue-recommended")&&s&&(As(e.source,t),Ss(e.template,t)),n.includes("vue-caution")&&s&&(Qs(o,t),lo(e.styles,t)),n.includes("rrd")&&(Gn(o,t),Xs(o,t),Un(o,t),Ws(o,t),no(o,t),oo(o,t),fo(o,t),Bs(o,t),ks(o,t),Fn(o,t),Ds(o,t),_s(o,t),s&&(eo(e.template,t),Pn(e.script,t),po(e.template,t)))},bo=1.5,Dt=75,Ut=85,Ht=95,yo={groupBy:["rule","file"],orderBy:["asc","desc"]};function Vt(e,t){const n=yo[t];return n.includes(e)||(console.error(`
Invalid option "${e}" provided for flag "${t}". Valid options are: ${n.join(", ")}.
`),process.exit(1)),e}function Eo(e,t,n){const{errors:o,warnings:s}=e.reduce((u,{errors:f,warnings:g})=>({errors:u.errors+f,warnings:u.warnings+g}),{errors:0,warnings:0});console.log(`Found ${U}${Intl.NumberFormat("en-US").format(o)} errors${b}, and ${S}${Intl.NumberFormat("en-US").format(s)} warnings${b}, ${Q}${Intl.NumberFormat("en-US").format(t)} lines${b} of code in ${Q}${Intl.NumberFormat("en-US").format(n)} files${b}`);const c=Math.ceil((1-(o*bo+s)/t)*100);return c<Dt&&console.log(`${U}Code health is LOW: ${c}%${b}`),c>=Dt&&c<Ut&&console.log(`${S}Code health is MEDIUM ${c}%${b}`),c>=Ut&&c<Ht&&console.log(`${Q}Code health is OK: ${c}%${b}`),c>=Ht&&console.log(`${Nt}Code health is GOOD: ${c}%${b}`),{errors:o,warnings:s}}let ft=0,qt=0,Gt=[];const vo=["cache","coverage","dist",".git","node_modules",".nuxt"],Kt=async e=>{if(!(await me.stat(e)).isDirectory()){await Qt(e,e);return}const n=await me.readdir(e);for(const o of n){const s=xe.join(e,o);(await me.stat(s)).isDirectory()&&(vo.some(u=>s.includes(u))||await Kt(s)),await Qt(s,s)}},Qt=async(e,t)=>{if(e.endsWith(".vue")||e.endsWith(".ts")||e.endsWith(".js")){ft++;const n=await me.readFile(t,"utf-8");qt+=n.split(/\r\n|\r|\n/).length;const{descriptor:o}=on.parse(n);(e.endsWith(".ts")||e.endsWith(".js"))&&(o.script={content:n}),$o(o,t,Gt)}},wo=async({dir:e,apply:t=[],groupBy:n,orderBy:o})=>{console.log(`

${Q}Analyzing Vue, TS and JS files in ${e}${b}`);const s=oe.filter(g=>!t.includes(g));console.log(`Applying ${Q}${t.length}${b} rulesets ${Q}${t}${b}, ignoring ${Q}${s.length}${b} rulesets ${Q}${s}${b}, grouping by ${Q}${n}${b}, ordering ${Q}${o}${b}`),Gt=t,await Kt(e),console.log(`Found ${Q}${ft}${b} files`);const c=go(n,o),{errors:u,warnings:f}=Eo(c,qt,ft);!u&&!f&&console.log(`${Nt}No code smells detected!${b}`)};I(an(process.argv)).command("analyze [path]","Analyze Vue files for code smells and best practices",e=>e.positional("path",{describe:"path to the Vue files",default:"./"}).option("ignore",{alias:"i",describe:"Comma-separated list of rulesets to ignore.",choices:oe,coerce:Yt("ignore"),group:"Filter Rulesets:"}).option("apply",{alias:"a",describe:"Comma-separated list of rulesets to apply.",choices:oe,coerce:Yt("apply"),group:"Filter Rulesets:"}).option("group",{alias:"g",describe:"Group results at the output",choices:["rule","file"],coerce:t=>Vt(t,"groupBy"),default:"rule",group:"Group Results:"}).option("order",{alias:"o",describe:"Order results at the output",choices:["asc","desc"],coerce:t=>Vt(t,"orderBy"),default:"asc",group:"Order Results:"}).check(t=>(t.ignore&&t.apply&&(console.error(`
${U}Cannot use both --ignore and --apply options together.${b}.

`),process.exit(1)),!0)),e=>{let t=[...oe];e.apply&&(t=e.apply),e.ignore&&(t=oe.filter(n=>!e.ignore.includes(n))),wo({dir:e.path,apply:t,groupBy:e.group,orderBy:e.order})}).help().argv;function Yt(e){return t=>{const n=t.split(","),o=n.filter(s=>!oe.includes(s));return o.length>0&&(console.error(`
${U}Invalid ${e} values: ${o.join(", ")}${b}. 
${O}Allowed values are: ${[...oe].join(", ")}${d}

`),process.exit(1)),n}}});
