(function(T,J){typeof exports=="object"&&typeof module<"u"?J(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("node:fs"),require("node:path"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","node:fs","node:path","@vue/compiler-sfc"],J):(T=typeof globalThis<"u"?globalThis:T||self,J(T.yargs,T.util,T.path,T.fs,T.assert,T.url,T["node:fs"],T["node:path"],T.compilerSfc))})(this,function(T,J,W,ee,rt,It,Ae,xe,Pt){"use strict";var it=typeof document<"u"?document.currentScript:null;class se extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,se)}}function ct(){return Mt()?0:1}function Mt(){return Bt()&&!process.defaultApp}function Bt(){return!!process.versions.electron}function zt(e){return e.slice(ct()+1)}function Ut(){return process.argv[ct()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function oe(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",o=!1;const r=e.match(/^-+/);for(let a=r?r[0].length:0;a<e.length;a++){let f=e.charAt(a);o&&(o=!1,f=f.toUpperCase()),a!==0&&(f==="-"||f==="_")?o=!0:f!=="-"&&f!=="_"&&(n+=f)}return n}}function at(e,t){const n=e.toLowerCase();t=t||"-";let o="";for(let r=0;r<e.length;r++){const a=n.charAt(r),f=e.charAt(r);a!==f&&r>0?o+=`${t}${n.charAt(r)}`:o+=f}return o}function lt(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function Vt(e){if(Array.isArray(e))return e.map(f=>typeof f!="string"?f+"":f);e=e.trim();let t=0,n=null,o=null,r=null;const a=[];for(let f=0;f<e.length;f++){if(n=o,o=e.charAt(f),o===" "&&!r){n!==" "&&t++;continue}o===r?r=null:(o==="'"||o==='"')&&!r&&(r=o),a[t]||(a[t]=""),a[t]+=o}return a}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var z;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(z||(z={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let K;class qt{constructor(t){K=t}parse(t,n){const o=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),r=Vt(t),a=typeof t=="string",f=Dt(Object.assign(Object.create(null),o.alias)),p=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},o.configuration),E=Object.assign(Object.create(null),o.default),S=o.configObjects||[],v=o.envPrefix,R=p["populate--"],D=R?"--":"_",$e=Object.create(null),jt=Object.create(null),te=o.__||K.format,u={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},k=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,tt=new RegExp("^--"+p["negation-prefix"]+"(.+)");[].concat(o.array||[]).filter(Boolean).forEach(function(s){const c=typeof s=="object"?s.key:s,h=Object.keys(s).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();h&&(u[h][c]=!0),u.arrays[c]=!0,u.keys.push(c)}),[].concat(o.boolean||[]).filter(Boolean).forEach(function(s){u.bools[s]=!0,u.keys.push(s)}),[].concat(o.string||[]).filter(Boolean).forEach(function(s){u.strings[s]=!0,u.keys.push(s)}),[].concat(o.number||[]).filter(Boolean).forEach(function(s){u.numbers[s]=!0,u.keys.push(s)}),[].concat(o.count||[]).filter(Boolean).forEach(function(s){u.counts[s]=!0,u.keys.push(s)}),[].concat(o.normalize||[]).filter(Boolean).forEach(function(s){u.normalize[s]=!0,u.keys.push(s)}),typeof o.narg=="object"&&Object.entries(o.narg).forEach(([s,c])=>{typeof c=="number"&&(u.nargs[s]=c,u.keys.push(s))}),typeof o.coerce=="object"&&Object.entries(o.coerce).forEach(([s,c])=>{typeof c=="function"&&(u.coercions[s]=c,u.keys.push(s))}),typeof o.config<"u"&&(Array.isArray(o.config)||typeof o.config=="string"?[].concat(o.config).filter(Boolean).forEach(function(s){u.configs[s]=!0}):typeof o.config=="object"&&Object.entries(o.config).forEach(([s,c])=>{(typeof c=="boolean"||typeof c=="function")&&(u.configs[s]=c)})),Ps(o.key,f,o.default,u.arrays),Object.keys(E).forEach(function(s){(u.aliases[s]||[]).forEach(function(c){E[c]=E[s]})});let G=null;qs();let ye=[];const N=Object.assign(Object.create(null),{_:[]}),Ft={};for(let s=0;s<r.length;s++){const c=r[s],h=c.replace(/^-{3,}/,"---");let l,i,m,d,g,j;if(c!=="--"&&/^-/.test(c)&&Ce(c))nt(c);else if(h.match(/^---+(=|$)/)){nt(c);continue}else if(c.match(/^--.+=/)||!p["short-option-groups"]&&c.match(/^-.+=/))d=c.match(/^--?([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&(b(d[1],u.arrays)?s=Ee(s,d[1],r,d[2]):b(d[1],u.nargs)!==!1?s=be(s,d[1],r,d[2]):w(d[1],d[2],!0));else if(c.match(tt)&&p["boolean-negation"])d=c.match(tt),d!==null&&Array.isArray(d)&&d.length>=2&&(i=d[1],w(i,b(i,u.arrays)?[!1]:!1));else if(c.match(/^--.+/)||!p["short-option-groups"]&&c.match(/^-[^-]+/))d=c.match(/^--?(.+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(i=d[1],b(i,u.arrays)?s=Ee(s,i,r):b(i,u.nargs)!==!1?s=be(s,i,r):(g=r[s+1],g!==void 0&&(!g.match(/^-/)||g.match(k))&&!b(i,u.bools)&&!b(i,u.counts)||/^(true|false)$/.test(g)?(w(i,g),s++):w(i,ne(i))));else if(c.match(/^-.\..+=/))d=c.match(/^-([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&w(d[1],d[2]);else if(c.match(/^-.\..+/)&&!c.match(k))g=r[s+1],d=c.match(/^-(.\..+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(i=d[1],g!==void 0&&!g.match(/^-/)&&!b(i,u.bools)&&!b(i,u.counts)?(w(i,g),s++):w(i,ne(i)));else if(c.match(/^-[^-]+/)&&!c.match(k)){m=c.slice(1,-1).split(""),l=!1;for(let L=0;L<m.length;L++){if(g=c.slice(L+2),m[L+1]&&m[L+1]==="="){j=c.slice(L+3),i=m[L],b(i,u.arrays)?s=Ee(s,i,r,j):b(i,u.nargs)!==!1?s=be(s,i,r,j):w(i,j),l=!0;break}if(g==="-"){w(m[L],g);continue}if(/[A-Za-z]/.test(m[L])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(g)&&b(g,u.bools)===!1){w(m[L],g),l=!0;break}if(m[L+1]&&m[L+1].match(/\W/)){w(m[L],g),l=!0;break}else w(m[L],ne(m[L]))}i=c.slice(-1)[0],!l&&i!=="-"&&(b(i,u.arrays)?s=Ee(s,i,r):b(i,u.nargs)!==!1?s=be(s,i,r):(g=r[s+1],g!==void 0&&(!/^(-|--)[^-]/.test(g)||g.match(k))&&!b(i,u.bools)&&!b(i,u.counts)||/^(true|false)$/.test(g)?(w(i,g),s++):w(i,ne(i))))}else if(c.match(/^-[0-9]$/)&&c.match(k)&&b(c.slice(1),u.bools))i=c.slice(1),w(i,ne(i));else if(c==="--"){ye=r.slice(s+1);break}else if(p["halt-at-non-option"]){ye=r.slice(s);break}else nt(c)}Lt(N,!0),Lt(N,!1),Ls(N),Ts(),Tt(N,u.aliases,E,!0),Ws(N),p["set-placeholder-key"]&&Is(N),Object.keys(u.counts).forEach(function(s){ue(N,s.split("."))||w(s,0)}),R&&ye.length&&(N[D]=[]),ye.forEach(function(s){N[D].push(s)}),p["camel-case-expansion"]&&p["strip-dashed"]&&Object.keys(N).filter(s=>s!=="--"&&s.includes("-")).forEach(s=>{delete N[s]}),p["strip-aliased"]&&[].concat(...Object.keys(f).map(s=>f[s])).forEach(s=>{p["camel-case-expansion"]&&s.includes("-")&&delete N[s.split(".").map(c=>oe(c)).join(".")],delete N[s]});function nt(s){const c=ve("_",s);(typeof c=="string"||typeof c=="number")&&N._.push(c)}function be(s,c,h,l){let i,m=b(c,u.nargs);if(m=typeof m!="number"||isNaN(m)?1:m,m===0)return Y(l)||(G=Error(te("Argument unexpected for: %s",c))),w(c,ne(c)),s;let d=Y(l)?0:1;if(p["nargs-eats-options"])h.length-(s+1)+d<m&&(G=Error(te("Not enough arguments following: %s",c))),d=m;else{for(i=s+1;i<h.length&&(!h[i].match(/^-[^0-9]/)||h[i].match(k)||Ce(h[i]));i++)d++;d<m&&(G=Error(te("Not enough arguments following: %s",c)))}let g=Math.min(d,m);for(!Y(l)&&g>0&&(w(c,l),g--),i=s+1;i<g+s+1;i++)w(c,h[i]);return s+g}function Ee(s,c,h,l){let i=[],m=l||h[s+1];const d=b(c,u.nargs);if(b(c,u.bools)&&!/^(true|false)$/.test(m))i.push(!0);else if(Y(m)||Y(l)&&/^-/.test(m)&&!k.test(m)&&!Ce(m)){if(E[c]!==void 0){const g=E[c];i=Array.isArray(g)?g:[g]}}else{Y(l)||i.push(st(c,l,!0));for(let g=s+1;g<h.length&&!(!p["greedy-arrays"]&&i.length>0||d&&typeof d=="number"&&i.length>=d||(m=h[g],/^-/.test(m)&&!k.test(m)&&!Ce(m)));g++)s=g,i.push(st(c,m,a))}return typeof d=="number"&&(d&&i.length<d||isNaN(d)&&i.length===0)&&(G=Error(te("Not enough arguments following: %s",c))),w(c,i),s}function w(s,c,h=a){if(/-/.test(s)&&p["camel-case-expansion"]){const m=s.split(".").map(function(d){return oe(d)}).join(".");Rt(s,m)}const l=st(s,c,h),i=s.split(".");fe(N,i,l),u.aliases[s]&&u.aliases[s].forEach(function(m){const d=m.split(".");fe(N,d,l)}),i.length>1&&p["dot-notation"]&&(u.aliases[i[0]]||[]).forEach(function(m){let d=m.split(".");const g=[].concat(i);g.shift(),d=d.concat(g),(u.aliases[s]||[]).includes(d.join("."))||fe(N,d,l)}),b(s,u.normalize)&&!b(s,u.arrays)&&[s].concat(u.aliases[s]||[]).forEach(function(d){Object.defineProperty(Ft,d,{enumerable:!0,get(){return c},set(g){c=typeof g=="string"?K.normalize(g):g}})})}function Rt(s,c){u.aliases[s]&&u.aliases[s].length||(u.aliases[s]=[c],$e[c]=!0),u.aliases[c]&&u.aliases[c].length||Rt(c,s)}function st(s,c,h){h&&(c=Gt(c)),(b(s,u.bools)||b(s,u.counts))&&typeof c=="string"&&(c=c==="true");let l=Array.isArray(c)?c.map(function(i){return ve(s,i)}):ve(s,c);return b(s,u.counts)&&(Y(l)||typeof l=="boolean")&&(l=we()),b(s,u.normalize)&&b(s,u.arrays)&&(Array.isArray(c)?l=c.map(i=>K.normalize(i)):l=K.normalize(c)),l}function ve(s,c){return!p["parse-positional-numbers"]&&s==="_"||!b(s,u.strings)&&!b(s,u.bools)&&!Array.isArray(c)&&(lt(c)&&p["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${c}`)))||!Y(c)&&b(s,u.numbers))&&(c=Number(c)),c}function Ls(s){const c=Object.create(null);Tt(c,u.aliases,E),Object.keys(u.configs).forEach(function(h){const l=s[h]||c[h];if(l)try{let i=null;const m=K.resolve(K.cwd(),l),d=u.configs[h];if(typeof d=="function"){try{i=d(m)}catch(g){i=g}if(i instanceof Error){G=i;return}}else i=K.require(m);ot(i)}catch(i){i.name==="PermissionDenied"?G=i:s[h]&&(G=Error(te("Invalid JSON config file: %s",l)))}})}function ot(s,c){Object.keys(s).forEach(function(h){const l=s[h],i=c?c+"."+h:h;typeof l=="object"&&l!==null&&!Array.isArray(l)&&p["dot-notation"]?ot(l,i):(!ue(N,i.split("."))||b(i,u.arrays)&&p["combine-arrays"])&&w(i,l)})}function Ts(){typeof S<"u"&&S.forEach(function(s){ot(s)})}function Lt(s,c){if(typeof v>"u")return;const h=typeof v=="string"?v:"",l=K.env();Object.keys(l).forEach(function(i){if(h===""||i.lastIndexOf(h,0)===0){const m=i.split("__").map(function(d,g){return g===0&&(d=d.substring(h.length)),oe(d)});(c&&u.configs[m.join(".")]||!c)&&!ue(s,m)&&w(m.join("."),l[i])}})}function Ws(s){let c;const h=new Set;Object.keys(s).forEach(function(l){if(!h.has(l)&&(c=b(l,u.coercions),typeof c=="function"))try{const i=ve(l,c(s[l]));[].concat(u.aliases[l]||[],l).forEach(m=>{h.add(m),s[m]=i})}catch(i){G=i}})}function Is(s){return u.keys.forEach(c=>{~c.indexOf(".")||typeof s[c]>"u"&&(s[c]=void 0)}),s}function Tt(s,c,h,l=!1){Object.keys(h).forEach(function(i){ue(s,i.split("."))||(fe(s,i.split("."),h[i]),l&&(jt[i]=!0),(c[i]||[]).forEach(function(m){ue(s,m.split("."))||fe(s,m.split("."),h[i])}))})}function ue(s,c){let h=s;p["dot-notation"]||(c=[c.join(".")]),c.slice(0,-1).forEach(function(i){h=h[i]||{}});const l=c[c.length-1];return typeof h!="object"?!1:l in h}function fe(s,c,h){let l=s;p["dot-notation"]||(c=[c.join(".")]),c.slice(0,-1).forEach(function(j){j=ut(j),typeof l=="object"&&l[j]===void 0&&(l[j]={}),typeof l[j]!="object"||Array.isArray(l[j])?(Array.isArray(l[j])?l[j].push({}):l[j]=[l[j],{}],l=l[j][l[j].length-1]):l=l[j]});const i=ut(c[c.length-1]),m=b(c.join("."),u.arrays),d=Array.isArray(h);let g=p["duplicate-arguments-array"];!g&&b(i,u.nargs)&&(g=!0,(!Y(l[i])&&u.nargs[i]===1||Array.isArray(l[i])&&l[i].length===u.nargs[i])&&(l[i]=void 0)),h===we()?l[i]=we(l[i]):Array.isArray(l[i])?g&&m&&d?l[i]=p["flatten-duplicate-arrays"]?l[i].concat(h):(Array.isArray(l[i][0])?l[i]:[l[i]]).concat([h]):!g&&!!m==!!d?l[i]=h:l[i]=l[i].concat([h]):l[i]===void 0&&m?l[i]=d?h:[h]:g&&!(l[i]===void 0||b(i,u.counts)||b(i,u.bools))?l[i]=[l[i],h]:l[i]=h}function Ps(...s){s.forEach(function(c){Object.keys(c||{}).forEach(function(h){u.aliases[h]||(u.aliases[h]=[].concat(f[h]||[]),u.aliases[h].concat(h).forEach(function(l){if(/-/.test(l)&&p["camel-case-expansion"]){const i=oe(l);i!==h&&u.aliases[h].indexOf(i)===-1&&(u.aliases[h].push(i),$e[i]=!0)}}),u.aliases[h].concat(h).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&p["camel-case-expansion"]){const i=at(l,"-");i!==h&&u.aliases[h].indexOf(i)===-1&&(u.aliases[h].push(i),$e[i]=!0)}}),u.aliases[h].forEach(function(l){u.aliases[l]=[h].concat(u.aliases[h].filter(function(i){return l!==i}))}))})})}function b(s,c){const h=[].concat(u.aliases[s]||[],s),l=Object.keys(c),i=h.find(m=>l.includes(m));return i?c[i]:!1}function Wt(s){const c=Object.keys(u);return[].concat(c.map(l=>u[l])).some(function(l){return Array.isArray(l)?l.includes(s):l[s]})}function Ms(s,...c){return[].concat(...c).some(function(l){const i=s.match(l);return i&&Wt(i[1])})}function Bs(s){if(s.match(k)||!s.match(/^-[^-]+/))return!1;let c=!0,h;const l=s.slice(1).split("");for(let i=0;i<l.length;i++){if(h=s.slice(i+2),!Wt(l[i])){c=!1;break}if(l[i+1]&&l[i+1]==="="||h==="-"||/[A-Za-z]/.test(l[i])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(h)||l[i+1]&&l[i+1].match(/\W/))break}return c}function Ce(s){return p["unknown-options-as-args"]&&zs(s)}function zs(s){return s=s.replace(/^-{3,}/,"--"),s.match(k)||Bs(s)?!1:!Ms(s,/^-+([^=]+?)=[\s\S]*$/,tt,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function ne(s){return!b(s,u.bools)&&!b(s,u.counts)&&`${s}`in E?E[s]:Us(Vs(s))}function Us(s){return{[z.BOOLEAN]:!0,[z.STRING]:"",[z.NUMBER]:void 0,[z.ARRAY]:[]}[s]}function Vs(s){let c=z.BOOLEAN;return b(s,u.strings)?c=z.STRING:b(s,u.numbers)?c=z.NUMBER:b(s,u.bools)?c=z.BOOLEAN:b(s,u.arrays)&&(c=z.ARRAY),c}function Y(s){return s===void 0}function qs(){Object.keys(u.counts).find(s=>b(s,u.arrays)?(G=Error(te("Invalid configuration: %s, opts.count excludes opts.array.",s)),!0):b(s,u.nargs)?(G=Error(te("Invalid configuration: %s, opts.count excludes opts.narg.",s)),!0):!1)}return{aliases:Object.assign({},u.aliases),argv:Object.assign(Ft,N),configuration:p,defaulted:Object.assign({},jt),error:G,newAliases:Object.assign({},$e)}}}function Dt(e){const t=[],n=Object.create(null);let o=!0;for(Object.keys(e).forEach(function(r){t.push([].concat(e[r],r))});o;){o=!1;for(let r=0;r<t.length;r++)for(let a=r+1;a<t.length;a++)if(t[r].filter(function(p){return t[a].indexOf(p)!==-1}).length){t[r]=t[r].concat(t[a]),t.splice(a,1),o=!0;break}}return t.forEach(function(r){r=r.filter(function(f,p,E){return E.indexOf(f)===p});const a=r.pop();a!==void 0&&typeof a=="string"&&(n[a]=r)}),n}function we(e){return e!==void 0?e+1:1}function ut(e){return e==="__proto__"?"___proto___":e}function Gt(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var Se,Oe,_e;const ft=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,ht=(Oe=(Se=process==null?void 0:process.versions)===null||Se===void 0?void 0:Se.node)!==null&&Oe!==void 0?Oe:(_e=process==null?void 0:process.version)===null||_e===void 0?void 0:_e.slice(1);if(ht&&Number(ht.match(/^([^.]+)/)[1])<ft)throw Error(`yargs parser supports a minimum Node.js version of ${ft}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const kt=process?process.env:{},pt=new qt({cwd:process.cwd,env:()=>kt,format:J.format,normalize:W.normalize,resolve:W.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(ee.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),re=function(t,n){return pt.parse(t.slice(),n).argv};re.detailed=function(e,t){return pt.parse(e.slice(),t)},re.camelCase=oe,re.decamelize=at,re.looksLikeNumber=lt;const Kt={right:Jt,center:en},Qt=0,he=1,Xt=2,pe=3;class Yt{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(o=>typeof o=="string"?this.colFromString(o):o);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(r=>r.split("	"));let o=0;return n.forEach(r=>{r.length>1&&I.stringWidth(r[0])>o&&(o=Math.min(Math.floor(this.width*.5),I.stringWidth(r[0])))}),n.forEach(r=>{this.div(...r.map((a,f)=>({text:a.trim(),padding:this.measurePadding(a),width:f===0&&r.length>1?o:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=I.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((o,r)=>{let a="";o.forEach((f,p)=>{const{width:E}=t[p],S=this.negatePadding(t[p]);let v=f;if(S>I.stringWidth(f)&&(v+=" ".repeat(S-I.stringWidth(f))),t[p].align&&t[p].align!=="left"&&this.wrap){const D=Kt[t[p].align];v=D(v,S),I.stringWidth(v)<S&&(v+=" ".repeat((E||0)-I.stringWidth(v)-1))}const R=t[p].padding||[0,0,0,0];R[pe]&&(a+=" ".repeat(R[pe])),a+=dt(t[p],v,"| "),a+=v,a+=dt(t[p],v," |"),R[he]&&(a+=" ".repeat(R[he])),r===0&&n.length>0&&(a=this.renderInline(a,n[n.length-1]))}),n.push({text:a.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const o=t.match(/^ */),r=o?o[0].length:0,a=n.text,f=I.stringWidth(a.trimRight());return n.span?this.wrap?r<f?t:(n.hidden=!0,a.trimRight()+" ".repeat(r-f)+t.trimLeft()):(n.hidden=!0,a+t):t}rasterize(t){const n=[],o=this.columnWidths(t);let r;return t.forEach((a,f)=>{a.width=o[f],this.wrap?r=I.wrap(a.text,this.negatePadding(a),{hard:!0}).split(`
`):r=a.text.split(`
`),a.border&&(r.unshift("."+"-".repeat(this.negatePadding(a)+2)+"."),r.push("'"+"-".repeat(this.negatePadding(a)+2)+"'")),a.padding&&(r.unshift(...new Array(a.padding[Qt]||0).fill("")),r.push(...new Array(a.padding[Xt]||0).fill(""))),r.forEach((p,E)=>{n[E]||n.push([]);const S=n[E];for(let v=0;v<f;v++)S[v]===void 0&&S.push("");S.push(p)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[pe]||0)+(t.padding[he]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(f=>f.width||I.stringWidth(f.text));let n=t.length,o=this.width;const r=t.map(f=>{if(f.width)return n--,o-=f.width,f.width}),a=n?Math.floor(o/n):0;return r.map((f,p)=>f===void 0?Math.max(a,Zt(t[p])):f)}}function dt(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function Zt(e){const t=e.padding||[],n=1+(t[pe]||0)+(t[he]||0);return e.border?n+4:n}function Ht(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Jt(e,t){e=e.trim();const n=I.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function en(e,t){e=e.trim();const n=I.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let I;function tn(e,t){return I=t,new Yt({width:e?.width||Ht(),wrap:e?.wrap})}const mt=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function gt(e){return e.replace(mt,"")}function nn(e,t){const[n,o]=e.match(mt)||["",""];e=gt(e);let r="";for(let a=0;a<e.length;a++)a!==0&&a%t===0&&(r+=`
`),r+=e.charAt(a);return n&&o&&(r=`${n}${r}${o}`),r}function sn(e){return tn(e,{stringWidth:t=>[...t].length,stripAnsi:gt,wrap:nn})}function on(e,t){let n=W.resolve(".",e),o;for(ee.statSync(n).isDirectory()||(n=W.dirname(n));;){if(o=t(n,ee.readdirSync(n)),o)return W.resolve(n,o);if(n=W.dirname(o=n),o===n)break}}const rn={fs:{readFileSync:ee.readFileSync,writeFile:ee.writeFile},format:J.format,resolve:W.resolve,exists:e=>{try{return ee.statSync(e).isFile()}catch{return!1}}};let U;class cn{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let o=function(){};return typeof t[t.length-1]=="function"&&(o=t.pop()),o=o||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o(),U.format.apply(U.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),o=t.shift(),r=t.shift();let a=function(){};typeof t[t.length-1]=="function"&&(a=t.pop()),this.cache[this.locale]||this._readLocaleFile();let f=r===1?n:o;this.cache[this.locale][n]&&(f=this.cache[this.locale][n][r===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:o},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:a})):a();const p=[f];return~f.indexOf("%d")&&p.push(r),U.format.apply(U.format,p.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let o="";return t.forEach(function(r,a){const f=n[a+1];o+=r,typeof f<"u"&&(o+="%s")}),this.__.apply(this,[o].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],o=n.directory,r=n.locale,a=n.cb,f=this._resolveLocaleFile(o,r),p=JSON.stringify(this.cache[r],null,2);U.fs.writeFile(f,p,"utf-8",function(E){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),a(E)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{U.fs.readFileSync&&(t=JSON.parse(U.fs.readFileSync(n,"utf-8")))}catch(o){if(o instanceof SyntaxError&&(o.message="syntax error in "+n),o.code==="ENOENT")t={};else throw o}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let o=U.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(o)&&~n.lastIndexOf("_")){const r=U.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(r)&&(o=r)}return o}_fileExistsSync(t){return U.exists(t)}}function an(e,t){U=t;const n=new cn(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const ln=e=>an(e,rn),un="require is not supported by ESM",$t="loading a directory of commands is not supported yet for ESM";let ie;try{ie=It.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:it&&it.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{ie=process.cwd()}const fn=ie.substring(0,ie.lastIndexOf("node_modules"));rt.notStrictEqual,rt.strictEqual,J.inspect,fn||process.cwd(),W.basename,W.dirname,W.extname,W.relative,W.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,ee.readFileSync,ln({directory:W.resolve(ie,"../../../locales"),updateFiles:!1});const ce="\x1B[44m",F="\x1B[43m",Z="\x1B[41m",hn="\x1B[42m",C="\x1B[0m",A="\x1B[33m",x="\x1B[36m",$="\x1B[0m",ae=Object.keys({"vue-caution":["implicitParentChildCommunication","elementSelectorsWithScoped"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-recommended":["topLevelElementOrder","elementAttributeOrder"],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression","fullWordComponentName"],rrd:["cyclomaticComplexity","elseCondition","functionSize","parameterCount","plainScript","scriptLenght","shortVariableName","tooManyProps"]}),Ne=100,je=[],pn=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>Ne&&je.push({fileName:t,scriptLength:n.length})},dn=()=>{const e=[];return je.length>0&&je.forEach(t=>{e.push({file:t.fileName,rule:`${x}rrd ~ Long <script> blocks${$}`,description:`👉 ${A}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${Ne} lines.${$}`,message:`${t.scriptLength>Ne*2?Z:F}(${t.scriptLength} lines)${C} 🚨`})}),e},Fe=[],mn=(e,t)=>{!e||!e.setup||Fe.push(t)},gn=()=>{const e=[];return Fe.length>0&&Fe.forEach(t=>{e.push({file:t,rule:`${x}rrd ~ Plain <script> blocks${$}`,description:`👉 ${A} Consider using <script setup> to leverage the new SFC <script> syntax.${$}`,message:"🚨"})}),e},$n=/^(\(.*\)|\\?.)$/;function H(e){const t=e.toString();return $n.test(t)?t:`(?:${t})`}const yn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,bn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function y(e){const t=n=>y(`(?<${n}>${`${e}`.replace(yn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>y(`${e}${V(...n)}`),{referenceTo:n=>y(`${e}\\k<${n}>`)}),or:(...n)=>y(`(?:${e}|${V(...n)})`),after:(...n)=>y(`(?<=${V(...n)})${e}`),before:(...n)=>y(`${e}(?=${V(...n)})`),notAfter:(...n)=>y(`(?<!${V(...n)})${e}`),notBefore:(...n)=>y(`${e}(?!${V(...n)})`),times:Object.assign(n=>y(`${H(e)}{${n}}`),{any:()=>y(`${H(e)}*`),atLeast:n=>y(`${H(e)}{${n},}`),atMost:n=>y(`${H(e)}{0,${n}}`),between:(n,o)=>y(`${H(e)}{${n},${o}}`)}),optionally:()=>y(`${H(e)}?`),as:t,groupedAs:t,grouped:()=>y(`${e}`.replace(bn,"($1$3)$2")),at:{lineStart:()=>y(`^${e}`),lineEnd:()=>y(`${e}$`)}}}const En=/[.*+?^${}()|[\]\\/]/g;function Re(e){return y(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function M(e){return y(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}const vn=y(".");y("\\b\\w+\\b");const de=y("\\w"),B=y("\\b");y("\\d");const Cn=y("\\s"),le=Object.assign(y("[a-zA-Z]"),{lowercase:y("[a-z]"),uppercase:y("[A-Z]")}),yt=y("\\t"),An=y("\\n");y("\\r"),y("\\W+"),y("\\W"),y("\\B"),y("\\D"),y("\\S"),Object.assign(y("[^a-zA-Z]"),{lowercase:y("[^a-z]"),uppercase:y("[^A-Z]")}),y("[^\\t]"),y("[^\\n]"),y("[^\\r]");function Q(...e){return y(`${H(V(...e))}?`)}function V(...e){return y(e.map(t=>typeof t=="string"?t.replace(En,"\\$&"):t).join(""))}function O(...e){return y(`${H(V(...e))}+`)}const q="i",P="g",_=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(V(...e).toString(),[...t||""].join(""))},Le=[],xn=(e,t)=>{if(!e)return;const n=_(B,"else",B,[P,q]),o=e.content.match(n);o?.length&&Le.push({fileName:t,elseCount:o.length})},wn=()=>{const e=[];return Le.length>0&&Le.forEach(t=>{e.push({file:t.fileName,rule:`${x}rrd ~ else conditions${$}`,description:`👉 ${A}Try to rewrite the conditions in a way that the else clause is not necessary.${$}`,message:`else clauses found ${Z}(${t.elseCount})${C} 🚨`})}),e},Sn=5,On=10,Te=[],_n=(e,t)=>{if(!e)return;const n=_(B,"if",B,[P,q]),o=_(B,"else",B,[P,q]),r=_(B,"for",B,[P,q]),a=_(B,"while",B,[P,q]),f=_(B,"case",B,[P,q]),p=e.content.match(n),E=e.content.match(o),S=e.content.match(r),v=e.content.match(a),R=e.content.match(f),D=(p?.length||0)+(E?.length||0)+(S?.length||0)+(v?.length||0)+(R?.length||0);D>Sn&&Te.push({fileName:t,cyclomaticComplexity:D})},Nn=()=>{const e=[];return Te.length>0&&Te.forEach(t=>{e.push({file:t.fileName,rule:`${x}rrd ~ cyclomatic complexity${$}`,description:`👉 ${A}Try to reduce complexity.${$}`,message:`${t.cyclomaticComplexity>On?Z:F}(${t.cyclomaticComplexity})${C} 🚨`})}),e},We=[],jn=e=>{if(e.includes("pages"))return;const t=xe.basename(e);if(t==="App.vue")return;const n=_(le.uppercase);t.slice(1).match(n)?.length||We.push({filePath:e})},Fn=()=>{const e=[];return We.length>0&&We.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ single name component${$}`,description:`👉 ${A}Rename the component to use multi-word name.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`,message:"🚨"})}),e},Ie=[],Rn=(e,t)=>{e&&e.forEach(n=>{n.scoped||Ie.push({filePath:t})})},Ln=()=>{const e=[];return Ie.length>0&&Ie.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ global style${$}`,description:`👉 ${A}Use <style scoped>.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`,message:"🚨"})}),e},Pe=[],Tn=(e,t)=>{if(!e)return;const n=_("defineProps([",[P,q]);e.content.match(n)?.length&&Pe.push({filePath:t})},Wn=()=>{const e=[];return Pe.length>0&&Pe.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ simple prop${$}`,description:`👉 ${A}Add at least type definition.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`,message:"🚨"})}),e},Me=[],In=(e,t)=>{if(!e)return;const n=_("<",O(M(">"))," v-if",O(M(">"))," v-for",O(M(">")),">",[P,q]),o=_("<",O(M(">"))," v-for",O(M(">"))," v-if",O(M(">")),">",[P,q]),r=e.content.match(n),a=e.content.match(o);(r?.length||a?.length)&&Me.push({filePath:t})},Pn=()=>{const e=[];return Me.length>0&&Me.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-if used with v-for${$}`,description:`👉 ${A}Move out the v-if to a computed property.${$} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`,message:"🚨"})}),e},Be=[],Mn=(e,t)=>{if(!e)return;const n=_("<",O(M(">"))," v-for",O(M(">")),">",[P,q]),o=e.content.match(n);o?.length&&(o.some(a=>a.includes(":key"))||Be.push({filePath:t}))},Bn=()=>{const e=[];return Be.length>0&&Be.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-for has no key${$}`,description:`👉 ${A}Add a \`:key\` property to all v-for.${$} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`,message:"🚨"})}),e},ze=[],zn=e=>{if(e.includes("pages")||e.includes("layouts"))return;const t=xe.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,o=t.match(n),r=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,a=t.match(r);!o?.length&&!a?.length&&ze.push({fileName:e})},Un=()=>{const e=[];return ze.length>0&&ze.forEach(t=>{e.push({file:t.fileName,rule:`${x}vue-strong ~ component name is not PascalCase and not kebab-case${$}`,description:`👉 ${A}Rename the component to use PascalCase or kebab-case file name.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`,message:"🚨"})}),e},Ue=[],Vn=_(O(le.lowercase).at.lineStart(),O(le.uppercase,le.lowercase.times.any().grouped()).at.lineEnd()),qn=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let o;for(;(o=n.exec(e.content))!==null;)o[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(a=>a.split(":")[0]).filter(a=>a.length).filter(a=>!Vn.test(a)).length&&Ue.push({filePath:t})},Dn=()=>{const e=[];return Ue.length>0&&Ue.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ prop names are not camelCased${$}`,description:`👉 ${A}Rename the props to camelCase.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`,message:"🚨"})}),e},X=(e,t)=>{if(!t.includes(`
`))return e.split(`
`).findIndex(f=>f.includes(t))+1;const n=e.indexOf(t),o=e.slice(0,n).split(`
`).length,r=t.split(`
`).length;return o+r-1},Ve=[],Gn=40,kn=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(r=>r[1].trim()).forEach(r=>{if(r.length>Gn){const a=X(e.content,r),f=r.split(`
`).at(0)?.trim()||"";Ve.push({filename:t,message:`line #${a} ${F}${f}${C}`})}})},Kn=()=>{const e=[];return Ve.length>0&&Ve.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ lengthy template expression${$}`,description:`👉 ${A}Refactor the expression into a computed property.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-expressions-in-templates`,message:`${t.message} 🚨`})}),e},qe=[],Qn=(e,t)=>{if(!e)return;const n=e.template,o=_("<",O(de),Q(O(Re(` 	
\r`))),O(M("/>")),Q(O(Re(` 	
\r`))),Q("/"),">",["g"]),r=n.content.match(o);if(r===null)return;const a=_(":",O(de),Q(" "),"=",Q(" "),M(`'"`),["g"]);r.forEach(f=>{if(!f.includes(":"))return;const p=f.match(a);if(p?.length){const E=X(e.source,f);qe.push({filename:t,message:`line #${E} ${F}${p}${C}`})}})},Xn=()=>{const e=[];return qe.length>0&&qe.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ attribute value is not quoted${$}`,description:`👉 ${A}Use quotes for attribute values.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#quoted-attribute-values`,message:`${t.message} 🚨`})}),e},De=[],Yn=(e,t)=>{if(!e)return;const n=e.template,o=_("<",O(le.uppercase,de),Q(An,yt),Q(O(M(">"))),"></",O(de),">",["g"]),r=n.content.match(o);r!==null&&r.forEach(a=>{const f=X(e.source,a),p=a.split(`
`).at(-1)?.trim()||"";De.push({filename:t,message:`line #${f} ${F}${p}${C}`})})},Zn=()=>{const e=[];return De.length>0&&De.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ component is not self closing${$}`,description:`👉 ${A}Components with no content should be self-closing.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#self-closing-components`,message:`${t.message} 🚨`})}),e},Ge=[],bt=[],Hn=["v-slot","v-bind","v-on"],Jn=(e,t)=>{if(!e)return;const n=e.template;Hn.forEach(o=>{if(n.content.includes(`${o}:`)){const r=X(e.source,o);Ge.push({filename:t,message:`line #${r} ${F}${o}${C}`}),bt.some(a=>a.filePath===t)||bt.push({filePath:t})}})},es=()=>{const e=[];return Ge.length>0&&Ge.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ directive shorthands not used${$}`,description:`👉 ${A}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#directive-shorthands`,message:`${t.message} 🚨`})}),e},ke=[],ts=3,ns=e=>{const t=_(O(M("/")).grouped(),V(".vue").at.lineEnd()),n=e.match(t);if(n){const o=n[0]?.split(".vue")[0],r=_(Re("bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ"),[P]),a=o.match(r);(!a||a.length<ts)&&ke.push({filename:o,filePath:e})}},ss=()=>{const e=[];return ke.length>0&&ke.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ full-word component names${$}`,description:`👉 ${A}Component names should prefer full words over abbreviations.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#full-word-component-names`,message:`${F}(${t.filename})${C} 🚨`})}),e},Ke=[],os=(e,t)=>{const n=e.toString(),o=n.indexOf("<script setup>"),r=n.indexOf("<template>"),a=n.indexOf("<style>"),f=[{name:"script",index:o},{name:"template",index:r},{name:"style",index:a}].filter(E=>E.index!==-1);f.every((E,S)=>S===0?!0:f[S-1].index<E.index)||Ke.push({filename:t})},rs=()=>{const e=[];return Ke.length>0&&Ke.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-recommended ~ top level element order${$}`,description:`👉 ${A}Single-File Components should always order <script>, <template>, and <style> tags consistently.${$} See: https://vuejs.org/style-guide/rules-recommended.html#single-file-component-top-level-element-order`,message:"🚨"})}),e},Qe=[],Et=["is","v-for","v-if","v-else-if","v-else","v-show","v-cloak","v-pre","v-once","id","ref","key","v-model","v-on","v-html","v-text"],is=(e,t)=>{if(!e)return;const n=e.content.replace(/<\/?template>/g,""),o=/<(\w+)(\s[^>]+)?>/g,r=/(\w+(?:-\w+)*)(?:="[^"]*")?/g;let a;for(;(a=o.exec(n))!==null;){const f=a[1],p=a[2];if(p){const S=Array.from(p.matchAll(r),R=>R[1]).filter(R=>Et.includes(R));let v=-1;for(const R of S){const D=Et.indexOf(R);if(D!==-1&&D<v){Qe.push({filename:t,message:`tag has attributes out of order ${F}(${f})${C}`});break}v=D}}}},cs=()=>{const e=[];return Qe.length>0&&Qe.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-recommended ~ element attribute order${$}`,description:`👉 ${A}The attributes of elements (including components) should be ordered consistently.${$} See: https://vuejs.org/style-guide/rules-recommended.html#element-attribute-order`,message:`${t.message} 🚨`})}),e},Xe=[],as=5,ls=(e,t)=>{if(!e)return;const n=_("defineProps",Q("<"),Q("("),"{",O(vn),"}",["g","s"]),o=e.content.match(n);if(o?.length){const r=o[0].split(",").length;r>as&&Xe.push({fileName:t,propsCount:r})}},us=()=>{const e=[];return Xe.length>0&&Xe.forEach(t=>{e.push({file:t.fileName,rule:`${x}rrd ~ too many props${$}`,description:`👉 ${A}Try to refactor your code to use less properties.${$}`,message:`props found ${Z}(${t.propsCount})${C} 🚨`})}),e},Ye=[],vt=20,fs=(e,t)=>{if(!e)return;const n=/function\s+([\w$]+)\s*\([^)]*\)\s*\{([^{}]*(([^{}]*\{[^{}]*\}[^{}]*)*[^{}]*))\}|const\s+([\w$]+)\s*=\s*\([^)]*\)\s*=>\s*\{([^{}]*(([^{}]*\{[^{}]*\}[^{}]*)*[^{}]*))\}/g;let o;for(;(o=n.exec(e.content))!==null;){const r=o[1]||o[5];(o[2]||o[6]).split(`
`).length>vt&&Ye.push({filename:t,funcName:r})}},hs=()=>{const e=[];return Ye.length>0&&Ye.forEach(t=>{e.push({file:t.filename,rule:`${x}rrd ~ function size${$}`,description:`👉 ${A}Functions must be shorter than ${vt} lines${$}`,message:`function ${Z}(${t.funcName})${C} 🚨`})}),e},Ze=[],Ct=3,At=(e,t,n)=>{const o=t.split(",").map(r=>r.trim()).filter(r=>r.length>0);o.length>Ct&&Ze.push({filename:n,funcName:e,paramsCount:o.length})},ps=(e,t)=>{if(!e)return;const n=/function\s+([\w$]+)\s*\(([^)]*)\)\s*\{|const\s+([\w$]+)\s*=\s*\(([^)]*)\)\s*=>\s*\{/g;let o;for(;(o=n.exec(e.content))!==null;)o[1]?At(o[1],o[2],t):o[3]&&At(o[3],o[4],t)},ds=()=>{const e=[];return Ze.length>0&&Ze.forEach(t=>{e.push({file:t.filename,rule:`${x}rrd ~ parameter count${$}`,description:`👉 ${A}Max number of function parameters should be ${Ct}${$}`,message:`function ${F}${t.funcName}${C} has ${F}${t.paramsCount}${C} parameters 🚨`})}),e},xt=4,He=[],ms=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][\w$]*)/g;let o;for(;(o=n.exec(e.content))!==null;){const r=o[1];r.length<xt&&He.push({filename:t,variable:r})}},gs=()=>{const e=[];return He.length>0&&He.forEach(t=>{e.push({file:t.filename,rule:`${x}rrd ~ short variable names${$}`,description:`👉 ${A}Variable names must have a minimum length of ${xt}${$}`,message:`${Z}(${t.variable})${C} 🚨`})}),e},wt=[],me=[],$s=5,ys=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,o=e.content.match(n);o?.length&&o.forEach(r=>{if(r.split(`
`).length>$s){const a=r.split(`
`)[0],f=X(e.content,a);wt.push({filename:t,message:`line #${f} ${F}computed${C}`}),me.push({filePath:t}),me.some(p=>p.filePath===t)||me.push({filePath:t})}})},bs=()=>{const e=[];return me.length>0&&wt.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ complicated computed property${$}`,description:`👉 ${A}Refactor the computed properties to smaller ones.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-computed-properties`,message:`${t.message} 🚨`})}),e},Je=[],Es=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(r=>r[1].trim()).forEach(r=>{const a=X(e.content.trim(),r),f=r.split(`
`).at(0)?.trim()||"";Je.push({filename:t,message:`line #${a} ${F}(${f})${C}`})})},vs=()=>{const e=[];return Je.length>0&&Je.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-strong ~ component files${$}`,description:`👉 ${A}Whenever a build system is available to concatenate files, each component should be in its own file.${$} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#component-files`,message:`${t.message} 🚨`})}),e},ge=[],Cs=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,o=/v-model\s*=\s*"([^"]+)"/,r=_(V("$parent").or("getCurrentInstance"),[P]),a=e.content.match(n),f=e.content.match(o);if(f){const E=f[1].split(".")[0],S=a?a[1]:"";if(S.includes(E)){const v=X(e.content.trim(),S);ge.push({filename:t,message:`line #${v} ${F}(${E})${C}`})}}const p=e.content.match(r);if(p){const E=X(e.content.trim(),p[0]);ge.push({filename:t,message:`line #${E} ${F}(${p[0]})${C}`})}},As=()=>{const e=[];return ge.length>0&&ge.forEach(t=>{e.push({file:t.filename,rule:`${x}vue-caution ~ implicit parent-child communication${$}`,description:`👉 ${A}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${$} See: https://vuejs.org/style-guide/rules-use-with-caution.html#implicit-parent-child-communication`,message:`${t.message} 🚨`})}),e},et=[],St=5,xs=3,ws=(e,t)=>{if(!e)return;const n=_(yt.times.atLeast(St).or(Cn.times.atLeast(xs*St)),[P,q]);e.content.match(n)?.forEach(r=>{const a=X(e.content,r);et.push({filePath:t,message:`line #${a} ${F}indentation: ${r.length}${C}`})})},Ss=()=>{const e=[];return et.length>0&&et.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ deep indentation${$}`,description:`👉 ${A}Try to refactor your component to child components, to avoid deep indentations..${$}`,message:`${t.message} 🚨`})}),e},Os=e=>{let t=0;const n={},o=({file:a,rule:f,title:p,description:E,message:S})=>{const v=e==="rule"?f:a;n[v]||(n[v]=[]),n[v].push({file:a,rule:f,title:p,description:E,message:S})},r=a=>{a().forEach(p=>{o(p),t++})};return r(Fn),r(Wn),r(Bn),r(Pn),r(Ln),r(Un),r(Zn),r(Dn),r(Kn),r(Xn),r(es),r(bs),r(vs),r(ss),r(rs),r(cs),r(As),r(Nn),r(Ss),r(wn),r(hs),r(ds),r(gn),r(dn),r(gs),r(us),Object.keys(n).forEach(a=>{console.log(`
 - ${a}`),n[a].forEach(f=>{console.log(e==="file"?`   Rule: ${f.rule}`:`   File: ${f.file}`),console.log(`   Description: ${f.description}`),console.log(`   Message: ${f.message||"🚨"}
`)})}),t},_s=(e,t)=>{if(!e)return;const n=/([a-z]+)\s*\{[^}]*\}/gi;e.forEach(o=>{let r;for(;(r=n.exec(o.content))!==null;)r[1]})},Ns=(e,t,n)=>{const o=e.scriptSetup||e.script;n.includes("vue-essential")&&(jn(t),Tn(o,t),Rn(e.styles,t),Mn(e.template,t),In(e.template,t)),n.includes("vue-strong")&&(zn(t),qn(o,t),Es(o,t),ys(o,t),Yn(e,t),kn(e.template,t),Qn(e,t),Jn(e,t),ns(t)),n.includes("vue-recommended")&&(os(e.source,t),is(e.template,t)),n.includes("vue-caution")&&(Cs(o,t),_s(e.styles)),n.includes("rrd")&&(_n(o,t),ws(o,t),xn(o,t),fs(o,t),ps(o,t),mn(e.script,t),pn(o,t),ms(o,t),ls(o,t))};let Ot=0;const js=["src","components","pages","layouts","server","composables","store","utils","plugins","middleware"],_t=(e,t)=>{const n=Ae.readdirSync(e);Ot+=n.length;for(const o of n){const r=xe.join(e,o);Ae.statSync(r).isDirectory()?js.some(a=>r.includes(a))&&_t(r,t):o.endsWith(".vue")&&t(r)}},Fs=(e,t=[],n)=>{console.log(`

${ce}Analyzing Vue files in ${e}${C}`);const o=ae.filter(r=>!t.includes(r));console.log(`Applying ${t.length} rulesets ${ce}${t}${C} and ignoring ${o.length} rulesets ${ce}${o}${C} grouping by ${ce}${n}${C}`),_t(e,r=>{if(r.includes("App.vue")||r.includes("app.vue"))return;const a=Ae.readFileSync(r,"utf-8"),{descriptor:f}=Pt.parse(a);Ns(f,r,t)}),console.log(`Found ${ce}${Ot}${C} Vue files`),Os(n)||console.log(`${hn}No code smells detected!${C}`)};T(zt(process.argv)).command("analyze [path]","Analyze Vue files for code smells",e=>e.positional("path",{describe:"path to the Vue files",type:"string",default:"./"}).option("ignore",{describe:"Comma-separated list of rulesets to ignore",type:"string",coerce:Nt("ignore")}).option("apply",{describe:"Comma-separated list of rulesets to apply",type:"string",coerce:Nt("apply")}).option("group",{describe:"Group results by rule or file",type:"string",coerce:t=>Rs(t),default:"rule"}).check(t=>(t.ignore&&t.apply&&(console.error(`
${Z}Cannot use both --ignore and --apply options together.${C}.

`),process.exit(1)),!0)),e=>{let t=[...ae];e.apply&&(t=e.apply),e.ignore&&(t=ae.filter(n=>!e.ignore.includes(n))),Fs(e.path,t,e.group)}).help().argv;function Nt(e){return t=>{const n=t.split(","),o=n.filter(r=>!ae.includes(r));return o.length>0&&(console.error(`
${Z}Invalid ${e} values: ${o.join(", ")}${C}. 
${A}Allowed values are: ${[...ae].join(", ")}${$}

`),process.exit(1)),n}}function Rs(e){return["rule","file"].includes(e)||process.exit(1),e}});
