(function(P,te){typeof exports=="object"&&typeof module<"u"?te(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],te):(P=typeof globalThis<"u"?globalThis:P||self,te(P.yargs,P.util,P.path,P.fs,P.assert,P.url,P.compilerSfc))})(this,function(P,te,L,Z,ct,It,Bt){"use strict";var lt=typeof document<"u"?document.currentScript:null;class re extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,re)}}function at(){return Mt()?0:1}function Mt(){return zt()&&!process.defaultApp}function zt(){return!!process.versions.electron}function Pt(e){return e.slice(at()+1)}function qt(){return process.argv[at()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function ie(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",o=!1;const i=e.match(/^-+/);for(let l=i?i[0].length:0;l<e.length;l++){let h=e.charAt(l);o&&(o=!1,h=h.toUpperCase()),l!==0&&(h==="-"||h==="_")?o=!0:h!=="-"&&h!=="_"&&(n+=h)}return n}}function ut(e,t){const n=e.toLowerCase();t=t||"-";let o="";for(let i=0;i<e.length;i++){const l=n.charAt(i),h=e.charAt(i);l!==h&&i>0?o+=`${t}${n.charAt(i)}`:o+=h}return o}function ft(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function Ut(e){if(Array.isArray(e))return e.map(h=>typeof h!="string"?h+"":h);e=e.trim();let t=0,n=null,o=null,i=null;const l=[];for(let h=0;h<e.length;h++){if(n=o,o=e.charAt(h),o===" "&&!i){n!==" "&&t++;continue}o===i?i=null:(o==="'"||o==='"')&&!i&&(i=o),l[t]||(l[t]=""),l[t]+=o}return l}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var q;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(q||(q={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let Q;class Vt{constructor(t){Q=t}parse(t,n){const o=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),i=Ut(t),l=typeof t=="string",h=Dt(Object.assign(Object.create(null),o.alias)),p=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},o.configuration),v=Object.assign(Object.create(null),o.default),O=o.configObjects||[],x=o.envPrefix,T=p["populate--"],G=T?"--":"_",Ve=Object.create(null),jt=Object.create(null),ne=o.__||Q.format,u={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},K=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,ot=new RegExp("^--"+p["negation-prefix"]+"(.+)");[].concat(o.array||[]).filter(Boolean).forEach(function(s){const c=typeof s=="object"?s.key:s,f=Object.keys(s).map(function(a){return{boolean:"bools",string:"strings",number:"numbers"}[a]}).filter(Boolean).pop();f&&(u[f][c]=!0),u.arrays[c]=!0,u.keys.push(c)}),[].concat(o.boolean||[]).filter(Boolean).forEach(function(s){u.bools[s]=!0,u.keys.push(s)}),[].concat(o.string||[]).filter(Boolean).forEach(function(s){u.strings[s]=!0,u.keys.push(s)}),[].concat(o.number||[]).filter(Boolean).forEach(function(s){u.numbers[s]=!0,u.keys.push(s)}),[].concat(o.count||[]).filter(Boolean).forEach(function(s){u.counts[s]=!0,u.keys.push(s)}),[].concat(o.normalize||[]).filter(Boolean).forEach(function(s){u.normalize[s]=!0,u.keys.push(s)}),typeof o.narg=="object"&&Object.entries(o.narg).forEach(([s,c])=>{typeof c=="number"&&(u.nargs[s]=c,u.keys.push(s))}),typeof o.coerce=="object"&&Object.entries(o.coerce).forEach(([s,c])=>{typeof c=="function"&&(u.coercions[s]=c,u.keys.push(s))}),typeof o.config<"u"&&(Array.isArray(o.config)||typeof o.config=="string"?[].concat(o.config).filter(Boolean).forEach(function(s){u.configs[s]=!0}):typeof o.config=="object"&&Object.entries(o.config).forEach(([s,c])=>{(typeof c=="boolean"||typeof c=="function")&&(u.configs[s]=c)})),zo(o.key,h,o.default,u.arrays),Object.keys(v).forEach(function(s){(u.aliases[s]||[]).forEach(function(c){v[c]=v[s]})});let k=null;Go();let De=[];const F=Object.assign(Object.create(null),{_:[]}),Ft={};for(let s=0;s<i.length;s++){const c=i[s],f=c.replace(/^-{3,}/,"---");let a,r,m,d,g,R;if(c!=="--"&&/^-/.test(c)&&Ke(c))st(c);else if(f.match(/^---+(=|$)/)){st(c);continue}else if(c.match(/^--.+=/)||!p["short-option-groups"]&&c.match(/^-.+=/))d=c.match(/^--?([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&(E(d[1],u.arrays)?s=ke(s,d[1],i,d[2]):E(d[1],u.nargs)!==!1?s=Ge(s,d[1],i,d[2]):w(d[1],d[2],!0));else if(c.match(ot)&&p["boolean-negation"])d=c.match(ot),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],w(r,E(r,u.arrays)?[!1]:!1));else if(c.match(/^--.+/)||!p["short-option-groups"]&&c.match(/^-[^-]+/))d=c.match(/^--?(.+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],E(r,u.arrays)?s=ke(s,r,i):E(r,u.nargs)!==!1?s=Ge(s,r,i):(g=i[s+1],g!==void 0&&(!g.match(/^-/)||g.match(K))&&!E(r,u.bools)&&!E(r,u.counts)||/^(true|false)$/.test(g)?(w(r,g),s++):w(r,se(r))));else if(c.match(/^-.\..+=/))d=c.match(/^-([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&w(d[1],d[2]);else if(c.match(/^-.\..+/)&&!c.match(K))g=i[s+1],d=c.match(/^-(.\..+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],g!==void 0&&!g.match(/^-/)&&!E(r,u.bools)&&!E(r,u.counts)?(w(r,g),s++):w(r,se(r)));else if(c.match(/^-[^-]+/)&&!c.match(K)){m=c.slice(1,-1).split(""),a=!1;for(let W=0;W<m.length;W++){if(g=c.slice(W+2),m[W+1]&&m[W+1]==="="){R=c.slice(W+3),r=m[W],E(r,u.arrays)?s=ke(s,r,i,R):E(r,u.nargs)!==!1?s=Ge(s,r,i,R):w(r,R),a=!0;break}if(g==="-"){w(m[W],g);continue}if(/[A-Za-z]/.test(m[W])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(g)&&E(g,u.bools)===!1){w(m[W],g),a=!0;break}if(m[W+1]&&m[W+1].match(/\W/)){w(m[W],g),a=!0;break}else w(m[W],se(m[W]))}r=c.slice(-1)[0],!a&&r!=="-"&&(E(r,u.arrays)?s=ke(s,r,i):E(r,u.nargs)!==!1?s=Ge(s,r,i):(g=i[s+1],g!==void 0&&(!/^(-|--)[^-]/.test(g)||g.match(K))&&!E(r,u.bools)&&!E(r,u.counts)||/^(true|false)$/.test(g)?(w(r,g),s++):w(r,se(r))))}else if(c.match(/^-[0-9]$/)&&c.match(K)&&E(c.slice(1),u.bools))r=c.slice(1),w(r,se(r));else if(c==="--"){De=i.slice(s+1);break}else if(p["halt-at-non-option"]){De=i.slice(s);break}else st(c)}Lt(F,!0),Lt(F,!1),Wo(F),Io(),Tt(F,u.aliases,v,!0),Bo(F),p["set-placeholder-key"]&&Mo(F),Object.keys(u.counts).forEach(function(s){Be(F,s.split("."))||w(s,0)}),T&&De.length&&(F[G]=[]),De.forEach(function(s){F[G].push(s)}),p["camel-case-expansion"]&&p["strip-dashed"]&&Object.keys(F).filter(s=>s!=="--"&&s.includes("-")).forEach(s=>{delete F[s]}),p["strip-aliased"]&&[].concat(...Object.keys(h).map(s=>h[s])).forEach(s=>{p["camel-case-expansion"]&&s.includes("-")&&delete F[s.split(".").map(c=>ie(c)).join(".")],delete F[s]});function st(s){const c=Ze("_",s);(typeof c=="string"||typeof c=="number")&&F._.push(c)}function Ge(s,c,f,a){let r,m=E(c,u.nargs);if(m=typeof m!="number"||isNaN(m)?1:m,m===0)return J(a)||(k=Error(ne("Argument unexpected for: %s",c))),w(c,se(c)),s;let d=J(a)?0:1;if(p["nargs-eats-options"])f.length-(s+1)+d<m&&(k=Error(ne("Not enough arguments following: %s",c))),d=m;else{for(r=s+1;r<f.length&&(!f[r].match(/^-[^0-9]/)||f[r].match(K)||Ke(f[r]));r++)d++;d<m&&(k=Error(ne("Not enough arguments following: %s",c)))}let g=Math.min(d,m);for(!J(a)&&g>0&&(w(c,a),g--),r=s+1;r<g+s+1;r++)w(c,f[r]);return s+g}function ke(s,c,f,a){let r=[],m=a||f[s+1];const d=E(c,u.nargs);if(E(c,u.bools)&&!/^(true|false)$/.test(m))r.push(!0);else if(J(m)||J(a)&&/^-/.test(m)&&!K.test(m)&&!Ke(m)){if(v[c]!==void 0){const g=v[c];r=Array.isArray(g)?g:[g]}}else{J(a)||r.push(rt(c,a,!0));for(let g=s+1;g<f.length&&!(!p["greedy-arrays"]&&r.length>0||d&&typeof d=="number"&&r.length>=d||(m=f[g],/^-/.test(m)&&!K.test(m)&&!Ke(m)));g++)s=g,r.push(rt(c,m,l))}return typeof d=="number"&&(d&&r.length<d||isNaN(d)&&r.length===0)&&(k=Error(ne("Not enough arguments following: %s",c))),w(c,r),s}function w(s,c,f=l){if(/-/.test(s)&&p["camel-case-expansion"]){const m=s.split(".").map(function(d){return ie(d)}).join(".");Rt(s,m)}const a=rt(s,c,f),r=s.split(".");Me(F,r,a),u.aliases[s]&&u.aliases[s].forEach(function(m){const d=m.split(".");Me(F,d,a)}),r.length>1&&p["dot-notation"]&&(u.aliases[r[0]]||[]).forEach(function(m){let d=m.split(".");const g=[].concat(r);g.shift(),d=d.concat(g),(u.aliases[s]||[]).includes(d.join("."))||Me(F,d,a)}),E(s,u.normalize)&&!E(s,u.arrays)&&[s].concat(u.aliases[s]||[]).forEach(function(d){Object.defineProperty(Ft,d,{enumerable:!0,get(){return c},set(g){c=typeof g=="string"?Q.normalize(g):g}})})}function Rt(s,c){u.aliases[s]&&u.aliases[s].length||(u.aliases[s]=[c],Ve[c]=!0),u.aliases[c]&&u.aliases[c].length||Rt(c,s)}function rt(s,c,f){f&&(c=Gt(c)),(E(s,u.bools)||E(s,u.counts))&&typeof c=="string"&&(c=c==="true");let a=Array.isArray(c)?c.map(function(r){return Ze(s,r)}):Ze(s,c);return E(s,u.counts)&&(J(a)||typeof a=="boolean")&&(a=Qe()),E(s,u.normalize)&&E(s,u.arrays)&&(Array.isArray(c)?a=c.map(r=>Q.normalize(r)):a=Q.normalize(c)),a}function Ze(s,c){return!p["parse-positional-numbers"]&&s==="_"||!E(s,u.strings)&&!E(s,u.bools)&&!Array.isArray(c)&&(ft(c)&&p["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${c}`)))||!J(c)&&E(s,u.numbers))&&(c=Number(c)),c}function Wo(s){const c=Object.create(null);Tt(c,u.aliases,v),Object.keys(u.configs).forEach(function(f){const a=s[f]||c[f];if(a)try{let r=null;const m=Q.resolve(Q.cwd(),a),d=u.configs[f];if(typeof d=="function"){try{r=d(m)}catch(g){r=g}if(r instanceof Error){k=r;return}}else r=Q.require(m);it(r)}catch(r){r.name==="PermissionDenied"?k=r:s[f]&&(k=Error(ne("Invalid JSON config file: %s",a)))}})}function it(s,c){Object.keys(s).forEach(function(f){const a=s[f],r=c?c+"."+f:f;typeof a=="object"&&a!==null&&!Array.isArray(a)&&p["dot-notation"]?it(a,r):(!Be(F,r.split("."))||E(r,u.arrays)&&p["combine-arrays"])&&w(r,a)})}function Io(){typeof O<"u"&&O.forEach(function(s){it(s)})}function Lt(s,c){if(typeof x>"u")return;const f=typeof x=="string"?x:"",a=Q.env();Object.keys(a).forEach(function(r){if(f===""||r.lastIndexOf(f,0)===0){const m=r.split("__").map(function(d,g){return g===0&&(d=d.substring(f.length)),ie(d)});(c&&u.configs[m.join(".")]||!c)&&!Be(s,m)&&w(m.join("."),a[r])}})}function Bo(s){let c;const f=new Set;Object.keys(s).forEach(function(a){if(!f.has(a)&&(c=E(a,u.coercions),typeof c=="function"))try{const r=Ze(a,c(s[a]));[].concat(u.aliases[a]||[],a).forEach(m=>{f.add(m),s[m]=r})}catch(r){k=r}})}function Mo(s){return u.keys.forEach(c=>{~c.indexOf(".")||typeof s[c]>"u"&&(s[c]=void 0)}),s}function Tt(s,c,f,a=!1){Object.keys(f).forEach(function(r){Be(s,r.split("."))||(Me(s,r.split("."),f[r]),a&&(jt[r]=!0),(c[r]||[]).forEach(function(m){Be(s,m.split("."))||Me(s,m.split("."),f[r])}))})}function Be(s,c){let f=s;p["dot-notation"]||(c=[c.join(".")]),c.slice(0,-1).forEach(function(r){f=f[r]||{}});const a=c[c.length-1];return typeof f!="object"?!1:a in f}function Me(s,c,f){let a=s;p["dot-notation"]||(c=[c.join(".")]),c.slice(0,-1).forEach(function(R){R=ht(R),typeof a=="object"&&a[R]===void 0&&(a[R]={}),typeof a[R]!="object"||Array.isArray(a[R])?(Array.isArray(a[R])?a[R].push({}):a[R]=[a[R],{}],a=a[R][a[R].length-1]):a=a[R]});const r=ht(c[c.length-1]),m=E(c.join("."),u.arrays),d=Array.isArray(f);let g=p["duplicate-arguments-array"];!g&&E(r,u.nargs)&&(g=!0,(!J(a[r])&&u.nargs[r]===1||Array.isArray(a[r])&&a[r].length===u.nargs[r])&&(a[r]=void 0)),f===Qe()?a[r]=Qe(a[r]):Array.isArray(a[r])?g&&m&&d?a[r]=p["flatten-duplicate-arrays"]?a[r].concat(f):(Array.isArray(a[r][0])?a[r]:[a[r]]).concat([f]):!g&&!!m==!!d?a[r]=f:a[r]=a[r].concat([f]):a[r]===void 0&&m?a[r]=d?f:[f]:g&&!(a[r]===void 0||E(r,u.counts)||E(r,u.bools))?a[r]=[a[r],f]:a[r]=f}function zo(...s){s.forEach(function(c){Object.keys(c||{}).forEach(function(f){u.aliases[f]||(u.aliases[f]=[].concat(h[f]||[]),u.aliases[f].concat(f).forEach(function(a){if(/-/.test(a)&&p["camel-case-expansion"]){const r=ie(a);r!==f&&u.aliases[f].indexOf(r)===-1&&(u.aliases[f].push(r),Ve[r]=!0)}}),u.aliases[f].concat(f).forEach(function(a){if(a.length>1&&/[A-Z]/.test(a)&&p["camel-case-expansion"]){const r=ut(a,"-");r!==f&&u.aliases[f].indexOf(r)===-1&&(u.aliases[f].push(r),Ve[r]=!0)}}),u.aliases[f].forEach(function(a){u.aliases[a]=[f].concat(u.aliases[f].filter(function(r){return a!==r}))}))})})}function E(s,c){const f=[].concat(u.aliases[s]||[],s),a=Object.keys(c),r=f.find(m=>a.includes(m));return r?c[r]:!1}function Wt(s){const c=Object.keys(u);return[].concat(c.map(a=>u[a])).some(function(a){return Array.isArray(a)?a.includes(s):a[s]})}function Po(s,...c){return[].concat(...c).some(function(a){const r=s.match(a);return r&&Wt(r[1])})}function qo(s){if(s.match(K)||!s.match(/^-[^-]+/))return!1;let c=!0,f;const a=s.slice(1).split("");for(let r=0;r<a.length;r++){if(f=s.slice(r+2),!Wt(a[r])){c=!1;break}if(a[r+1]&&a[r+1]==="="||f==="-"||/[A-Za-z]/.test(a[r])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(f)||a[r+1]&&a[r+1].match(/\W/))break}return c}function Ke(s){return p["unknown-options-as-args"]&&Uo(s)}function Uo(s){return s=s.replace(/^-{3,}/,"--"),s.match(K)||qo(s)?!1:!Po(s,/^-+([^=]+?)=[\s\S]*$/,ot,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function se(s){return!E(s,u.bools)&&!E(s,u.counts)&&`${s}`in v?v[s]:Vo(Do(s))}function Vo(s){return{[q.BOOLEAN]:!0,[q.STRING]:"",[q.NUMBER]:void 0,[q.ARRAY]:[]}[s]}function Do(s){let c=q.BOOLEAN;return E(s,u.strings)?c=q.STRING:E(s,u.numbers)?c=q.NUMBER:E(s,u.bools)?c=q.BOOLEAN:E(s,u.arrays)&&(c=q.ARRAY),c}function J(s){return s===void 0}function Go(){Object.keys(u.counts).find(s=>E(s,u.arrays)?(k=Error(ne("Invalid configuration: %s, opts.count excludes opts.array.",s)),!0):E(s,u.nargs)?(k=Error(ne("Invalid configuration: %s, opts.count excludes opts.narg.",s)),!0):!1)}return{aliases:Object.assign({},u.aliases),argv:Object.assign(Ft,F),configuration:p,defaulted:Object.assign({},jt),error:k,newAliases:Object.assign({},Ve)}}}function Dt(e){const t=[],n=Object.create(null);let o=!0;for(Object.keys(e).forEach(function(i){t.push([].concat(e[i],i))});o;){o=!1;for(let i=0;i<t.length;i++)for(let l=i+1;l<t.length;l++)if(t[i].filter(function(p){return t[l].indexOf(p)!==-1}).length){t[i]=t[i].concat(t[l]),t.splice(l,1),o=!0;break}}return t.forEach(function(i){i=i.filter(function(h,p,v){return v.indexOf(h)===p});const l=i.pop();l!==void 0&&typeof l=="string"&&(n[l]=i)}),n}function Qe(e){return e!==void 0?e+1:1}function ht(e){return e==="__proto__"?"___proto___":e}function Gt(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var Xe,Ye,He;const dt=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,pt=(Ye=(Xe=process==null?void 0:process.versions)===null||Xe===void 0?void 0:Xe.node)!==null&&Ye!==void 0?Ye:(He=process==null?void 0:process.version)===null||He===void 0?void 0:He.slice(1);if(pt&&Number(pt.match(/^([^.]+)/)[1])<dt)throw Error(`yargs parser supports a minimum Node.js version of ${dt}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const kt=process?process.env:{},mt=new Vt({cwd:process.cwd,env:()=>kt,format:te.format,normalize:L.normalize,resolve:L.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(Z.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ce=function(t,n){return mt.parse(t.slice(),n).argv};ce.detailed=function(e,t){return mt.parse(e.slice(),t)},ce.camelCase=ie,ce.decamelize=ut,ce.looksLikeNumber=ft;const Zt={right:Jt,center:en},Kt=0,ze=1,Qt=2,Pe=3;class Xt{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(o=>typeof o=="string"?this.colFromString(o):o);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(i=>i.split("	"));let o=0;return n.forEach(i=>{i.length>1&&I.stringWidth(i[0])>o&&(o=Math.min(Math.floor(this.width*.5),I.stringWidth(i[0])))}),n.forEach(i=>{this.div(...i.map((l,h)=>({text:l.trim(),padding:this.measurePadding(l),width:h===0&&i.length>1?o:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=I.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((o,i)=>{let l="";o.forEach((h,p)=>{const{width:v}=t[p],O=this.negatePadding(t[p]);let x=h;if(O>I.stringWidth(h)&&(x+=" ".repeat(O-I.stringWidth(h))),t[p].align&&t[p].align!=="left"&&this.wrap){const G=Zt[t[p].align];x=G(x,O),I.stringWidth(x)<O&&(x+=" ".repeat((v||0)-I.stringWidth(x)-1))}const T=t[p].padding||[0,0,0,0];T[Pe]&&(l+=" ".repeat(T[Pe])),l+=gt(t[p],x,"| "),l+=x,l+=gt(t[p],x," |"),T[ze]&&(l+=" ".repeat(T[ze])),i===0&&n.length>0&&(l=this.renderInline(l,n[n.length-1]))}),n.push({text:l.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const o=t.match(/^ */),i=o?o[0].length:0,l=n.text,h=I.stringWidth(l.trimRight());return n.span?this.wrap?i<h?t:(n.hidden=!0,l.trimRight()+" ".repeat(i-h)+t.trimLeft()):(n.hidden=!0,l+t):t}rasterize(t){const n=[],o=this.columnWidths(t);let i;return t.forEach((l,h)=>{l.width=o[h],this.wrap?i=I.wrap(l.text,this.negatePadding(l),{hard:!0}).split(`
`):i=l.text.split(`
`),l.border&&(i.unshift("."+"-".repeat(this.negatePadding(l)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(l)+2)+"'")),l.padding&&(i.unshift(...new Array(l.padding[Kt]||0).fill("")),i.push(...new Array(l.padding[Qt]||0).fill(""))),i.forEach((p,v)=>{n[v]||n.push([]);const O=n[v];for(let x=0;x<h;x++)O[x]===void 0&&O.push("");O.push(p)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[Pe]||0)+(t.padding[ze]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(h=>h.width||I.stringWidth(h.text));let n=t.length,o=this.width;const i=t.map(h=>{if(h.width)return n--,o-=h.width,h.width}),l=n?Math.floor(o/n):0;return i.map((h,p)=>h===void 0?Math.max(l,Yt(t[p])):h)}}function gt(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function Yt(e){const t=e.padding||[],n=1+(t[Pe]||0)+(t[ze]||0);return e.border?n+4:n}function Ht(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Jt(e,t){e=e.trim();const n=I.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function en(e,t){e=e.trim();const n=I.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let I;function tn(e,t){return I=t,new Xt({width:e?.width||Ht(),wrap:e?.wrap})}const $t=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function bt(e){return e.replace($t,"")}function nn(e,t){const[n,o]=e.match($t)||["",""];e=bt(e);let i="";for(let l=0;l<e.length;l++)l!==0&&l%t===0&&(i+=`
`),i+=e.charAt(l);return n&&o&&(i=`${n}${i}${o}`),i}function on(e){return tn(e,{stringWidth:t=>[...t].length,stripAnsi:bt,wrap:nn})}function sn(e,t){let n=L.resolve(".",e),o;for(Z.statSync(n).isDirectory()||(n=L.dirname(n));;){if(o=t(n,Z.readdirSync(n)),o)return L.resolve(n,o);if(n=L.dirname(o=n),o===n)break}}const rn={fs:{readFileSync:Z.readFileSync,writeFile:Z.writeFile},format:te.format,resolve:L.resolve,exists:e=>{try{return Z.statSync(e).isFile()}catch{return!1}}};let U;class cn{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let o=function(){};return typeof t[t.length-1]=="function"&&(o=t.pop()),o=o||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o(),U.format.apply(U.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),o=t.shift(),i=t.shift();let l=function(){};typeof t[t.length-1]=="function"&&(l=t.pop()),this.cache[this.locale]||this._readLocaleFile();let h=i===1?n:o;this.cache[this.locale][n]&&(h=this.cache[this.locale][n][i===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:o},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:l})):l();const p=[h];return~h.indexOf("%d")&&p.push(i),U.format.apply(U.format,p.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let o="";return t.forEach(function(i,l){const h=n[l+1];o+=i,typeof h<"u"&&(o+="%s")}),this.__.apply(this,[o].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],o=n.directory,i=n.locale,l=n.cb,h=this._resolveLocaleFile(o,i),p=JSON.stringify(this.cache[i],null,2);U.fs.writeFile(h,p,"utf-8",function(v){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),l(v)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{U.fs.readFileSync&&(t=JSON.parse(U.fs.readFileSync(n,"utf-8")))}catch(o){if(o instanceof SyntaxError&&(o.message="syntax error in "+n),o.code==="ENOENT")t={};else throw o}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let o=U.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(o)&&~n.lastIndexOf("_")){const i=U.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(i)&&(o=i)}return o}_fileExistsSync(t){return U.exists(t)}}function ln(e,t){U=t;const n=new cn(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const an=e=>ln(e,rn),un="require is not supported by ESM",yt="loading a directory of commands is not supported yet for ESM";let le;try{le=It.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:lt&&lt.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{le=process.cwd()}const fn=le.substring(0,le.lastIndexOf("node_modules"));ct.notStrictEqual,ct.strictEqual,te.inspect,fn||process.cwd(),L.basename,L.dirname,L.extname,L.relative,L.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,Z.readFileSync,an({directory:L.resolve(le,"../../../locales"),updateFiles:!1});const ae="\x1B[44m",C="\x1B[43m",_="\x1B[41m",hn="\x1B[42m",$="\x1B[0m",A="\x1B[33m",S="\x1B[36m",b="\x1B[0m",ue=Object.keys({"vue-caution":["implicitParentChildCommunication","elementSelectorsWithScoped"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-recommended":["topLevelElementOrder","elementAttributeOrder"],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression","fullWordComponentName"],rrd:["cyclomaticComplexity","elseCondition","functionSize","parameterCount","plainScript","scriptLenght","shortVariableName","tooManyProps"]}),Je=100,fe=[],dn=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>Je&&fe.push({fileName:t,scriptLength:n.length})},pn=()=>(fe.length>0&&(console.log(`
${S}rrd${b} ${_}Long <script> blocks${$} in ${fe.length} files.`),console.log(`👉 ${A}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${Je} lines.${b}`),fe.forEach(e=>{console.log(`- ${e.fileName} ${e.scriptLength>Je*2?_:C}(${e.scriptLength} lines)${$}`)})),fe.length),he=[],mn=(e,t)=>{!e||!e.setup||he.push(t)},gn=()=>(he.length>0&&(console.log(`
${S}rrd${b} ${C}Plain <script> blocks${$} in ${he.length} files.`),console.log(`👉 ${A} Consider using <script setup> to leverage the new SFC <script> syntax.${b}`),he.forEach(e=>{console.log(`- ${e}`)})),he.length),$n=/^(\(.*\)|\\?.)$/;function ee(e){const t=e.toString();return $n.test(t)?t:`(?:${t})`}const bn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,yn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function y(e){const t=n=>y(`(?<${n}>${`${e}`.replace(bn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>y(`${e}${V(...n)}`),{referenceTo:n=>y(`${e}\\k<${n}>`)}),or:(...n)=>y(`(?:${e}|${V(...n)})`),after:(...n)=>y(`(?<=${V(...n)})${e}`),before:(...n)=>y(`${e}(?=${V(...n)})`),notAfter:(...n)=>y(`(?<!${V(...n)})${e}`),notBefore:(...n)=>y(`${e}(?!${V(...n)})`),times:Object.assign(n=>y(`${ee(e)}{${n}}`),{any:()=>y(`${ee(e)}*`),atLeast:n=>y(`${ee(e)}{${n},}`),atMost:n=>y(`${ee(e)}{0,${n}}`),between:(n,o)=>y(`${ee(e)}{${n},${o}}`)}),optionally:()=>y(`${ee(e)}?`),as:t,groupedAs:t,grouped:()=>y(`${e}`.replace(yn,"($1$3)$2")),at:{lineStart:()=>y(`^${e}`),lineEnd:()=>y(`${e}$`)}}}const En=/[.*+?^${}()|[\]\\/]/g;function et(e){return y(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function M(e){return y(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}const vn=y(".");y("\\b\\w+\\b");const qe=y("\\w"),z=y("\\b");y("\\d");const Cn=y("\\s"),de=Object.assign(y("[a-zA-Z]"),{lowercase:y("[a-z]"),uppercase:y("[A-Z]")}),Et=y("\\t"),An=y("\\n");y("\\r"),y("\\W+"),y("\\W"),y("\\B"),y("\\D"),y("\\S"),Object.assign(y("[^a-zA-Z]"),{lowercase:y("[^a-z]"),uppercase:y("[^A-Z]")}),y("[^\\t]"),y("[^\\n]"),y("[^\\r]");function X(...e){return y(`${ee(V(...e))}?`)}function V(...e){return y(e.map(t=>typeof t=="string"?t.replace(En,"\\$&"):t).join(""))}function N(...e){return y(`${ee(V(...e))}+`)}const D="i",B="g",j=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(V(...e).toString(),[...t||""].join(""))},pe=[],Sn=(e,t)=>{if(!e)return;const n=j(z,"else",z,[B,D]),o=e.content.match(n);o?.length&&pe.push({fileName:t,elseCount:o.length})},xn=()=>(pe.length>0&&(console.log(`
${S}rrd${b} ${C}else conditions${$} are used in ${pe.length} files.`),console.log(`👉 ${A}Try to rewrite the conditions in a way that the else clause is not necessary.${b}`),pe.forEach(e=>{console.log(`- ${e.fileName} ${C}(${e.elseCount})${$}`)})),pe.length),wn=5,_n=10,me=[],On=(e,t)=>{if(!e)return;const n=j(z,"if",z,[B,D]),o=j(z,"else",z,[B,D]),i=j(z,"for",z,[B,D]),l=j(z,"while",z,[B,D]),h=j(z,"case",z,[B,D]),p=e.content.match(n),v=e.content.match(o),O=e.content.match(i),x=e.content.match(l),T=e.content.match(h),G=(p?.length||0)+(v?.length||0)+(O?.length||0)+(x?.length||0)+(T?.length||0);G>wn&&me.push({fileName:t,cyclomaticComplexity:G})},Nn=()=>(me.length>0&&(console.log(`
${S}rrd${b} ${ae}cyclomaticComplexity${$} is above moderate in ${me.length} files.`),console.log(`👉 ${A}Try to reduce complexity.${b}`),me.forEach(e=>{console.log(`- ${e.fileName} ${e.cyclomaticComplexity>_n?_:C}(${e.cyclomaticComplexity})${$}`)})),me.length),ge=[],jn=e=>{if(e.includes("pages"))return;const t=L.basename(e);if(t==="App.vue")return;const n=j(de.uppercase);t.slice(1).match(n)?.length||ge.push({filePath:e})},Fn=()=>(ge.length>0&&(console.log(`
${S}vue-essential${b} ${_}single name component${$} is used in ${ge.length} files.`),console.log(`👉 ${A}Rename the component to use multi-word name.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),ge.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ge.length),$e=[],Rn=(e,t)=>{e&&e.forEach(n=>{n.scoped||$e.push({filePath:t})})},Ln=()=>($e.length>0&&(console.log(`
${S}vue-essential${b} ${_}Global style ${$} is used in ${$e.length} files.`),console.log(`👉 ${A}Use <style scoped>.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`),$e.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),$e.length),be=[],Tn=(e,t)=>{if(!e)return;const n=j("defineProps([",[B,D]);e.content.match(n)?.length&&be.push({filePath:t})},Wn=()=>(be.length>0&&(console.log(`
${S}vue-essential${b} ${_}simple prop${$} is used in ${be.length} files.`),console.log(`👉 ${A}Add at least type definition.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`),be.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),be.length),ye=[],In=(e,t)=>{if(!e)return;const n=j("<",N(M(">"))," v-if",N(M(">"))," v-for",N(M(">")),">",[B,D]),o=j("<",N(M(">"))," v-for",N(M(">"))," v-if",N(M(">")),">",[B,D]),i=e.content.match(n),l=e.content.match(o);(i?.length||l?.length)&&ye.push({filePath:t})},Bn=()=>(ye.length>0&&(console.log(`
${S}vue-essential${b} ${_}v-if used with v-for${$} in ${ye.length} files.`),console.log(`👉 ${A}Move out the v-if to a computed property.${b} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`),ye.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ye.length),Ee=[],Mn=(e,t)=>{if(!e)return;const n=j("<",N(M(">"))," v-for",N(M(">")),">",[B,D]),o=e.content.match(n);o?.length&&(o.some(l=>l.includes(":key"))||Ee.push({filePath:t}))},zn=()=>(Ee.length>0&&(console.log(`
${S}vue-essential${b} ${_}v-for has no key${$} in ${Ee.length} files.`),console.log(`👉 ${A}Add a \`:key\` property to all v-for.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`),Ee.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),Ee.length),ve=[],Pn=e=>{if(e.includes("pages")||e.includes("layouts"))return;const t=L.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,o=t.match(n),i=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,l=t.match(i);!o?.length&&!l?.length&&ve.push({fileName:e})},qn=()=>(ve.length>0&&(console.log(`
${S}vue-strong${b} ${_}component name is not PascalCase and not kebab-case${$} in ${ve.length} files.`),console.log(`👉 ${A}Rename the component to use PascalCase or kebab-case file name.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`),ve.forEach(e=>{console.log(`- ${_}${e.fileName}${$}`)})),ve.length),Ce=[],Un=j(N(de.lowercase).at.lineStart(),N(de.uppercase,de.lowercase.times.any().grouped()).at.lineEnd()),Vn=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let o;for(;(o=n.exec(e.content))!==null;)o[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(l=>l.split(":")[0]).filter(l=>l.length).filter(l=>!Un.test(l)).length&&Ce.push({filePath:t})},Dn=()=>(Ce.length>0&&(console.log(`
${S}vue-strong${b} ${_}prop names are not camelCased${$} in ${Ce.length} files.`),console.log(`👉 ${A}Rename the props to camelCase.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`),Ce.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),Ce.length),Y=(e,t)=>{if(!t.includes(`
`))return e.split(`
`).findIndex(h=>h.includes(t))+1;const n=e.indexOf(t),o=e.slice(0,n).split(`
`).length,i=t.split(`
`).length;return o+i-1};function H(e,t){return new Set(e.map(o=>o[t])).size}const Ae=[],Gn=40,kn=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(i=>i[1].trim()).forEach(i=>{if(i.length>Gn){const l=Y(e.content,i),h=i.split(`
`).at(0)?.trim()||"";Ae.push({filename:t,message:`${t}#${l} ${C}${h}${$}`})}})},Zn=()=>{if(Ae.length>0){const e=H(Ae,"filename");console.log(`
${S}vue-strong${b} ${_}Lengthy template expression${$} found in ${e} files.`),console.log(`👉 ${A}Refactor the expression into a computed property.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-expressions-in-templates`),Ae.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return Ae.length},Se=[],Kn=(e,t)=>{if(!e)return;const n=e.template,o=j("<",N(qe),X(N(et(` 	
\r`))),N(M("/>")),X(N(et(` 	
\r`))),X("/"),">",["g"]),i=n.content.match(o);if(i===null)return;const l=j(":",N(qe),X(" "),"=",X(" "),M(`'"`),["g"]);i.forEach(h=>{if(!h.includes(":"))return;const p=h.match(l);if(p?.length){const v=Y(e.source,h);Se.push({message:`${t}#${v} ${C}${p}${$}`})}})},Qn=()=>(Se.length>0&&(console.log(`
${S}vue-strong${b} ${_}Attribute value is not quoted${$} in ${Se.length} files.`),console.log(`👉 ${A}Use quotes for attribute values.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#quoted-attribute-values`),Se.forEach(e=>{console.log(`- ${e.message} 🚨`)})),Se.length),xe=[],Xn=(e,t)=>{if(!e)return;const n=e.template,o=j("<",N(de.uppercase,qe),X(An,Et),X(N(M(">"))),"></",N(qe),">",["g"]),i=n.content.match(o);i!==null&&i.forEach(l=>{const h=Y(e.source,l),p=l.split(`
`).at(-1)?.trim()||"";xe.push({message:`${t}#${h} ${C}${p}${$}`})})},Yn=()=>(xe.length>0&&(console.log(`
${S}vue-strong${b} - ${_}Component is not self closing${$} in ${xe.length} files.`),console.log(`👉 ${A}Components with no content should be self-closing.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#self-closing-components`),xe.forEach(e=>{console.log(`- ${e.message} 🚨`)})),xe.length),Ue=[],tt=[],Hn=["v-slot","v-bind","v-on"],Jn=(e,t)=>{if(!e)return;const n=e.template;Hn.forEach(o=>{if(n.content.includes(`${o}:`)){const i=Y(e.source,o);Ue.push({message:`${t}:${i} ${C}${o}${$}`}),tt.some(l=>l.filePath===t)||tt.push({filePath:t})}})},eo=()=>(Ue.length>0&&(console.log(`
${S}vue-strong${b} ${_}Directive shorthands not used${$} in ${tt.length} files.`),console.log(`👉 ${A}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#directive-shorthands`),Ue.forEach(e=>{console.log(`- ${e.message} 🚨`)})),Ue.length),we=[],to=3,no=e=>{const t=j(N(M("/")).grouped(),V(".vue").at.lineEnd()),n=e.match(t);if(n){const o=n[0]?.split(".vue")[0],i=j(et("bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ"),[B]),l=o.match(i);(!l||l.length<to)&&we.push({filename:o,filePath:e})}},oo=()=>{if(we.length>0){const e=H(we,"filename");console.log(`
${S}vue-strong${b} ${_}full-word component names${$} detected in ${e} files.`),console.log(`👉 ${A}Component names should prefer full words over abbreviations.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#full-word-component-names`),we.forEach(t=>{console.log(`- ${t.filePath} 🚨 ${C}(${t.filename})${$}`)})}return we.length},_e=[],so=(e,t)=>{const n=e.toString(),o=n.indexOf("<script setup>"),i=n.indexOf("<template>"),l=n.indexOf("<style>"),h=[{name:"script",index:o},{name:"template",index:i},{name:"style",index:l}].filter(v=>v.index!==-1);h.every((v,O)=>O===0?!0:h[O-1].index<v.index)||_e.push({filename:t})},ro=()=>(_e.length>0&&(console.log(`
${S}vue-recommended${b} ${C}SFC top-level element order${$} detected in ${_e.length} files.`),console.log(`👉 ${A}Single-File Components should always order <script>, <template>, and <style> tags consistently.${b} See: https://vuejs.org/style-guide/rules-recommended.html#single-file-component-top-level-element-order`),_e.forEach(e=>{console.log(` - ${e.filename} 🚨`)})),_e.length),Oe=[],vt=["is","v-for","v-if","v-else-if","v-else","v-show","v-cloak","v-pre","v-once","id","ref","key","v-model","v-on","v-html","v-text"],io=(e,t)=>{if(!e)return;const n=e.content.replace(/<\/?template>/g,""),o=/<(\w+)(\s[^>]+)?>/g,i=/(\w+(?:-\w+)*)(?:="[^"]*")?/g;let l;for(;(l=o.exec(n))!==null;){const h=l[1],p=l[2];if(p){const O=Array.from(p.matchAll(i),T=>T[1]).filter(T=>vt.includes(T));let x=-1;for(const T of O){const G=vt.indexOf(T);if(G!==-1&&G<x){Oe.push({filename:t,message:`${t} tag has attributes out of order ${C}(${h})${$}`});break}x=G}}}},co=()=>{if(Oe.length>0){const e=H(Oe,"filename");console.log(`
${S}vue-recommended${b} ${_}element attribute order ${$} detected in ${e} files.`),console.log(`👉 ${A}The attributes of elements (including components) should be ordered consistently.${b} See: https://vuejs.org/style-guide/rules-recommended.html#element-attribute-order`),Oe.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return Oe.length},Ne=[],lo=5,ao=(e,t)=>{if(!e)return;const n=j("defineProps",X("<"),X("("),"{",N(vn),"}",["g","s"]),o=e.content.match(n);if(o?.length){const i=o[0].split(",").length;i>lo&&Ne.push({fileName:t,propsCount:i})}},uo=()=>(Ne.length>0&&(console.log(`
${S}rrd${b} ${C}too many props${$} are used in ${Ne.length} files.`),console.log(`👉 ${A}Try to refactor your code to use less properties.${b}`),Ne.forEach(e=>{console.log(`- ${e.fileName} ${C}(${e.propsCount})${$}`)})),Ne.length),je=[],Ct=20,fo=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\([^)]*\)\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}|const\s+([a-zA-Z0-9_$]+)\s*=\s*\([^)]*\)\s*=>\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}/g;let o;for(;(o=n.exec(e.content))!==null;){const i=o[1]||o[5];(o[2]||o[6]).split(`
`).length>Ct&&je.push({filename:t,funcName:i})}},ho=()=>{if(je.length>0){const e=H(je,"filename");console.log(`
${S}rrd${b} ${C}function size${$} exceeds recommended limit in ${e} files.`),console.log(`👉 ${A}Functions must be shorter than ${Ct} lines${b}`),je.forEach(t=>{console.log(`- ${t.filename} 🚨 ${C}(${t.funcName})${$}`)})}return je.length},Fe=[],At=3,St=(e,t,n)=>{const o=t.split(",").map(i=>i.trim()).filter(i=>i.length>0);o.length>At&&Fe.push({filename:n,funcName:e,paramsCount:o.length})},po=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\(([^)]*)\)\s*{|const\s+([a-zA-Z0-9_$]+)\s*=\s*\(([^)]*)\)\s*=>\s*{/g;let o;for(;(o=n.exec(e.content))!==null;)o[1]?St(o[1],o[2],t):o[3]&&St(o[3],o[4],t)},mo=()=>(Fe.length>0&&(console.log(`
${S}rrd${b} ${C}parameter count${$} exceeds recommended limit in ${Fe.length} files.`),console.log(`👉 ${A}Max number of function parameters should be ${At}${b}`),Fe.forEach(e=>{console.log(`- ${C}${e.funcName}${$} in file ${e.filename} 🚨 ${C}(${e.paramsCount})${$}`)})),Fe.length),xt=4,Re=[],go=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;let o;for(;(o=n.exec(e.content))!==null;){const i=o[1];i.length<xt&&Re.push({filename:t,variable:i})}},$o=()=>{if(Re.length>0){const e=H(Re,"filename");console.log(`
${S}rrd${b} ${C}variable names${$} are too short in ${e} files.`),console.log(`👉 ${A}Variable names must have a minimum length of ${xt}${b}`),Re.forEach(t=>{console.log(`- ${t.filename} 🚨 ${C}(${t.variable})${$}`)})}return Re.length},nt=[],Le=[],bo=5,yo=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,o=e.content.match(n);o?.length&&o.forEach(i=>{if(i.split(`
`).length>bo){const l=i.split(`
`)[0],h=Y(e.content,l);nt.push({message:`${t}:${h} ${C}computed${$}`}),Le.push({filePath:t}),Le.some(p=>p.filePath===t)||Le.push({filePath:t})}})},Eo=()=>(Le.length>0&&(console.log(`
${S}vue-strong${b} ${_}complicated computed property ${$} in ${Le.length} files.`),console.log(`👉 ${A}Refactor the computed properties to smaller ones.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-computed-properties`),nt.forEach(e=>{console.log(`- ${e.message} 🚨`)})),nt.length),Te=[],vo=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(i=>i[1].trim()).forEach(i=>{const l=Y(e.content.trim(),i),h=i.split(`
`).at(0)?.trim()||"";Te.push({filename:t,message:`${t}#${l} ${C}(${h})${$}`})})},Co=()=>{if(Te.length>0){const e=H(Te,"filename");console.log(`
${S}vue-strong${b} ${_}component files${$} detected in ${e} files.`),console.log(`👉 ${A}Whenever a build system is available to concatenate files, each component should be in its own file.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#component-files`),Te.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return Te.length},oe=[],Ao=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,o=/v-model\s*=\s*"([^"]+)"/,i=j(V("$parent").or("getCurrentInstance"),[B]),l=e.content.match(n),h=e.content.match(o);if(h){const v=h[1].split(".")[0],O=l?l[1]:"";if(O.includes(v)){const x=Y(e.content.trim(),O);oe.push({filename:t,message:`${t}#${x} ${C}(${v})${$}`})}}const p=e.content.match(i);if(p){const v=Y(e.content.trim(),p[0]);oe.push({filename:t,message:`${t}#${v} ${C}(${p[0]})${$}`})}},So=()=>{if(oe.length>0){const e=H(oe,"filename");console.log(`
${S}vue-caution${b} ${C}implicit parent-child communication${$} detected in ${e} files.`),console.log(`👉 ${A}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${b} See: https://vuejs.org/style-guide/rules-use-with-caution.html#implicit-parent-child-communication`),oe.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return oe.length},We=[],wt=5,xo=3,wo=(e,t)=>{if(!e)return;const n=j(Et.times.atLeast(wt).or(Cn.times.atLeast(xo*wt)),[B,D]);e.content.match(n)?.forEach(i=>{const l=Y(e.content,i);We.push({filePath:t,message:`${t}#${l} ${C}indentation: ${i.length}${$}`})})},_o=()=>{if(We.length>0){const e=H(We,"filePath");console.log(`
${S}rrd${b} ${C}deep indentation${$} found in ${e} files.`),console.log(`👉 ${A}Try to refactor your component to child components, to avoid deep indentations..${b}`),We.forEach(t=>{console.log(`- ${t.message} 🚨`)})}return We.length},Oo=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],Ie=[],No=(e,t)=>{if(!e)return;const n=/([a-z]+)\s*\{[^}]*\}/gi;e.forEach(o=>{let i;for(;(i=n.exec(o.content))!==null;){const l=i[1];Oo.includes(l)&&Ie.push({filename:t,selector:l})}})},jo=()=>{if(Ie.length>0){const e=H(Ie,"filename");console.log(`
${S}vue-caution${b} ${C}element selectors with scoped${$} found in ${e} files.`),console.log(`👉 ${A}Prefer class selectors over element selectors in scoped styles, because large numbers of element selectors are slow.${b} See: https://vuejs.org/style-guide/rules-use-with-caution.html#element-selectors-with-scoped`),Ie.forEach(t=>{console.log(` - ${t.filename} 🚨 ${C}(${t.selector})${$}`)})}return Ie.length},Fo=()=>{let e=0;return e+=Fn(),e+=Wn(),e+=zn(),e+=Bn(),e+=Ln(),e+=qn(),e+=Yn(),e+=Dn(),e+=Zn(),e+=Qn(),e+=eo(),e+=Eo(),e+=Co(),e+=oo(),e+=ro(),e+=co(),e+=So(),e+=jo(),e+=Nn(),e+=_o(),e+=xn(),e+=ho(),e+=mo(),e+=gn(),e+=pn(),e+=$o(),e+=uo(),e},Ro=(e,t,n)=>{const o=e.scriptSetup||e.script;n.includes("vue-essential")&&(jn(t),Tn(o,t),Rn(e.styles,t),Mn(e.template,t),In(e.template,t)),n.includes("vue-strong")&&(Pn(t),Vn(o,t),vo(o,t),yo(o,t),Xn(e,t),kn(e.template,t),Kn(e,t),Jn(e,t),no(t)),n.includes("vue-recommended")&&(so(e.source,t),io(e.template,t)),n.includes("vue-caution")&&(Ao(o,t),No(e.styles,t)),n.includes("rrd")&&(On(o,t),wo(o,t),Sn(o,t),fo(o,t),po(o,t),mn(e.script,t),dn(o,t),go(o,t),ao(o,t))};let _t=0;const Lo=["src","components","pages","layouts","server","composables","store","utils","plugins","middleware"],Ot=(e,t)=>{const n=Z.readdirSync(e);_t+=n.length;for(const o of n){const i=L.join(e,o);Z.statSync(i).isDirectory()?Lo.some(l=>i.includes(l))&&Ot(i,t):o.endsWith(".vue")&&t(i)}},To=(e,t=[])=>{console.log(`

${ae}Analyzing Vue files in ${e}${$}`);const n=ue.filter(o=>!t.includes(o));console.log(`Applying ${t.length} rulesets ${ae}${t}${$} and ignoring ${n.length} rulesets ${ae}${n}${$} `),Ot(e,o=>{if(o.includes("App.vue")||o.includes("app.vue"))return;const i=Z.readFileSync(o,"utf-8"),{descriptor:l}=Bt.parse(i);Ro(l,o,t)}),console.log(`Found ${ae}${_t}${$} Vue files`),Fo()||console.log(`${hn}No code smells detected!${$}`)};P(Pt(process.argv)).command("analyze [path]","Analyze Vue files for code smells",e=>e.positional("path",{describe:"path to the Vue files",type:"string",default:"./"}).option("ignore",{describe:"Comma-separated list of rulesets to ignore",type:"string",coerce:Nt("ignore")}).option("apply",{describe:"Comma-separated list of rulesets to apply",type:"string",coerce:Nt("apply")}).check(t=>(t.ignore&&t.apply&&(console.error(`
${_}Cannot use both --ignore and --apply options together.${$}.

`),process.exit(1)),!0)),e=>{let t=[...ue];e.apply&&(t=e.apply),e.ignore&&(t=ue.filter(n=>!e.ignore.includes(n))),To(e.path,t)}).help().argv;function Nt(e){return t=>{const n=t.split(","),o=n.filter(i=>!ue.includes(i));return o.length>0&&(console.error(`
${_}Invalid ${e} values: ${o.join(", ")}${$}. 
${A}Allowed values are: ${[...ue].join(", ")}${b}

`),process.exit(1)),n}}});
