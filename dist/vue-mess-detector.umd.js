(function(L,K){typeof exports=="object"&&typeof module<"u"?K(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],K):(L=typeof globalThis<"u"?globalThis:L||self,K(L.yargs,L.util,L.path,L.fs,L.assert,L.url,L.compilerSfc))})(this,function(L,K,v,B,Ue,ut,ft){"use strict";var De=typeof document<"u"?document.currentScript:null;class J extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,J)}}function Ve(){return ht()?0:1}function ht(){return dt()&&!process.defaultApp}function dt(){return!!process.versions.electron}function pt(e){return e.slice(Ve()+1)}function gt(){return process.argv[Ve()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function k(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",i=!1;const c=e.match(/^-+/);for(let a=c?c[0].length:0;a<e.length;a++){let d=e.charAt(a);i&&(i=!1,d=d.toUpperCase()),a!==0&&(d==="-"||d==="_")?i=!0:d!=="-"&&d!=="_"&&(n+=d)}return n}}function Ge(e,t){const n=e.toLowerCase();t=t||"-";let i="";for(let c=0;c<e.length;c++){const a=n.charAt(c),d=e.charAt(c);a!==d&&c>0?i+=`${t}${n.charAt(c)}`:i+=d}return i}function Qe(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function mt(e){if(Array.isArray(e))return e.map(d=>typeof d!="string"?d+"":d);e=e.trim();let t=0,n=null,i=null,c=null;const a=[];for(let d=0;d<e.length;d++){if(n=i,i=e.charAt(d),i===" "&&!c){n!==" "&&t++;continue}i===c?c=null:(i==="'"||i==='"')&&!c&&(c=i),a[t]||(a[t]=""),a[t]+=i}return a}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var W;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(W||(W={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let M;class $t{constructor(t){M=t}parse(t,n){const i=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),c=mt(t),a=typeof t=="string",d=yt(Object.assign(Object.create(null),i.alias)),g=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},i.configuration),_=Object.assign(Object.create(null),i.default),R=i.configObjects||[],w=i.envPrefix,V=g["populate--"],Y=V?"--":"_",we=Object.create(null),ot=Object.create(null),Z=i.__||M.format,u={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},z=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,Ie=new RegExp("^--"+g["negation-prefix"]+"(.+)");[].concat(i.array||[]).filter(Boolean).forEach(function(s){const r=typeof s=="object"?s.key:s,f=Object.keys(s).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();f&&(u[f][r]=!0),u.arrays[r]=!0,u.keys.push(r)}),[].concat(i.boolean||[]).filter(Boolean).forEach(function(s){u.bools[s]=!0,u.keys.push(s)}),[].concat(i.string||[]).filter(Boolean).forEach(function(s){u.strings[s]=!0,u.keys.push(s)}),[].concat(i.number||[]).filter(Boolean).forEach(function(s){u.numbers[s]=!0,u.keys.push(s)}),[].concat(i.count||[]).filter(Boolean).forEach(function(s){u.counts[s]=!0,u.keys.push(s)}),[].concat(i.normalize||[]).filter(Boolean).forEach(function(s){u.normalize[s]=!0,u.keys.push(s)}),typeof i.narg=="object"&&Object.entries(i.narg).forEach(([s,r])=>{typeof r=="number"&&(u.nargs[s]=r,u.keys.push(s))}),typeof i.coerce=="object"&&Object.entries(i.coerce).forEach(([s,r])=>{typeof r=="function"&&(u.coercions[s]=r,u.keys.push(s))}),typeof i.config<"u"&&(Array.isArray(i.config)||typeof i.config=="string"?[].concat(i.config).filter(Boolean).forEach(function(s){u.configs[s]=!0}):typeof i.config=="object"&&Object.entries(i.config).forEach(([s,r])=>{(typeof r=="boolean"||typeof r=="function")&&(u.configs[s]=r)})),zn(i.key,d,i.default,u.arrays),Object.keys(_).forEach(function(s){(u.aliases[s]||[]).forEach(function(r){_[r]=_[s]})});let P=null;Gn();let Ce=[];const C=Object.assign(Object.create(null),{_:[]}),rt={};for(let s=0;s<c.length;s++){const r=c[s],f=r.replace(/^-{3,}/,"---");let l,o,p,h,m,O;if(r!=="--"&&/^-/.test(r)&&xe(r))ze(r);else if(f.match(/^---+(=|$)/)){ze(r);continue}else if(r.match(/^--.+=/)||!g["short-option-groups"]&&r.match(/^-.+=/))h=r.match(/^--?([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&(y(h[1],u.arrays)?s=ve(s,h[1],c,h[2]):y(h[1],u.nargs)!==!1?s=Oe(s,h[1],c,h[2]):A(h[1],h[2],!0));else if(r.match(Ie)&&g["boolean-negation"])h=r.match(Ie),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],A(o,y(o,u.arrays)?[!1]:!1));else if(r.match(/^--.+/)||!g["short-option-groups"]&&r.match(/^-[^-]+/))h=r.match(/^--?(.+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],y(o,u.arrays)?s=ve(s,o,c):y(o,u.nargs)!==!1?s=Oe(s,o,c):(m=c[s+1],m!==void 0&&(!m.match(/^-/)||m.match(z))&&!y(o,u.bools)&&!y(o,u.counts)||/^(true|false)$/.test(m)?(A(o,m),s++):A(o,X(o))));else if(r.match(/^-.\..+=/))h=r.match(/^-([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&A(h[1],h[2]);else if(r.match(/^-.\..+/)&&!r.match(z))m=c[s+1],h=r.match(/^-(.\..+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],m!==void 0&&!m.match(/^-/)&&!y(o,u.bools)&&!y(o,u.counts)?(A(o,m),s++):A(o,X(o)));else if(r.match(/^-[^-]+/)&&!r.match(z)){p=r.slice(1,-1).split(""),l=!1;for(let N=0;N<p.length;N++){if(m=r.slice(N+2),p[N+1]&&p[N+1]==="="){O=r.slice(N+3),o=p[N],y(o,u.arrays)?s=ve(s,o,c,O):y(o,u.nargs)!==!1?s=Oe(s,o,c,O):A(o,O),l=!0;break}if(m==="-"){A(p[N],m);continue}if(/[A-Za-z]/.test(p[N])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(m)&&y(m,u.bools)===!1){A(p[N],m),l=!0;break}if(p[N+1]&&p[N+1].match(/\W/)){A(p[N],m),l=!0;break}else A(p[N],X(p[N]))}o=r.slice(-1)[0],!l&&o!=="-"&&(y(o,u.arrays)?s=ve(s,o,c):y(o,u.nargs)!==!1?s=Oe(s,o,c):(m=c[s+1],m!==void 0&&(!/^(-|--)[^-]/.test(m)||m.match(z))&&!y(o,u.bools)&&!y(o,u.counts)||/^(true|false)$/.test(m)?(A(o,m),s++):A(o,X(o))))}else if(r.match(/^-[0-9]$/)&&r.match(z)&&y(r.slice(1),u.bools))o=r.slice(1),A(o,X(o));else if(r==="--"){Ce=c.slice(s+1);break}else if(g["halt-at-non-option"]){Ce=c.slice(s);break}else ze(r)}ct(C,!0),ct(C,!1),Tn(C),Pn(),lt(C,u.aliases,_,!0),Bn(C),g["set-placeholder-key"]&&In(C),Object.keys(u.counts).forEach(function(s){me(C,s.split("."))||A(s,0)}),V&&Ce.length&&(C[Y]=[]),Ce.forEach(function(s){C[Y].push(s)}),g["camel-case-expansion"]&&g["strip-dashed"]&&Object.keys(C).filter(s=>s!=="--"&&s.includes("-")).forEach(s=>{delete C[s]}),g["strip-aliased"]&&[].concat(...Object.keys(d).map(s=>d[s])).forEach(s=>{g["camel-case-expansion"]&&s.includes("-")&&delete C[s.split(".").map(r=>k(r)).join(".")],delete C[s]});function ze(s){const r=Se("_",s);(typeof r=="string"||typeof r=="number")&&C._.push(r)}function Oe(s,r,f,l){let o,p=y(r,u.nargs);if(p=typeof p!="number"||isNaN(p)?1:p,p===0)return G(l)||(P=Error(Z("Argument unexpected for: %s",r))),A(r,X(r)),s;let h=G(l)?0:1;if(g["nargs-eats-options"])f.length-(s+1)+h<p&&(P=Error(Z("Not enough arguments following: %s",r))),h=p;else{for(o=s+1;o<f.length&&(!f[o].match(/^-[^0-9]/)||f[o].match(z)||xe(f[o]));o++)h++;h<p&&(P=Error(Z("Not enough arguments following: %s",r)))}let m=Math.min(h,p);for(!G(l)&&m>0&&(A(r,l),m--),o=s+1;o<m+s+1;o++)A(r,f[o]);return s+m}function ve(s,r,f,l){let o=[],p=l||f[s+1];const h=y(r,u.nargs);if(y(r,u.bools)&&!/^(true|false)$/.test(p))o.push(!0);else if(G(p)||G(l)&&/^-/.test(p)&&!z.test(p)&&!xe(p)){if(_[r]!==void 0){const m=_[r];o=Array.isArray(m)?m:[m]}}else{G(l)||o.push(Me(r,l,!0));for(let m=s+1;m<f.length&&!(!g["greedy-arrays"]&&o.length>0||h&&typeof h=="number"&&o.length>=h||(p=f[m],/^-/.test(p)&&!z.test(p)&&!xe(p)));m++)s=m,o.push(Me(r,p,a))}return typeof h=="number"&&(h&&o.length<h||isNaN(h)&&o.length===0)&&(P=Error(Z("Not enough arguments following: %s",r))),A(r,o),s}function A(s,r,f=a){if(/-/.test(s)&&g["camel-case-expansion"]){const p=s.split(".").map(function(h){return k(h)}).join(".");it(s,p)}const l=Me(s,r,f),o=s.split(".");$e(C,o,l),u.aliases[s]&&u.aliases[s].forEach(function(p){const h=p.split(".");$e(C,h,l)}),o.length>1&&g["dot-notation"]&&(u.aliases[o[0]]||[]).forEach(function(p){let h=p.split(".");const m=[].concat(o);m.shift(),h=h.concat(m),(u.aliases[s]||[]).includes(h.join("."))||$e(C,h,l)}),y(s,u.normalize)&&!y(s,u.arrays)&&[s].concat(u.aliases[s]||[]).forEach(function(h){Object.defineProperty(rt,h,{enumerable:!0,get(){return r},set(m){r=typeof m=="string"?M.normalize(m):m}})})}function it(s,r){u.aliases[s]&&u.aliases[s].length||(u.aliases[s]=[r],we[r]=!0),u.aliases[r]&&u.aliases[r].length||it(r,s)}function Me(s,r,f){f&&(r=bt(r)),(y(s,u.bools)||y(s,u.counts))&&typeof r=="string"&&(r=r==="true");let l=Array.isArray(r)?r.map(function(o){return Se(s,o)}):Se(s,r);return y(s,u.counts)&&(G(l)||typeof l=="boolean")&&(l=je()),y(s,u.normalize)&&y(s,u.arrays)&&(Array.isArray(r)?l=r.map(o=>M.normalize(o)):l=M.normalize(r)),l}function Se(s,r){return!g["parse-positional-numbers"]&&s==="_"||!y(s,u.strings)&&!y(s,u.bools)&&!Array.isArray(r)&&(Qe(r)&&g["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${r}`)))||!G(r)&&y(s,u.numbers))&&(r=Number(r)),r}function Tn(s){const r=Object.create(null);lt(r,u.aliases,_),Object.keys(u.configs).forEach(function(f){const l=s[f]||r[f];if(l)try{let o=null;const p=M.resolve(M.cwd(),l),h=u.configs[f];if(typeof h=="function"){try{o=h(p)}catch(m){o=m}if(o instanceof Error){P=o;return}}else o=M.require(p);qe(o)}catch(o){o.name==="PermissionDenied"?P=o:s[f]&&(P=Error(Z("Invalid JSON config file: %s",l)))}})}function qe(s,r){Object.keys(s).forEach(function(f){const l=s[f],o=r?r+"."+f:f;typeof l=="object"&&l!==null&&!Array.isArray(l)&&g["dot-notation"]?qe(l,o):(!me(C,o.split("."))||y(o,u.arrays)&&g["combine-arrays"])&&A(o,l)})}function Pn(){typeof R<"u"&&R.forEach(function(s){qe(s)})}function ct(s,r){if(typeof w>"u")return;const f=typeof w=="string"?w:"",l=M.env();Object.keys(l).forEach(function(o){if(f===""||o.lastIndexOf(f,0)===0){const p=o.split("__").map(function(h,m){return m===0&&(h=h.substring(f.length)),k(h)});(r&&u.configs[p.join(".")]||!r)&&!me(s,p)&&A(p.join("."),l[o])}})}function Bn(s){let r;const f=new Set;Object.keys(s).forEach(function(l){if(!f.has(l)&&(r=y(l,u.coercions),typeof r=="function"))try{const o=Se(l,r(s[l]));[].concat(u.aliases[l]||[],l).forEach(p=>{f.add(p),s[p]=o})}catch(o){P=o}})}function In(s){return u.keys.forEach(r=>{~r.indexOf(".")||typeof s[r]>"u"&&(s[r]=void 0)}),s}function lt(s,r,f,l=!1){Object.keys(f).forEach(function(o){me(s,o.split("."))||($e(s,o.split("."),f[o]),l&&(ot[o]=!0),(r[o]||[]).forEach(function(p){me(s,p.split("."))||$e(s,p.split("."),f[o])}))})}function me(s,r){let f=s;g["dot-notation"]||(r=[r.join(".")]),r.slice(0,-1).forEach(function(o){f=f[o]||{}});const l=r[r.length-1];return typeof f!="object"?!1:l in f}function $e(s,r,f){let l=s;g["dot-notation"]||(r=[r.join(".")]),r.slice(0,-1).forEach(function(O){O=Ke(O),typeof l=="object"&&l[O]===void 0&&(l[O]={}),typeof l[O]!="object"||Array.isArray(l[O])?(Array.isArray(l[O])?l[O].push({}):l[O]=[l[O],{}],l=l[O][l[O].length-1]):l=l[O]});const o=Ke(r[r.length-1]),p=y(r.join("."),u.arrays),h=Array.isArray(f);let m=g["duplicate-arguments-array"];!m&&y(o,u.nargs)&&(m=!0,(!G(l[o])&&u.nargs[o]===1||Array.isArray(l[o])&&l[o].length===u.nargs[o])&&(l[o]=void 0)),f===je()?l[o]=je(l[o]):Array.isArray(l[o])?m&&p&&h?l[o]=g["flatten-duplicate-arrays"]?l[o].concat(f):(Array.isArray(l[o][0])?l[o]:[l[o]]).concat([f]):!m&&!!p==!!h?l[o]=f:l[o]=l[o].concat([f]):l[o]===void 0&&p?l[o]=h?f:[f]:m&&!(l[o]===void 0||y(o,u.counts)||y(o,u.bools))?l[o]=[l[o],f]:l[o]=f}function zn(...s){s.forEach(function(r){Object.keys(r||{}).forEach(function(f){u.aliases[f]||(u.aliases[f]=[].concat(d[f]||[]),u.aliases[f].concat(f).forEach(function(l){if(/-/.test(l)&&g["camel-case-expansion"]){const o=k(l);o!==f&&u.aliases[f].indexOf(o)===-1&&(u.aliases[f].push(o),we[o]=!0)}}),u.aliases[f].concat(f).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&g["camel-case-expansion"]){const o=Ge(l,"-");o!==f&&u.aliases[f].indexOf(o)===-1&&(u.aliases[f].push(o),we[o]=!0)}}),u.aliases[f].forEach(function(l){u.aliases[l]=[f].concat(u.aliases[f].filter(function(o){return l!==o}))}))})})}function y(s,r){const f=[].concat(u.aliases[s]||[],s),l=Object.keys(r),o=f.find(p=>l.includes(p));return o?r[o]:!1}function at(s){const r=Object.keys(u);return[].concat(r.map(l=>u[l])).some(function(l){return Array.isArray(l)?l.includes(s):l[s]})}function Mn(s,...r){return[].concat(...r).some(function(l){const o=s.match(l);return o&&at(o[1])})}function qn(s){if(s.match(z)||!s.match(/^-[^-]+/))return!1;let r=!0,f;const l=s.slice(1).split("");for(let o=0;o<l.length;o++){if(f=s.slice(o+2),!at(l[o])){r=!1;break}if(l[o+1]&&l[o+1]==="="||f==="-"||/[A-Za-z]/.test(l[o])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(f)||l[o+1]&&l[o+1].match(/\W/))break}return r}function xe(s){return g["unknown-options-as-args"]&&Un(s)}function Un(s){return s=s.replace(/^-{3,}/,"--"),s.match(z)||qn(s)?!1:!Mn(s,/^-+([^=]+?)=[\s\S]*$/,Ie,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function X(s){return!y(s,u.bools)&&!y(s,u.counts)&&`${s}`in _?_[s]:Dn(Vn(s))}function Dn(s){return{[W.BOOLEAN]:!0,[W.STRING]:"",[W.NUMBER]:void 0,[W.ARRAY]:[]}[s]}function Vn(s){let r=W.BOOLEAN;return y(s,u.strings)?r=W.STRING:y(s,u.numbers)?r=W.NUMBER:y(s,u.bools)?r=W.BOOLEAN:y(s,u.arrays)&&(r=W.ARRAY),r}function G(s){return s===void 0}function Gn(){Object.keys(u.counts).find(s=>y(s,u.arrays)?(P=Error(Z("Invalid configuration: %s, opts.count excludes opts.array.",s)),!0):y(s,u.nargs)?(P=Error(Z("Invalid configuration: %s, opts.count excludes opts.narg.",s)),!0):!1)}return{aliases:Object.assign({},u.aliases),argv:Object.assign(rt,C),configuration:g,defaulted:Object.assign({},ot),error:P,newAliases:Object.assign({},we)}}}function yt(e){const t=[],n=Object.create(null);let i=!0;for(Object.keys(e).forEach(function(c){t.push([].concat(e[c],c))});i;){i=!1;for(let c=0;c<t.length;c++)for(let a=c+1;a<t.length;a++)if(t[c].filter(function(g){return t[a].indexOf(g)!==-1}).length){t[c]=t[c].concat(t[a]),t.splice(a,1),i=!0;break}}return t.forEach(function(c){c=c.filter(function(d,g,_){return _.indexOf(d)===g});const a=c.pop();a!==void 0&&typeof a=="string"&&(n[a]=c)}),n}function je(e){return e!==void 0?e+1:1}function Ke(e){return e==="__proto__"?"___proto___":e}function bt(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var Ne,Fe,Re;const Ye=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Ze=(Fe=(Ne=process==null?void 0:process.versions)===null||Ne===void 0?void 0:Ne.node)!==null&&Fe!==void 0?Fe:(Re=process==null?void 0:process.version)===null||Re===void 0?void 0:Re.slice(1);if(Ze&&Number(Ze.match(/^([^.]+)/)[1])<Ye)throw Error(`yargs parser supports a minimum Node.js version of ${Ye}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const Et=process?process.env:{},He=new $t({cwd:process.cwd,env:()=>Et,format:K.format,normalize:v.normalize,resolve:v.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(B.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ee=function(t,n){return He.parse(t.slice(),n).argv};ee.detailed=function(e,t){return He.parse(e.slice(),t)},ee.camelCase=k,ee.decamelize=Ge,ee.looksLikeNumber=Qe;const At={right:St,center:xt},_t=0,ye=1,wt=2,be=3;class Ct{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(i=>typeof i=="string"?this.colFromString(i):i);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(c=>c.split("	"));let i=0;return n.forEach(c=>{c.length>1&&F.stringWidth(c[0])>i&&(i=Math.min(Math.floor(this.width*.5),F.stringWidth(c[0])))}),n.forEach(c=>{this.div(...c.map((a,d)=>({text:a.trim(),padding:this.measurePadding(a),width:d===0&&c.length>1?i:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=F.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((i,c)=>{let a="";i.forEach((d,g)=>{const{width:_}=t[g],R=this.negatePadding(t[g]);let w=d;if(R>F.stringWidth(d)&&(w+=" ".repeat(R-F.stringWidth(d))),t[g].align&&t[g].align!=="left"&&this.wrap){const Y=At[t[g].align];w=Y(w,R),F.stringWidth(w)<R&&(w+=" ".repeat((_||0)-F.stringWidth(w)-1))}const V=t[g].padding||[0,0,0,0];V[be]&&(a+=" ".repeat(V[be])),a+=Xe(t[g],w,"| "),a+=w,a+=Xe(t[g],w," |"),V[ye]&&(a+=" ".repeat(V[ye])),c===0&&n.length>0&&(a=this.renderInline(a,n[n.length-1]))}),n.push({text:a.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const i=t.match(/^ */),c=i?i[0].length:0,a=n.text,d=F.stringWidth(a.trimRight());return n.span?this.wrap?c<d?t:(n.hidden=!0,a.trimRight()+" ".repeat(c-d)+t.trimLeft()):(n.hidden=!0,a+t):t}rasterize(t){const n=[],i=this.columnWidths(t);let c;return t.forEach((a,d)=>{a.width=i[d],this.wrap?c=F.wrap(a.text,this.negatePadding(a),{hard:!0}).split(`
`):c=a.text.split(`
`),a.border&&(c.unshift("."+"-".repeat(this.negatePadding(a)+2)+"."),c.push("'"+"-".repeat(this.negatePadding(a)+2)+"'")),a.padding&&(c.unshift(...new Array(a.padding[_t]||0).fill("")),c.push(...new Array(a.padding[wt]||0).fill(""))),c.forEach((g,_)=>{n[_]||n.push([]);const R=n[_];for(let w=0;w<d;w++)R[w]===void 0&&R.push("");R.push(g)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[be]||0)+(t.padding[ye]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(d=>d.width||F.stringWidth(d.text));let n=t.length,i=this.width;const c=t.map(d=>{if(d.width)return n--,i-=d.width,d.width}),a=n?Math.floor(i/n):0;return c.map((d,g)=>d===void 0?Math.max(a,Ot(t[g])):d)}}function Xe(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function Ot(e){const t=e.padding||[],n=1+(t[be]||0)+(t[ye]||0);return e.border?n+4:n}function vt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function St(e,t){e=e.trim();const n=F.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function xt(e,t){e=e.trim();const n=F.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let F;function jt(e,t){return F=t,new Ct({width:e?.width||vt(),wrap:e?.wrap})}const Je=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function ke(e){return e.replace(Je,"")}function Nt(e,t){const[n,i]=e.match(Je)||["",""];e=ke(e);let c="";for(let a=0;a<e.length;a++)a!==0&&a%t===0&&(c+=`
`),c+=e.charAt(a);return n&&i&&(c=`${n}${c}${i}`),c}function Ft(e){return jt(e,{stringWidth:t=>[...t].length,stripAnsi:ke,wrap:Nt})}function Rt(e,t){let n=v.resolve(".",e),i;for(B.statSync(n).isDirectory()||(n=v.dirname(n));;){if(i=t(n,B.readdirSync(n)),i)return v.resolve(n,i);if(n=v.dirname(i=n),i===n)break}}const Lt={fs:{readFileSync:B.readFileSync,writeFile:B.writeFile},format:K.format,resolve:v.resolve,exists:e=>{try{return B.statSync(e).isFile()}catch{return!1}}};let T;class Wt{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let i=function(){};return typeof t[t.length-1]=="function"&&(i=t.pop()),i=i||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:i})):i(),T.format.apply(T.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),i=t.shift(),c=t.shift();let a=function(){};typeof t[t.length-1]=="function"&&(a=t.pop()),this.cache[this.locale]||this._readLocaleFile();let d=c===1?n:i;this.cache[this.locale][n]&&(d=this.cache[this.locale][n][c===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:i},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:a})):a();const g=[d];return~d.indexOf("%d")&&g.push(c),T.format.apply(T.format,g.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let i="";return t.forEach(function(c,a){const d=n[a+1];i+=c,typeof d<"u"&&(i+="%s")}),this.__.apply(this,[i].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],i=n.directory,c=n.locale,a=n.cb,d=this._resolveLocaleFile(i,c),g=JSON.stringify(this.cache[c],null,2);T.fs.writeFile(d,g,"utf-8",function(_){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),a(_)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{T.fs.readFileSync&&(t=JSON.parse(T.fs.readFileSync(n,"utf-8")))}catch(i){if(i instanceof SyntaxError&&(i.message="syntax error in "+n),i.code==="ENOENT")t={};else throw i}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let i=T.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(i)&&~n.lastIndexOf("_")){const c=T.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(c)&&(i=c)}return i}_fileExistsSync(t){return T.exists(t)}}function Tt(e,t){T=t;const n=new Wt(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const Pt=e=>Tt(e,Lt),Bt="require is not supported by ESM",et="loading a directory of commands is not supported yet for ESM";let te;try{te=ut.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:De&&De.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{te=process.cwd()}const It=te.substring(0,te.lastIndexOf("node_modules"));Ue.notStrictEqual,Ue.strictEqual,K.inspect,It||process.cwd(),v.basename,v.dirname,v.extname,v.relative,v.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,B.readFileSync,Pt({directory:v.resolve(te,"../../../locales"),updateFiles:!1});const Le="\x1B[44m",I="\x1B[43m",j="\x1B[41m",zt="\x1B[42m",E="\x1B[0m",S="\x1B[33m",x="\x1B[36m",b="\x1B[0m",We=100,ne=[],Mt=(e,t)=>{const n=e.content.split(`
`);n.length>We&&ne.push({fileName:t,scriptLength:n.length})},qt=()=>(ne.length>0&&(console.log(`
${x}rrd${b} ${j}Long <script> blocks${E} in ${ne.length} files.`),console.log(`👉 ${S}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${We} lines.${b}`),ne.forEach(e=>{console.log(`- ${e.fileName} ${e.scriptLength>We*2?j:I}(${e.scriptLength} lines)${E}`)})),ne.length),se=[],Ut=e=>{se.push(e)},Dt=()=>(se.length>0&&(console.log(`
${x}rrd${b} ${I}Plain <script> blocks${E} in ${se.length} files.`),console.log(`👉 ${S} Consider using <script setup> to leverage the new SFC <script> syntax.${b}`),se.forEach(e=>{console.log(`- ${e}`)})),se.length),oe=[],Vt=(e,t)=>{const n=/\belse\b/gi,i=e.content.match(n);i?.length&&oe.push({fileName:t,elseCount:i.length})},Gt=()=>(oe.length>0&&(console.log(`
${x}rrd${b} ${I}else conditions${E} are used in ${oe.length} files.`),console.log(`👉 ${S}Try to rewrite the conditions in a way that the else clause is not necessary.${b}`),oe.forEach(e=>{console.log(`- ${e.fileName} ${I}(${e.elseCount})${E}`)})),oe.length),Qt=5,Kt=10,re=[],Yt=(e,t)=>{const n=/\bif\b/gi,i=/\belse\b/gi,c=/\bfor\b/gi,a=/\bwhile\b/gi,d=/\bcase\b/gi,g=e.content.match(n),_=e.content.match(i),R=e.content.match(c),w=e.content.match(a),V=e.content.match(d),Y=(g?.length||0)+(_?.length||0)+(R?.length||0)+(w?.length||0)+(V?.length||0);Y>Qt&&re.push({fileName:t,cyclomaticComplexity:Y})},Zt=()=>(re.length>0&&(console.log(`
${x}rrd${b} ${Le}cyclomaticComplexity${E} is above moderate in ${re.length} files.`),console.log(`👉 ${S}Try to reduce complexity.${b}`),re.forEach(e=>{console.log(`- ${e.fileName} ${e.cyclomaticComplexity>Kt?j:I}(${e.cyclomaticComplexity})${E}`)})),re.length),ie=[],Ht=e=>{if(e.includes("pages"))return;const t=v.basename(e);if(t==="App.vue")return;const n=/[A-Z]/;t.slice(1).match(n)?.length||ie.push({filePath:e})},Xt=()=>(ie.length>0&&(console.log(`
${x}vue-essential${b} ${j}single name component${E} is used in ${ie.length} files.`),console.log(`👉 ${S}Rename the component to use multi-word name.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),ie.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ie.length),ce=[],Jt=(e,t)=>{e.scoped||ce.push({filePath:t})},kt=()=>(ce.length>0&&(console.log(`
${x}vue-essential${b} ${j}Global style ${E} is used in ${ce.length} files.`),console.log(`👉 ${S}Use <style scoped>.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`),ce.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ce.length),le=[],en=(e,t)=>{const n=/defineProps\(\[/gi;e.content.match(n)?.length&&le.push({filePath:t})},tn=()=>(le.length>0&&(console.log(`
${x}vue-essential${b} ${j}simple prop${E} is used in ${le.length} files.`),console.log(`👉 ${S}Add at least type definition.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`),le.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),le.length),ae=[],nn=(e,t)=>{const n=/<[^>]+ v-if[^>]+ v-for[^>]+>/gi,i=/<[^>]+ v-for[^>]+ v-if[^>]+>/gi,c=e.content.match(n),a=e.content.match(i);(c?.length||a?.length)&&ae.push({filePath:t})},sn=()=>(ae.length>0&&(console.log(`
${x}vue-essential${b} ${j}v-if used with v-for${E} in ${ae.length} files.`),console.log(`👉 ${S}Move out the v-if to a computed property.${b} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`),ae.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ae.length),ue=[],on=(e,t)=>{const n=/<[^>]+ v-for[^>]+>/gi,i=e.content.match(n);i?.length&&(i.some(a=>a.includes(":key"))||ue.push({filePath:t}))},rn=()=>(ue.length>0&&(console.log(`
${x}vue-essential${b} ${j}v-for has no key${E} in ${ue.length} files.`),console.log(`👉 ${S}Add a \`:key\` property to all v-for.${b} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`),ue.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),ue.length),fe=[],cn=e=>{if(e.includes("pages/")||e.includes("layouts/"))return;const t=v.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,i=t.match(n),c=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,a=t.match(c);!i?.length&&!a?.length&&fe.push({fileName:e})},ln=()=>(fe.length>0&&(console.log(`
${x}vue-strong${b} ${j}component name is not PascalCase and not kebab-case${E} in ${fe.length} files.`),console.log(`👉 ${S}Rename the component to use PascalCase or kebab-case file name.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`),fe.forEach(e=>{console.log(`- ${j}${e.fileName}${E}`)})),fe.length),he=[],an=/^[a-z]+([A-Z][a-z]*)+$/,un=(e,t)=>{const n=/defineProps\({([^}]+)/g;let i;for(;(i=n.exec(e.content))!==null;)i[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(a=>a.split(":")[0]).filter(a=>a.length).filter(a=>!an.test(a)).length&&he.push({filePath:t})},fn=()=>(he.length>0&&(console.log(`
${x}vue-strong${b} ${j}prop names are not camelCased${E} in ${he.length} files.`),console.log(`👉 ${S}Rename the props to camelCase.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`),he.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),he.length),H=[],hn=40,dn=(e,t)=>{const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(c=>c[1].trim()).forEach(c=>{c.length>hn&&(H.some(a=>a.filePath===t)||H.push({filePath:t}))})},pn=()=>(H.length>0&&(console.log(`
${x}vue-strong${b} ${j}Lengthy template expression${E} found in ${H.length} files.`),console.log(`👉 ${S}Refactor the expression into a computed property.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-expressions-in-templates`),H.forEach(e=>{console.log(`- ${e.filePath} 🚨`)})),H.length),gn=/^(\(.*\)|\\?.)$/;function Q(e){const t=e.toString();return gn.test(t)?t:`(?:${t})`}const mn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,$n=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function $(e){const t=n=>$(`(?<${n}>${`${e}`.replace(mn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>$(`${e}${U(...n)}`),{referenceTo:n=>$(`${e}\\k<${n}>`)}),or:(...n)=>$(`(?:${e}|${U(...n)})`),after:(...n)=>$(`(?<=${U(...n)})${e}`),before:(...n)=>$(`${e}(?=${U(...n)})`),notAfter:(...n)=>$(`(?<!${U(...n)})${e}`),notBefore:(...n)=>$(`${e}(?!${U(...n)})`),times:Object.assign(n=>$(`${Q(e)}{${n}}`),{any:()=>$(`${Q(e)}*`),atLeast:n=>$(`${Q(e)}{${n},}`),atMost:n=>$(`${Q(e)}{0,${n}}`),between:(n,i)=>$(`${Q(e)}{${n},${i}}`)}),optionally:()=>$(`${Q(e)}?`),as:t,groupedAs:t,grouped:()=>$(`${e}`.replace($n,"($1$3)$2")),at:{lineStart:()=>$(`^${e}`),lineEnd:()=>$(`${e}$`)}}}const yn=/[.*+?^${}()|[\]\\/]/g;function tt(e){return $(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function Te(e){return $(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}const bn=$(".");$("\\b\\w+\\b");const Ee=$("\\w");$("\\b"),$("\\d"),$("\\s");const En=Object.assign($("[a-zA-Z]"),{lowercase:$("[a-z]"),uppercase:$("[A-Z]")}),An=$("\\t"),_n=$("\\n");$("\\r"),$("\\W+"),$("\\W"),$("\\B"),$("\\D"),$("\\S"),Object.assign($("[^a-zA-Z]"),{lowercase:$("[^a-z]"),uppercase:$("[^A-Z]")}),$("[^\\t]"),$("[^\\n]"),$("[^\\r]");function q(...e){return $(`${Q(U(...e))}?`)}function U(...e){return $(e.map(t=>typeof t=="string"?t.replace(yn,"\\$&"):t).join(""))}function D(...e){return $(`${Q(U(...e))}+`)}const Ae=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(U(...e).toString(),[...t||""].join(""))},Pe=(e,t)=>{if(!t.includes(`
`))return e.split(`
`).findIndex(d=>d.includes(t))+1;const n=e.indexOf(t),i=e.slice(0,n).split(`
`).length,c=t.split(`
`).length;return i+c-1},de=[],wn=(e,t)=>{const n=e.template,i=Ae("<",D(Ee),q(D(tt(` 	
\r`))),D(Te("/>")),q(D(tt(` 	
\r`))),q("/"),">",["g"]),c=n.content.match(i);if(c===null)return;const a=Ae(":",D(Ee),q(" "),"=",q(" "),Te(`'"`),["g"]);c.forEach(d=>{if(!d.includes(":"))return;const g=d.match(a);if(g?.length){const _=Pe(e.source,d);de.push({message:`${t}#${_} ${I}${g}${E}`})}})},Cn=()=>(de.length>0&&(console.log(`
${x}vue-strong${b} ${j}Attribute value is not quoted${E} in ${de.length} files.`),console.log(`👉 ${S}Use quotes for attribute values.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#quoted-attribute-values`),de.forEach(e=>{console.log(`- ${e.message} 🚨`)})),de.length),pe=[],On=(e,t)=>{const n=e.template,i=Ae("<",D(En.uppercase,Ee),q(_n,An),q(D(Te(">"))),"></",D(Ee),">",["g"]),c=n.content.match(i);c!==null&&c.forEach(a=>{const d=Pe(e.source,a),g=a.split(`
`).at(-1)?.trim()||"";pe.push({message:`${t}#${d} ${I}${g}${E}`})})},vn=()=>(pe.length>0&&(console.log(`
${x}vue-strong${b} - ${j}Component is not self closing${E} in ${pe.length} files.`),console.log(`👉 ${S}Components with no content should be self-closing.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#self-closing-components`),pe.forEach(e=>{console.log(`- ${e.message} 🚨`)})),pe.length),_e=[],Be=[],Sn=["v-slot","v-bind","v-on"],xn=(e,t)=>{const n=e.template;Sn.forEach(i=>{if(n.content.includes(`${i}:`)){const c=Pe(e.source,i);_e.push({message:`${t}:${c} ${I}${i}${E}`}),Be.some(a=>a.filePath===t)||Be.push({filePath:t})}})},jn=()=>(_e.length>0&&(console.log(`
${x}vue-strong${b} ${j}Directive shorthands not used${E} in ${Be.length} files.`),console.log(`👉 ${S}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${b} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#directive-shorthands`),_e.forEach(e=>{console.log(`- ${e.message} 🚨`)})),_e.length),ge=[],Nn=5,Fn=(e,t)=>{const n=Ae("defineProps",q("<"),q("("),"{",D(bn),"}",["g","s"]),i=e.content.match(n);if(i?.length){const c=i[0].split(",").length;c>Nn&&ge.push({fileName:t,propsCount:c})}},Rn=()=>(ge.length>0&&(console.log(`
${x}rrd${b} ${I}too many props${E} are used in ${ge.length} files.`),console.log(`👉 ${S}Try to refactor your code to use less properties.${b}`),ge.forEach(e=>{console.log(`- ${e.fileName} ${I}(${e.propsCount})${E}`)})),ge.length);let nt=0;const Ln=["src","components","pages","layouts","server","composables","store","utils","plugins","middleware"],st=(e,t)=>{const n=B.readdirSync(e);nt+=n.length;for(const i of n){const c=v.join(e,i);B.statSync(c).isDirectory()?Ln.some(a=>c.includes(a))&&st(c,t):i.endsWith(".vue")&&t(c)}},Wn=e=>{console.log(`

${Le}Analyzing Vue files in ${e}${E}`);let t=0;st(e,n=>{if(n.includes("App.vue")||n.includes("app.vue"))return;const i=B.readFileSync(n,"utf-8"),{descriptor:c}=ft.parse(i);Ht(n),cn(n),c.script&&Ut(n);const a=c.scriptSetup||c.script;a&&(en(a,n),un(a,n),Mt(a,n),Yt(a,n),Vt(a,n),Fn(a,n)),c.styles.forEach(d=>{Jt(d,n)}),c.template&&(on(c.template,n),nn(c.template,n),On(c,n),dn(c.template,n),wn(c,n),xn(c,n))}),console.log(`Found ${Le}${nt}${E} Vue files`),t+=Xt(),t+=tn(),t+=rn(),t+=sn(),t+=kt(),t+=ln(),t+=vn(),t+=fn(),t+=pn(),t+=Cn(),t+=jn(),t+=qt(),t+=Dt(),t+=Zt(),t+=Gt(),t+=Rn(),t||console.log(`${zt}No code smells detected!${E}`)};L(pt(process.argv)).command("analyze [path]","Analyze Vue files for code smells",e=>e.positional("path",{describe:"path to the Vue files",type:"string",default:"./"}),e=>{Wn(e.path)}).help().argv});
